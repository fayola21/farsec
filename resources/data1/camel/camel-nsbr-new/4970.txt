Cannot use xquery predicate in filter after an xpath splitter.    After upgrading from 2.5.0 to 2.9.0 using xqury predicate after an xpath filter throws java.lang.ClassCastException: net.sf.saxon.tinytree.TinyElementImpl cannot be cast to net.sf.saxon.om.DocumentInfo . Attached unit test doesn't fail in camel 2.5.0.from('direct:xpath') .split(xpathsplitter) .filter().xquery('//record&#91;type=2&#93;') .to('mock:result'); See nabble discussion http://camel.465427.n5.nabble.com/Unit-test-fails-after-upgrading-to-2-7-1-Cannot-use-xquery-expression-after-xpath-td4422582.html   