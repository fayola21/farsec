Make AjaxRequestTarget an interface and move the impl to AjaxRequestHandler    AjaxRequestTarget is a class with many final methods and constructor which relies on ThreadLocal (RequestCycle.get()) which makes it difficult to mock it for testing.By introducing IAjaxRequestHandler interface this problem will be solved. This additionally will allow to provide custom implementation which may generate JSON ajax response instead of XML.The change is simple but it changes the signature of all onXyz() (onEvent  onClick  onUpdate  ...) methods and this will cause a lot of compilation errors.The fix is quite easy though: replace AjaxRequestTarget with IAjaxRequestHandler.   