<title>Issue 26412 -   chromium -    DCHECK assertions don't cause ui_tests to fail - Project Hosting on Google Code</title> <pre> This report is related to  <a href="http://code.google.com/p/chromium/issues/detail?id=25354">http://code.google.com/p/chromium/issues/detail?id=25354</a>    In rev 30334 I saw  [----------] 1 test from DOMStorageTest  [ RUN      ] DOMStorageTest.LocalStorageLayoutTests  [...:ERROR:chrome/browser/automation/automation_provider.cc(941)] AutomationProxy went away  shutting down app.  [...:FATAL:chrome/browser/in_process_webkit/dom_storage_context.cc(87)] Check failed: ChromeThread::CurrentlyOn(ChromeThread::WEBKIT).  [       OK ] DOMStorageTest.LocalStorageLayoutTests (4393 ms)  [----------] 1 test from DOMStorageTest (4393 ms total)  ( <a href="http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(dbg)(2)/builds/3784/steps/ui_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(dbg)(2)/builds/3784/steps/ui_tests/logs/stdio</a> )    As of rev ~30500  I also see the following crash locally:  [ RUN      ] ExtensionUpdaterTest.TestBlacklistUpdateCheckRequests  [...:INFO:chrome/common/important_file_writer.cc(69)] successfully saved /tmp/org.chromium.pHDsTt/  [...:FATAL:chrome/browser/net/url_fetcher.cc(240)] Check failed: ChromeThread::CurrentlyOn(ChromeThread::WEBKIT).  // I was running it under ThreadSanitizer and it has attached as a debugger afterwards    That means  a) If DCHECK fails  the test is OK which means such failures are completely missed  b) In the Release build  this is likely to case data races in DOMStorageContext and UrlFetcher  c) The violations of such assertions are present.    You may consider running a Debug build under Valgrind or ThreadSanitizer locally.  The side effect of using such tools to slow down the execution can help you trigger these assertions more often.  See <a href="http://dev.chromium.org/developers/how-tos/using-valgrind/threadsanitizer">http://dev.chromium.org/developers/how-tos/using-valgrind/threadsanitizer</a> for the details. </pre>