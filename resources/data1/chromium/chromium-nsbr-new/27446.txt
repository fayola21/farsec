<title>Issue 27446 -   chromium -    socket() sometimes returns zero despite stdin still being open - Project Hosting on Google Code</title> <pre> Chrome Version       : 4.0.244.0 (Developer Build 31645)    I'm running chromium on linux.     I don't know why  but socket() is returning a value of zero  in some instances.  This is not a valid file descriptor  as   zero is already allocated to stdin  verified with lsof.    I don't know if this is a problem with multiple threads and   a signal handler or something else.  I'm still trying to track down  the source of the error.     Here is an strace of the occurances:  18422 socket(PF_NETLINK  SOCK_RAW  0)   = 0  18422 socket(PF_FILE  0x80801 /* SOCK_??? */  0) = 0  18423 socket(PF_NETLINK  SOCK_RAW  0)   = 0  18423 socket(PF_INET  SOCK_DGRAM  IPPROTO_IP) = 0  18420 socket(PF_INET  SOCK_STREAM  IPPROTO_TCP) = 0  18423 socket(PF_NETLINK  SOCK_RAW  0)   = 0  18423 socket(PF_FILE  0x80801 /* SOCK_??? */  0) = 0    --- net/socket/tcp_client_socket_libevent.cc    (<a href="/p/chromium/source/detail?r=31652">revision 31652</a>)  +++ net/socket/tcp_client_socket_libevent.cc    (working copy)  @@ -335 6 +335 10 @@      int TCPClientSocketLibevent::CreateSocket(const addrinfo* ai) {     socket_ = socket(ai-&gt;ai_family  ai-&gt;ai_socktype  ai-&gt;ai_protocol);  +  if (0 == socket_) {  +    socket_ = -1;  +    return MapPosixError(EINVAL);  +  }     if (socket_ == kInvalidSocket)       return MapPosixError(errno);   </pre>