<title>Issue 29596 -   chromium -    Implement the IsIntranetHost function - Project Hosting on Google Code</title> <pre> For <a title="Automatic integrated windows authentication (aka automatic NTLM / Negotiate Auth support)"  href="/p/chromium/issues/detail?id=19">issue 19</a>  we need an IsIntranetHost function that determines if a  host name is on the intranet:      bool IsIntranetHost(const std::string&amp; hostname);    This function may need to be a member function of HttpNetworkTransaction  so that it has access to the proxy resolver and proxy config service.    On Windows (the most important platform for <a title="Automatic integrated windows authentication (aka automatic NTLM / Negotiate Auth support)"  href="/p/chromium/issues/detail?id=19">issue 19</a>)  we can consider  an initial implementation using the MapUrlToZone function in the  IInternetSecurityManager interface:  <a href="http://msdn.microsoft.com/en-us/library/ms537133(VS.85).aspx">http://msdn.microsoft.com/en-us/library/ms537133(VS.85).aspx</a>  and using the default security manager returned by the  CoInternetCreateSecurityManager function in URLMON.dll:  <a href="http://msdn.microsoft.com/en-us/library/ms537157(VS.85).aspx">http://msdn.microsoft.com/en-us/library/ms537157(VS.85).aspx</a>    The downside is that URLMON.dll has a (delay load) dependency on  WININET.dll.  So we should eventually implement our own IsIntranetHost  function.    My web searches found a Microsoft knowledge base article that  describes how Internet Explorer determines if a host is on the intranet.  It seems to be based on heuristics such as whether the host name is  short (non-FQDN) or whether we can connect to the host without going  through a proxy.    <a href="http://support.microsoft.com/kb/884430">http://support.microsoft.com/kb/884430</a> indicates that zone computation  is based on the proxy exception list or the PAC file when a proxy  configuration is used  otherwise it's based on whether the host name is  FQDN:      URL assignment information        * A URL that requires a proxy is assigned to the Internet zone.      * A URL that can be retrieved directly without a proxy is        assigned to the Local intranet zone.      Note If no proxy configuration is used  Internet Explorer assigns    a URL with a host name that does not contain dots to the Local    intranet zone. A host name that does not contain dots is named a    dotless host name. An FQDN is assigned to the Internet zone.    Finally  it may be necessary to have a whitelist for host names that  should be considered to be on the intranet  at least for the purpose  of HTTP Negotiate/NTLM authentication. </pre>