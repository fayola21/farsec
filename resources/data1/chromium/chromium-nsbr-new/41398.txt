<title>Issue 41398 -   chromium -    Opt+dragging a bookmark/folder creates 2 copies on other syncing machine.  - Project Hosting on Google Code</title> <pre> Platform:    Hostname: testings-macbook-pro-15.local    Mac OS X Version 10.6 (Build 10A432)    Processor: 2 Intel 2.33 GHz    RAM: 2048 MB    Chrome:    Chrome version: 5.0.375.6 <a href="/p/chromium/source/detail?r=44316">r44316</a>  &lt;&lt;&lt;Release&gt;&gt;&gt;    QuickTime Player: &lt;unknown&gt;    QuickTime PlayerX: 51    Flash Player: 10.0.23      1. Enable sync on 2 machines  2. Opt+drag a bookmark or Bookmark folder on BMB to any location( drag to same BMB) from Machine &quot;A&quot;     Actual:  In fact Opt+drag should create one extra copy of the original. In machine &quot;A&quot; this is performed.  But on Machine &quot;B&quot; it creates 2 duplicates instead of one.    Expected: Should be in sync in creating the copies. Machine B should also have a single copy of the original.    Note: On deleting the duplicates(bookmarks folders) on either of the machines .. Browser is getting crashed     Crashing Thread:  ==========  Thread 0 (crashed)   0 Google Chrome Framew0.375.0.6            0x0050945e browser_sync::BookmarkChangeProcessor::ApplyChangesFromSyncModel(sync_api::BaseTransaction const*  sync_api::SyncManager::ChangeRecord const*  int) + 0x0 (stl_vector.h:361)   1 Google Chrome Framew0.375.0.6            0x00518247 browser_sync::SyncBackendHost::Core::OnChangesApplied(syncable::ModelType  sync_api::BaseTransaction const*  sync_api::SyncManager::ChangeRecord const*  int) + 0x1c   (sync_backend_host.cc:427)   2 Google Chrome Framew0.375.0.6            0x006733a3 sync_api::SyncManager::SyncInternal::HandleTransactionCompleteChangeEvent(syncable::DirectoryChangeEvent const&amp;) + 0x1a (syncapi.cc:1661)   3 Google Chrome Framew0.375.0.6            0x00675d58 EventListenerHookupImpl&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock  AutoLock&gt;  syncable::DirectoryChangeEvent    SimpleHookup&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock  AutoLock&gt;  syncable::DirectoryChangeEvent  sync_api::SyncManager::SyncInternal  void (sync_api::SyncManager::SyncInternal::*)(syncable::DirectoryChangeEvent const&amp;)&gt;   &gt;::HandleEvent(syncable::DirectoryChangeEvent const&amp;) + 0x20 (event_sys-inl.h:287)   4 Google Chrome Framew0.375.0.6            0x016af117 syncable::BaseTransaction::UnlockAndLog(std::set&lt;syncable::EntryKernel  syncable::LessEntryMetaHandles  std::allocator&lt;syncable::EntryKernel&gt; &gt;*) + 0x13 (event_sys-inl.h:184)   5 Google Chrome Framew0.375.0.6            0x016aff4e syncable::Directory::CheckTreeInvariants(syncable::BaseTransaction*  std::set&lt;syncable::EntryKernel  syncable::LessEntryMetaHandles  std::allocator&lt;syncable::EntryKernel&gt; &gt; const*) +   0xe (syncable.cc:1007)   6 Google Chrome Framew0.375.0.6            0x0166d7b2 browser_sync::ApplyUpdatesCommand::ModelChangingExecuteImpl(browser_sync::sessions::SyncSession*) + 0xd (apply_updates_command.cc:37)   7 Google Chrome Framew0.375.0.6            0x016829c7 browser_sync::ModelChangingSyncerCommand::StartChangingModel() + 0xe (model_changing_syncer_command.h:35)   8 Google Chrome Framew0.375.0.6            0x00526ee1 browser_sync::UIModelWorker::CallDoWorkAndSignalTask::Run() + 0x10 (callback.h:78)   9 Google Chrome Framew0.375.0.6            0x006b210a MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) + 0x7 (message_loop.cc:329)  10 Google Chrome Framew0.375.0.6            0x006b2ada MessageLoop::DoWork() + 0xb (message_loop.cc:444)  11 Google Chrome Framew0.375.0.6            0x00690af3 base::MessagePumpCFRunLoopBase::RunWorkSource(void*) + 0xa (message_pump_mac.mm:291)  12 CoreFoundation      0.550.0.0            0x9367a8ca __CFRunLoopDoSources0 + 0x61a  13 CoreFoundation      0.550.0.0            0x9367885e __CFRunLoopRun + 0x42e  14 CoreFoundation      0.550.0.0            0x93677d33 CFRunLoopRunSpecific + 0x1c3  15 CoreFoundation      0.550.0.0            0x93677b60 CFRunLoopRunInMode + 0x60  16 HIToolbox           0.437.0.0            0x97c20feb RunCurrentEventLoopInMode + 0x187  17 HIToolbox           0.437.0.0            0x97c20da2 ReceiveNextEventCommon + 0x161  18 HIToolbox           0.437.0.0            0x97c5d750 IsUserStillTracking(MenuSelectData*  unsigned char*) + 0x1fa  19 HIToolbox           0.437.0.0            0x97c3e57a TrackMenuCommon(MenuSelectData&amp;  unsigned char*) + 0xef3  20 HIToolbox           0.437.0.0            0x97de7bd3 PopUpMenuSelectCore(MenuData*  Point  double  Point  unsigned short  unsigned int  Rect const*  unsigned short  unsigned long  Rect const*  Rect const*  __CFString const*    OpaqueMenuRef**  unsigned short*) + 0x743  21 HIToolbox           0.437.0.0            0x97de7eca _HandlePopUpMenuSelection7 + 0x2a5  22 AppKit              0.1038.0.0           0x96089191 _NSSLMPopUpCarbonMenu3 + 0xf60  23 AppKit              0.1038.0.0           0x96089521 -[NSCarbonMenuImpl _popUpContextMenu:withEvent:forView:withFont:] + 0xdb  24 AppKit              0.1038.0.0           0x96201098 -[NSMenu _popUpContextMenu:withEvent:forView:withFont:] + 0x10d  25 AppKit              0.1038.0.0           0x96201137 -[NSMenu _popUpContextMenu:withEvent:forView:] + 0x3e  26 AppKit              0.1038.0.0           0x96200f0a -[NSMenu _popUpMenuWithEvent:forView:] + 0x33  27 AppKit              0.1038.0.0           0x963f7834 -[NSView rightMouseDown:] + 0x66  28 AppKit              0.1038.0.0           0x960e9981 -[NSControl _rightMouseUpOrDown:] + 0x215  29 AppKit              0.1038.0.0           0x95ed7097 -[NSWindow sendEvent:] + 0x167b  30 Google Chrome Framew0.375.0.6            0x00181f9a -[ChromeEventProcessingWindow sendEvent:] + 0x2a (chrome_event_processing_window.mm:125)  31 Google Chrome Framew0.375.0.6            0x00180dcd -[ChromeBrowserWindow sendEvent:] + 0x27 (chrome_browser_window.mm:300)  32 AppKit              0.1038.0.0           0x95defbee -[NSApplication sendEvent:] + 0x191e  33 Google Chrome Framew0.375.0.6            0x0069d3b0 -[CrApplication sendEvent:] + 0x2d (chrome_application_mac.mm:43)  34 AppKit              0.1038.0.0           0x95d8365a -[NSApplication run] + 0x394  35 Google Chrome Framew0.375.0.6            0x0069059c base::MessagePumpNSApplication::DoRun(base::MessagePump::Delegate*) + 0x19 (message_pump_mac.mm:677)  36 Google Chrome Framew0.375.0.6            0x0068fd25 base::MessagePumpCFRunLoopBase::Run(base::MessagePump::Delegate*) + 0xb (message_pump_mac.mm:213)  37 Google Chrome Framew0.375.0.6            0x006b2053 MessageLoop::Run() + 0xb (message_loop.cc:205)  38 Google Chrome Framew0.375.0.6            0x00120bbb BrowserMain(MainFunctionParams const&amp;) + 0x7 (browser_main.cc:179)  39 Google Chrome Framew0.375.0.6            0x0000b088 ChromeMain + 0xd (chrome_dll_main.cc:814)  40 Google Chrome                            0x00001ff7 main + 0x11 (chrome_exe_main.mm:16)  41 Google Chrome                            0x00001fb5   42     Crash report attached for reference.   </pre>