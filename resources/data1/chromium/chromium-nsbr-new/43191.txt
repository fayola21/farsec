<title>Issue 43191 -   chromium -    DCHECK when a server returns http 407 (proxy auth required) - Project Hosting on Google Code</title> <pre> In ToT we DCHECK if a non-proxy-server returns a 407:    DCHECK(is_valid() &amp;&amp; !is_direct());  &lt;--- Here     	chrome.dll!net::ProxyServer::host_and_port()  Line 84	C++   	chrome.dll!net::HttpNetworkTransaction::AuthOrigin()  Line 1727	C++   	chrome.dll!net::HttpNetworkTransaction::HandleAuthChallenge()  Line 1903	C++   	chrome.dll!net::HttpNetworkTransaction::DoReadHeadersComplete()  Line 1154	C++   	chrome.dll!net::HttpNetworkTransaction::DoLoop()  Line 574	C++   	chrome.dll!net::HttpNetworkTransaction::OnIOComplete()  Line 516	C++    Looks like that code needs to be moved below the check for unexpected proxy-auth. </pre>