<title>Issue 25176 -   chromium -    ProcessSingletonLinuxTest.NotifyOtherProcessFailure broken under valgrind? - Project Hosting on Google Code</title> <pre> <a href="http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valgrind)(1)/builds/619/steps/valgrind%20test:%20ui/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valgrind)(1)/builds/619/steps/valgrind%20test:%20ui/logs/stdio</a>    shows    [ RUN      ] ProcessSingletonLinuxTest.NotifyOtherProcessFailure  [31085:31085:1019/034755:2465462920610:INFO:/b/slave/chromium-rel-linux-valgrind-builder/build/src/chrome/test/ui/ui_test.cc(1124)]  BROWSER_WRAPPER was set  prefixing command_line with  /b/slave/chromium-rel-linux-valgrind-tests-1/build/valgrind.tmp/browser_wrapper.muMj3G  [32415:32415:2465467776330:ERROR:/b/slave/chromium-rel-linux-valgrind-builder/build/src/chrome/browser/first_run_gtk.cc(21)]  Not implemented reached in static bool  FirstRun::ProcessMasterPreferences(const FilePath&amp;  const FilePath&amp;   std::vector&lt;std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt;  std::allocator&lt;std::basic_string&lt;wchar_t   std::char_traits&lt;wchar_t&gt;  std::allocator&lt;wchar_t&gt; &gt; &gt; &gt;*  int*  bool*)  Killed  [       OK ] ProcessSingletonLinuxTest.NotifyOtherProcessFailure (30532 ms)    Hmm  should that be OK or FAILED?   Also  later in the log   we see that a helper process never terminated?    04:02:20 memcheck_analyze.py [WARNING] valgrind didn't finish writing 2 files?!  04:02:20 memcheck_analyze.py [WARNING] Last 20 lines of  valgrind.tmp/memcheck.32415 :    &lt;argv&gt;       &lt;exe&gt;/b/slave/chromium-rel-linux-valgrind-tests-1/build/src/sconsbuild/Release/chrome&lt;/exe&gt;      &lt;arg&gt;--no-first-run&lt;/arg&gt;      &lt;arg&gt;--no-default-browser-check&lt;/arg&gt;      &lt;arg&gt;--enable-file-cookies&lt;/arg&gt;      &lt;arg&gt;--testing-channel=ChromeTestingInterface:31085.26&lt;/arg&gt;      &lt;arg&gt;--homepage=about:blank&lt;/arg&gt;      &lt;arg&gt;--disable-web-resources&lt;/arg&gt;      &lt;arg&gt;--user-data-dir=/tmp/org.chromium.Z4eqtx/test_user_data&lt;/arg&gt;      &lt;arg&gt;--metrics-recording-only&lt;/arg&gt;      &lt;arg&gt;--enable-logging&lt;/arg&gt;      &lt;arg&gt;--test-name=ProcessSingletonLinuxTest.NotifyOtherProcessFailure&lt;/arg&gt;    &lt;/argv&gt;  &lt;/args&gt;   </pre>