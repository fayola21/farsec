<title>Issue 40879 -   chromium -    Mac Valgrind UI: leak in ExtensionAction (CrxInstaller?) - Project Hosting on Google Code</title> <pre> Could be a fake leak:    16:04:35 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-mac-valgrind-ui-1/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium --no-first-run --no-default-browser-check   --test-type=ui --enable-file-cookies --testing-channel=ChromeTestingInterface:76570.24 --noerrdialogs --homepage=about:blank --disable-web-resources --user-data-  dir=/private/var/folders/yo/yotGBOBoH+ijr5HR-DAtvk+++TM/-Tmp-/org.chromium.uhamxy/test_user_data --metrics-recording-only --enable-logging --test-  name=ExtensionProxyUITest.EnableDisable --allow-file-access-from-files  309 (24 direct  285 indirect) bytes in 1 blocks are definitely lost in loss record 5 399 of 5 984    operator new(unsigned long) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:235)    __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;int const  bool&gt; &gt; &gt;::allocate(unsigned long  void const*) (ext/new_allocator.h:88)    std::_Rb_tree&lt;int  std::pair&lt;int const  bool&gt;  std::_Select1st&lt;std::pair&lt;int const  bool&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt; &gt;::_M_get_node()   (stl_tree.h:356)    std::_Rb_tree&lt;int  std::pair&lt;int const  bool&gt;  std::_Select1st&lt;std::pair&lt;int const  bool&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt;   &gt;::_M_create_node(std::pair&lt;int const  bool&gt; const&amp;) (stl_tree.h:365)    std::_Rb_tree&lt;int  std::pair&lt;int const  bool&gt;  std::_Select1st&lt;std::pair&lt;int const  bool&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt;   &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*  std::pair&lt;int const  bool&gt; const&amp;) (stl_tree.h:789)    std::_Rb_tree&lt;int  std::pair&lt;int const  bool&gt;  std::_Select1st&lt;std::pair&lt;int const  bool&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt;   &gt;::insert_unique(std::pair&lt;int const  bool&gt; const&amp;) (stl_tree.h:883)    std::_Rb_tree&lt;int  std::pair&lt;int const  bool&gt;  std::_Select1st&lt;std::pair&lt;int const  bool&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt;   &gt;::insert_unique(std::_Rb_tree_iterator&lt;std::pair&lt;int const  bool&gt; &gt;  std::pair&lt;int const  bool&gt; const&amp;) (stl_tree.h:905)    std::map&lt;int  bool  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt; &gt;::insert(std::_Rb_tree_iterator&lt;std::pair&lt;int const  bool&gt; &gt;  std::pair&lt;int const  bool&gt; const&amp;)   (stl_map.h:384)    std::map&lt;int  bool  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt; &gt;::operator[](int const&amp;) (stl_map.h:339)    void ExtensionAction::SetValue&lt;bool&gt;(std::map&lt;int  bool  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  bool&gt; &gt; &gt;*  int  bool) (extension_action.h:167)    ExtensionAction::SetIsVisible(int  bool) (extension_action.h:143)    Extension::LoadExtensionActionHelper(DictionaryValue const*  std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*) (extension.cc:361)    Extension::InitFromValue(DictionaryValue const&amp;  bool  std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*) (extension.cc:1312)    extension_file_util::LoadExtension(FilePath const&amp;  bool  std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*) (extension_file_util.cc:150)    CrxInstaller::CompleteInstall() (crx_installer.cc:260)    void DispatchToMethod&lt;CrxInstaller  void (CrxInstaller::*)()&gt;(CrxInstaller*  void (CrxInstaller::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;CrxInstaller  void (CrxInstaller::*)()  Tuple0&gt;::Run() (task.h:296)    MessageLoop::RunTask(Task*) (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:329)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:337)    MessageLoop::DoWork() (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:444)    base::MessagePumpLibevent::Run(base::MessagePump::Delegate*) (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_pump_libevent.cc:241)    MessageLoop::RunInternal() (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:205)    MessageLoop::RunHandler() (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:177)    MessageLoop::Run() (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/message_loop.cc:155)    base::Thread::Run(MessageLoop*) (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/thread.cc:133)    base::Thread::ThreadMain() (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/thread.cc:155)    ThreadFunc(void*) (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/platform_thread_posix.cc:26)    _pthread_start    thread_start  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeISt4pairIKibEEE8allocateEmPKv     fun:_ZNSt8_Rb_treeIiSt4pairIKibESt10_Select1stIS2_ESt4lessIiESaIS2_EE11_M_get_nodeEv     fun:_ZNSt8_Rb_treeIiSt4pairIKibESt10_Select1stIS2_ESt4lessIiESaIS2_EE14_M_create_nodeERKS2_     fun:_ZNSt8_Rb_treeIiSt4pairIKibESt10_Select1stIS2_ESt4lessIiESaIS2_EE9_M_insertEPSt18_Rb_tree_node_baseSA_RKS2_     fun:_ZNSt8_Rb_treeIiSt4pairIKibESt10_Select1stIS2_ESt4lessIiESaIS2_EE13insert_uniqueERKS2_     fun:_ZNSt8_Rb_treeIiSt4pairIKibESt10_Select1stIS2_ESt4lessIiESaIS2_EE13insert_uniqueESt17_Rb_tree_iteratorIS2_ERKS2_     fun:_ZNSt3mapIibSt4lessIiESaISt4pairIKibEEE6insertESt17_Rb_tree_iteratorIS4_ERKS4_     fun:_ZNSt3mapIibSt4lessIiESaISt4pairIKibEEEixERS3_     fun:_ZN15ExtensionAction8SetValueIbEEvPSt3mapIiT_St4lessIiESaISt4pairIKiS2_EEEiS2_     fun:_ZN15ExtensionAction12SetIsVisibleEib     fun:_ZN9Extension25LoadExtensionActionHelperEPK15DictionaryValuePSs     fun:_ZN9Extension13InitFromValueERK15DictionaryValuebPSs     fun:_ZN19extension_file_util13LoadExtensionERK8FilePathbPSs     fun:_ZN12CrxInstaller15CompleteInstallEv     fun:_Z16DispatchToMethodI12CrxInstallerMS0_FvvEEvPT_T0_RK6Tuple0     fun:_ZN14RunnableMethodI12CrxInstallerMS0_FvvE6Tuple0E3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base19MessagePumpLibevent3RunEPNS_11MessagePump8DelegateE     fun:_ZN11MessageLoop11RunInternalEv  } </pre>