<title>Issue 42314 -   chromium -    ExtensionApiTest.Notifications is flaky - Project Hosting on Google Code</title> <pre> ExtensionApiTest.Notifications:  [788:788:0422/064851:10597544166570:WARNING:chrome/installer/util/master_preferences.cc(163)] Master preferences file not found: /b/slave/chromium-rel-  linux/build/src/out/Release/master_preferences  [788:798:0422/064851:10597544167347:INFO:net/base/host_resolver_impl.cc(1108)] IPv6Probe forced AddressFamily setting to ADDRESS_FAMILY_IPV4  [788:788:0422/064851:10597544168784:INFO:chrome/browser/extensions/extensions_service.cc(608)] Sending EXTENSION_LOADED  [788:788:0422/064851:10597544219029:INFO:chrome/browser/history/history.cc(723)] History backend finished loading  [788:795:0422/064851:10597544220780:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Default/Bookmarks    (browser_tests:788): Gtk-WARNING **: gtk_widget_size_allocate(): attempt to allocate widget with width -1 and height 0    (browser_tests:788): Gtk-WARNING **: gtk_widget_size_allocate(): attempt to allocate widget with width -1 and height 1  [788:788:0422/064851:10597544287196:INFO:chrome/browser/extensions/extension_apitest.cc(67)] Running ExtensionApiTest with: notifications/has_not_permission  [788:795:0422/064851:10597544287326:INFO:chrome/browser/extensions/extensions_service.cc(1107)] Loading single extension from has_not_permission  [788:795:0422/064851:10597544287914:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Default/Preferences  [788:788:0422/064851:10597544287979:INFO:chrome/browser/extensions/extensions_service.cc(608)] Sending EXTENSION_LOADED  [788:788:0422/064851:10597544288060:INFO:chrome/browser/extensions/extension_host.cc(189)] Creating RenderView for notifications test  Got EXTENSION_LOADED notification.  [788:788:0422/064851:10597544289258:INFO:chrome/browser/extensions/extension_host.cc(693)] (RenderViewCreated) Resetting EFD to chrome-  extension://dgfknlabfcoofnianfoafahkeemohngk/background.html for notifications test  [788:788:0422/064851:10597544289307:INFO:chrome/browser/extensions/extension_host.cc(208)] Request to NavigateToURL chrome-  extension://dgfknlabfcoofnianfoafahkeemohngk/background.html for notifications test  [788:788:0422/064851:10597544289321:INFO:chrome/browser/extensions/extension_host.cc(229)] Navigating to chrome-  extension://dgfknlabfcoofnianfoafahkeemohngk/background.html  [788:788:0422/064851:10597544290906:INFO:chrome/browser/extensions/extension_host.cc(248)] Sending EXTENSION_PROCESS_CREATED  [788:788:0422/064851:10597544294018:INFO:chrome/browser/extensions/extension_host.cc(327)] (DidNavigate) Resetting EFD to chrome-  extension://dgfknlabfcoofnianfoafahkeemohngk/background.html for notifications test  ( RUN      ) hasPermission  [788:788:0422/064852:10597544321033:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) hasPermission  [788:788:0422/064852:10597544332977:INFO:CONSOLE(0)] &quot;[SUCCESS] hasPermission &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544333243:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  [788:788:0422/064852:10597544333636:INFO:chrome/browser/extensions/extension_host.cc(394)] Sending EXTENSION_HOST_DID_STOP_LOADING  Got EXTENSION_HOST_DID_STOP_LOADING notification.  [788:788:0422/064852:10597544333698:INFO:chrome/browser/extensions/extension_browsertest.cc(230)] All ExtensionHosts loaded  ( RUN      ) showNotification  [788:788:0422/064852:10597544334945:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) showNotification  [788:788:0422/064852:10597544335716:INFO:CONSOLE(0)] &quot;[SUCCESS] showNotification &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544335863:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  [788:788:0422/064852:10597544337103:INFO:CONSOLE(0)] &quot;All tests succeeded &quot; source:  (47)  Got EXTENSION_TEST_PASSED notification.  [788:788:0422/064852:10597544337267:INFO:chrome/browser/extensions/extension_apitest.cc(67)] Running ExtensionApiTest with: notifications/has_permission_manifest  [788:795:0422/064852:10597544337362:INFO:chrome/browser/extensions/extensions_service.cc(1107)] Loading single extension from has_permission_manifest  [788:788:0422/064852:10597544337866:INFO:chrome/browser/extensions/extensions_service.cc(608)] Sending EXTENSION_LOADED  [788:788:0422/064852:10597544337918:INFO:chrome/browser/extensions/extension_host.cc(189)] Creating RenderView for notifications test  Got EXTENSION_LOADED notification.  [788:788:0422/064852:10597544338133:INFO:chrome/browser/extensions/extension_host.cc(693)] (RenderViewCreated) Resetting EFD to chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html for notifications test  [788:788:0422/064852:10597544338177:INFO:chrome/browser/extensions/extension_host.cc(208)] Request to NavigateToURL chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html for notifications test  [788:788:0422/064852:10597544338190:INFO:chrome/browser/extensions/extension_host.cc(229)] Navigating to chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html  [788:795:0422/064852:10597544338333:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Default/Preferences  [788:788:0422/064852:10597544340433:INFO:CONSOLE(0)] &quot;Uncaught completed &quot; source: chrome/extensionapitest (19)  [788:788:0422/064852:10597544340630:INFO:chrome/browser/extensions/extension_host.cc(248)] Sending EXTENSION_PROCESS_CREATED  [788:788:0422/064852:10597544349574:INFO:chrome/browser/extensions/extension_host.cc(327)] (DidNavigate) Resetting EFD to chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html for notifications test  ( RUN      ) hasPermission  [788:788:0422/064852:10597544376741:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) hasPermission  [788:788:0422/064852:10597544388678:INFO:CONSOLE(0)] &quot;[SUCCESS] hasPermission &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544388856:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  [788:788:0422/064852:10597544389137:INFO:chrome/browser/extensions/extension_host.cc(394)] Sending EXTENSION_HOST_DID_STOP_LOADING  Got EXTENSION_HOST_DID_STOP_LOADING notification.  [788:788:0422/064852:10597544389174:INFO:chrome/browser/extensions/extension_browsertest.cc(230)] All ExtensionHosts loaded  ( RUN      ) absoluteURL  [788:788:0422/064852:10597544390216:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) absoluteURL  [788:788:0422/064852:10597544390531:INFO:chrome/browser/notifications/notification_ui_manager.cc(54)] Added notification. URL: chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/notification.html  [788:788:0422/064852:10597544496833:INFO:CONSOLE(0)] &quot;chrome://extensions/ finished loading. &quot; source: chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html (27)  [788:788:0422/064852:10597544496932:INFO:CONSOLE(0)] &quot;[SUCCESS] absoluteURL &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544497011:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  ( RUN      ) relativeURL  [788:788:0422/064852:10597544497157:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) relativeURL  [788:788:0422/064852:10597544497237:INFO:chrome/browser/notifications/notification_ui_manager.cc(54)] Added notification. URL: chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/notification.html  [788:788:0422/064852:10597544545012:INFO:CONSOLE(0)] &quot;chrome://extensions/ finished loading. &quot; source: chrome-  extension://bahipjkoabbndfdhmknafpaejlhnddjm/background.html (27)  [788:788:0422/064852:10597544546764:INFO:CONSOLE(0)] &quot;[SUCCESS] relativeURL &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544548265:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  [788:788:0422/064852:10597544548743:INFO:CONSOLE(0)] &quot;All tests succeeded &quot; source:  (47)  Got EXTENSION_TEST_PASSED notification.  [788:788:0422/064852:10597544549486:INFO:CONSOLE(0)] &quot;Uncaught completed &quot; source: chrome/extensionapitest (19)  [788:788:0422/064852:10597544549918:INFO:chrome/browser/extensions/extension_apitest.cc(67)] Running ExtensionApiTest with: notifications/has_permission_prefs  [788:795:0422/064852:10597544550321:INFO:chrome/browser/extensions/extensions_service.cc(1107)] Loading single extension from has_permission_prefs  [788:788:0422/064852:10597544550908:INFO:chrome/browser/extensions/extensions_service.cc(608)] Sending EXTENSION_LOADED  [788:795:0422/064852:10597544550994:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Default/Preferences  [788:788:0422/064852:10597544551609:INFO:chrome/browser/extensions/extension_host.cc(189)] Creating RenderView for notifications test  Got EXTENSION_LOADED notification.  [788:788:0422/064852:10597544552514:INFO:chrome/browser/extensions/extension_host.cc(693)] (RenderViewCreated) Resetting EFD to chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/background.html for notifications test  [788:788:0422/064852:10597544552933:INFO:chrome/browser/extensions/extension_host.cc(208)] Request to NavigateToURL chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/background.html for notifications test  [788:788:0422/064852:10597544553255:INFO:chrome/browser/extensions/extension_host.cc(229)] Navigating to chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/background.html  [788:788:0422/064852:10597544557798:INFO:chrome/browser/extensions/extension_host.cc(248)] Sending EXTENSION_PROCESS_CREATED  [788:788:0422/064852:10597544561488:INFO:chrome/browser/extensions/extension_host.cc(327)] (DidNavigate) Resetting EFD to chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/background.html for notifications test  ( RUN      ) hasPermission  [788:788:0422/064852:10597544589858:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) hasPermission  [788:788:0422/064852:10597544601905:INFO:CONSOLE(0)] &quot;[SUCCESS] hasPermission &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544602075:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  [788:788:0422/064852:10597544602288:INFO:chrome/browser/extensions/extension_host.cc(394)] Sending EXTENSION_HOST_DID_STOP_LOADING  Got EXTENSION_HOST_DID_STOP_LOADING notification.  [788:788:0422/064852:10597544602337:INFO:chrome/browser/extensions/extension_browsertest.cc(230)] All ExtensionHosts loaded  ( RUN      ) absoluteURL  [788:788:0422/064852:10597544603481:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) absoluteURL  [788:788:0422/064852:10597544603877:INFO:chrome/browser/notifications/notification_ui_manager.cc(54)] Added notification. URL: chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/notification.html  [788:788:0422/064852:10597544621573:INFO:CONSOLE(0)] &quot;[SUCCESS] absoluteURL &quot; source:  (87)  (  SUCCESS )  [788:788:0422/064852:10597544621655:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  SUCCESS )  ( RUN      ) relativeURL  [788:788:0422/064852:10597544622302:INFO:chrome/browser/extensions/extension_test_api.cc(35)] ( RUN      ) relativeURL  [788:788:0422/064852:10597544622840:INFO:chrome/browser/notifications/notification_ui_manager.cc(54)] Added notification. URL: chrome-  extension://peoadpeiejnhkmpaakpnompolbglelel/notification.html  (  FAILED  ) relativeURL  [788:788:0422/064852:10597544633480:INFO:chrome/browser/extensions/extension_test_api.cc(35)] (  FAILED  ) relativeURL  [788:788:0422/064852:10597544635678:INFO:CONSOLE(0)] &quot;[FAIL] relativeURL: API Test Error in relativeURL  Actual: 3  Expected: 2      at Object.assertEq (chrome/extensionapitest:109:19)      at onNotificationDone (chrome-extension://peoadpeiejnhkmpaakpnompolbglelel/background.html:17:15)      at Object.callback (chrome-extension://peoadpeiejnhkmpaakpnompolbglelel/notification.html:8:40)      at Object.&lt;anonymous&gt; (chrome/ExtensionProcessBindings:120:19) &quot; source:  (41)  Got EXTENSION_TEST_FAILED notification.  [788:788:0422/064852:10597544636799:INFO:CONSOLE(0)] &quot;Uncaught completed &quot; source: chrome/extensionapitest (19)  chrome/browser/extensions/notifications_apitest.cc:21: Failure  Value of: RunExtensionTest(&quot;notifications/has_permission_prefs&quot;)    Actual: false  Expected: true  API Test Error in relativeURL  Actual: 3  Expected: 2      at Object.assertEq (chrome/extensionapitest:109:19)      at onNotificationDone (chrome-extension://peoadpeiejnhkmpaakpnompolbglelel/background.html:17:15)      at Object.callback (chrome-extension://peoadpeiejnhkmpaakpnompolbglelel/notification.html:8:40)      at Object.&lt;anonymous&gt; (chrome/ExtensionProcessBindings:120:19)  [788:795:0422/064852:10597544653912:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Local State  [788:795:0422/064852:10597544654736:INFO:chrome/browser/important_file_writer.cc(71)] successfully saved /tmp/org.chromium.IBB49Z/test_user_data/Default/Preferences </pre>