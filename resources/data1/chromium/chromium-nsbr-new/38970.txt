<title>Issue 38970 -   chromium -    Failed assertion reporting exception during worker shutdown - Project Hosting on Google Code</title> <pre> While running the SharedWorkerHttpAuth test under valgrind  I got the following failed assertion:    Command:   /Volumes/source/chrome.git/src/xcodebuild/Debug/Chromium.app/Contents/Versions/5.0.360  .0/Chromium Helper.app/Contents/MacOS/Chromium Helper --type=worker --  channel=58049.0x2040a4d0.1081383255 --enable-logging  Invalid write of size 4    WebCore::V8Proxy::retrieveWindow(v8::Handle&lt;v8::Context&gt;)   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  Proxy.cpp:537)    WebCore::V8Proxy::retrieveFrame(v8::Handle&lt;v8::Context&gt;)   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  Proxy.cpp:543)    WebCore::V8Proxy::retrieveFrameForCurrentContext()   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  Proxy.cpp:566)    WebCore::getScriptExecutionContext(WebCore::ScriptState*)   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  Utilities.cpp:141)    WebCore::reportException(WebCore::ScriptState*  v8::TryCatch&amp;)   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  Utilities.cpp:171)    WebCore::V8AbstractEventListener::invokeEventHandler(WebCore::ScriptExecutionContext*    WebCore::Event*  v8::Handle&lt;v8::Value&gt;)   (/Volumes/source/chrome.git/src/third_party/WebKit/WebCore/WebCore.gyp/../bindings/v8/V8  AbstractEventListener.cpp:150)  ...    Basically  the problem seems to be that if you're running in a worker thread  but   WorkerContextExecutionProxy::retrieve() returns null  then getScriptExecutionContext() assumes   that we're running in document context and a failed assertion ensues. </pre>