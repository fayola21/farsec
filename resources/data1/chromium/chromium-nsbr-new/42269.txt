<title>Issue 42269 -   chromium -    Crash on starting one datatype  stopping another  and then stopping sync - Project Hosting on Google Code</title> <pre>   1. Start syncing one datatype; say  bookmarks.  2. Wrench-&gt;Synced...-&gt;Customize.  Uncheck bookmarks  check preferences  click OK.  3. Immediately click &quot;stop syncing this account&quot; and &quot;stop syncing&quot;.  Chrome crashes.  Note that this only crashes if you start one datatype and stop another.    Here's a stack trace  if that helps.  Looks like the SyncManager got deleted at one point  and then we're trying to access it again.     	chrome.dll!scoped_ptr&lt;sync_api::SyncManager&gt;::get()  Line 96 + 0x11 bytes	C++   	chrome.dll!browser_sync::SyncBackendHost::Core::syncapi()  Line 280 + 0x19 bytes	C++  &gt;	chrome.dll!browser_sync::SyncBackendHost::GetDetailedStatus()  Line 266 + 0x16 bytes	C++   	chrome.dll!ProfileSyncService::QueryDetailedSyncStatus()  Line 407 + 0x19 bytes	C++   	chrome.dll!sync_ui_util::`anonymous namespace'::GetStatusInfo(ProfileSyncService * service=0x03e576c0    std::basic_string&lt;wchar_t std::char_traits&lt;wchar_t&gt; std::allocator&lt;wchar_t&gt; &gt; * status_label=&quot;&quot;    std::basic_string&lt;wchar_t std::char_traits&lt;wchar_t&gt; std::allocator&lt;wchar_t&gt; &gt; * link_label=&quot;&quot;)  Line 84	C++   	chrome.dll!sync_ui_util::GetStatusLabels(ProfileSyncService * service=0x03e576c0    std::basic_string&lt;wchar_t std::char_traits&lt;wchar_t&gt; std::allocator&lt;wchar_t&gt; &gt; * status_label=&quot;&quot;    std::basic_string&lt;wchar_t std::char_traits&lt;wchar_t&gt; std::allocator&lt;wchar_t&gt; &gt; * link_label=&quot;&quot;)  Line 158 + 0x11 bytes	C++   	chrome.dll!NewTabPageSyncHandler::BuildAndSendSyncStatus()  Line 144 + 0x14 bytes	C++   	chrome.dll!NewTabPageSyncHandler::OnStateChanged()  Line 177	C++   	chrome.dll!ProfileSyncService::OnUnrecoverableError()  Line 335 + 0x31 bytes	C++   	chrome.dll!ProfileSyncService::Observe(NotificationType type={...}  const NotificationSource &amp; source={...}  const   NotificationDetails &amp; details={...})  Line 566 + 0x12 bytes	C++   	chrome.dll!NotificationService::Notify(NotificationType type={...}  const NotificationSource &amp; source={...}  const   NotificationDetails &amp; details={...})  Line 121 + 0x5a bytes	C++   	chrome.dll!browser_sync::DataTypeManagerImpl::NotifyDone(browser_sync::DataTypeManager::ConfigureResult result=ABORTED)    Line 384 + 0x33 bytes	C++   	chrome.dll!browser_sync::DataTypeManagerImpl::FinishStopAndNotify(browser_sync::DataTypeManager::ConfigureResult   result=ABORTED)  Line 323	C++   	chrome.dll!browser_sync::DataTypeManagerImpl::Stop()  Line 299	C++   	chrome.dll!ProfileSyncService::Shutdown(bool sync_disabled=true)  Line 243 + 0x20 bytes	C++   	chrome.dll!ProfileSyncService::DisableForUser()  Line 282	C++   	chrome.dll!ContentPageView::OnConfirmMessageAccept()  Line 444 + 0x1d bytes	C++   	chrome.dll!ConfirmMessageBoxDialog::Accept()  Line 86 + 0x1c bytes	C++   	chrome.dll!views::DialogDelegate::Accept(bool window_closing=false)  Line 103 + 0x1e bytes	C++   	chrome.dll!views::DialogClientView::AcceptWindow()  Line 230 + 0x25 bytes	C++   	chrome.dll!views::DialogClientView::ButtonPressed(views::Button * sender=0x06c54640  const views::Event &amp; event={...})  Line   406 + 0xe bytes	C++   	chrome.dll!views::Button::NotifyClick(const views::Event &amp; event={...})  Line 62 + 0x24 bytes	C++   	chrome.dll!views::NativeButton::ButtonPressed()  Line 124 + 0x16 bytes	C++   	chrome.dll!views::NativeButtonWin::ProcessMessage(unsigned int message=273  unsigned int w_param=0  long l_param=2819276    long * result=0x0036dcac)  Line 103	C++   	chrome.dll!views::ProcessNativeControlMessage(unsigned int message=273  unsigned int w_param=0  long l_param=2819276  long *   l_result=0x0036dcac)  Line 1181 + 0x22 bytes	C++   	chrome.dll!views::WidgetWin::OnWndProc(unsigned int message=273  unsigned int w_param=0  long l_param=2819276)  Line 1194 +   0x15 bytes	C++   	chrome.dll!app::WindowImpl::WndProc(HWND__ * hwnd=0x001e04e0  unsigned int message=273  unsigned int w_param=0  long   l_param=2819276)  Line 185 + 0x1b bytes	C++   	user32.dll!_InternalCallWinProc@20()  + 0x23 bytes	   	user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes	   	user32.dll!_SendMessageWorker@24()  + 0x117 bytes	   	user32.dll!_SendMessageW@16()  + 0x4c bytes	   	comctl32.dll!Button_NotifyParent()  + 0x3f bytes	   	comctl32.dll!Button_ReleaseCapture()  + 0x1800 bytes	   	comctl32.dll!Button_WndProc()  - 0x1d54a bytes	   	user32.dll!_InternalCallWinProc@20()  + 0x23 bytes	   	user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes	   	user32.dll!_CallWindowProcAorW@24()  + 0x5e bytes	   	user32.dll!_CallWindowProcW@20()  + 0x1b bytes	   	chrome.dll!views::NativeControlWin::NativeControlWndProc(HWND__ * window=0x002b04cc  unsigned int message=514  unsigned int   w_param=0  long l_param=1376288)  Line 198 + 0x22 bytes	C++   	user32.dll!_InternalCallWinProc@20()  + 0x23 bytes	   	user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes	   	user32.dll!_DispatchMessageWorker@8()  + 0xee bytes	   	user32.dll!_DispatchMessageW@4()  + 0xf bytes	   	chrome.dll!views::AcceleratorHandler::Dispatch(const tagMSG &amp; msg={...})  Line 57 + 0xc bytes	C++   	chrome.dll!base::MessagePumpForUI::ProcessMessageHelper(const tagMSG &amp; msg={...})  Line 360 + 0x21 bytes	C++   	chrome.dll!base::MessagePumpForUI::ProcessNextWindowsMessage()  Line 336 + 0xc bytes	C++   	chrome.dll!base::MessagePumpForUI::DoRunLoop()  Line 205 + 0x8 bytes	C++   	chrome.dll!base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate * delegate=0x0036ef9c    base::MessagePumpWin::Dispatcher * dispatcher=0x0036e4ac)  Line 52 + 0xf bytes	C++   	chrome.dll!MessageLoop::RunInternal()  Line 201	C++   	chrome.dll!MessageLoop::RunHandler()  Line 178	C++   	chrome.dll!MessageLoopForUI::Run(base::MessagePumpWin::Dispatcher * dispatcher=0x0036e4ac)  Line 613	C++   	chrome.dll!`anonymous namespace'::RunUIMessageLoop(BrowserProcess * browser_process=0x0054c000)  Line 183	C++   	chrome.dll!BrowserMain(const MainFunctionParams &amp; parameters={...})  Line 1167 + 0x11 bytes	C++   	chrome.dll!ChromeMain(HINSTANCE__ * instance=0x00c00000  sandbox::SandboxInterfaceInfo * sandbox_info=0x0036f8c4  wchar_t *   command_line=0x00632e3c)  Line 814 + 0xc bytes	C++   	chrome.exe!MainDllLoader::Launch(HINSTANCE__ * instance=0x00c00000  sandbox::SandboxInterfaceInfo * sbox_info=0x0036f8c4)    Line 195 + 0x1d bytes	C++   	chrome.exe!wWinMain(HINSTANCE__ * instance=0x00c00000  HINSTANCE__ * __formal=0x00000000  HINSTANCE__ * __formal=0x00000000    HINSTANCE__ * __formal=0x00000000)  Line 46 + 0x10 bytes	C++   	chrome.exe!__tmainCRTStartup()  Line 263 + 0x2c bytes	C   	chrome.exe!wWinMainCRTStartup()  Line 182	C   	kernel32.dll!@BaseThreadInitThunk@12()  + 0xe bytes	   	ntdll.dll!___RtlUserThreadStart@8()  + 0x23 bytes	   	ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes	   </pre>