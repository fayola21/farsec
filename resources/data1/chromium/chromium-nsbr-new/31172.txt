<title>Issue 31172 -   chromium -    Bad interaction between task manager and extension code - Project Hosting on Google Code</title> <pre> Chrome Version       : ToT @ <a href="/p/chromium/source/detail?r=35277">r35277</a> + a tiny patch  10.5.8      1. Enable the task manager menu item (patch in <a href="http://codereview.chromium.org/523003">http://codereview.chromium.org/523003</a> -- it only hooks up the menu   item)  2. Uninstall your extensions  2. Install an extension  e.g. the gmail checker  3. Open &quot;Task Manager&quot; window (View-&gt;Developer-&gt;Task Manager)  4. Click Window-&gt;Extensions        Extensions page should open.        DCHECK:    [91543:2067:1209037134132968:FATAL:/Users/thakis/src/chrome-  git/src/chrome/browser/renderer_host/browser_render_process_host.cc(561)] Check failed: false.   BrowserRenderProcessHost::GetHandle() called early!    Program received signal SIGTRAP  Trace/breakpoint trap.  DebugUtil::BreakDebugger () at /Users/thakis/src/chrome-git/src/base/debug_util_posix.cc:184  [92294:523:1209037200409278:WARNING:/Users/thakis/src/chrome-git/src/app/resource_bundle_mac.mm(33)]   ignoring requested locale in favor of NSBundle's selection  184	}  (gdb) bt  #0  DebugUtil::BreakDebugger () at /Users/thakis/src/chrome-git/src/base/debug_util_posix.cc:184  #1  0x073a791e in logging::LogMessage::~LogMessage (this=0xbfffb780) at /Users/thakis/src/chrome-  git/src/base/logging.cc:562  #2  0x070c7dd9 in BrowserRenderProcessHost::GetHandle (this=0x21845720) at /Users/thakis/src/chrome-  git/src/chrome/browser/renderer_host/browser_render_process_host.cc:561  #3  0x07239d5d in TaskManagerTabContentsResourceProvider::Add (this=0x2175d580  tab_contents=0xa70400) at   /Users/thakis/src/chrome-git/src/chrome/browser/task_manager_resource_providers.cc:244  #4  0x07239f26 in TaskManagerTabContentsResourceProvider::Observe (this=0x2175d580  type={value =   NotificationType::TAB_CONTENTS_SWAPPED}  source=@0xbfffbc98  details=@0xbfffbc94) at /Users/thakis/src/chrome-  git/src/chrome/browser/task_manager_resource_providers.cc:293  #5  0x06c9a369 in NotificationService::Notify (this=0x824200  type={value =   NotificationType::TAB_CONTENTS_SWAPPED}  source=@0xbfffbc98  details=@0xbfffbc94) at /Users/thakis/src/chrome-  git/src/chrome/common/notification_service.cc:112  #6  0x0720c8b5 in TabContents::NotifySwapped (this=0xa70400) at /Users/thakis/src/chrome-  git/src/chrome/browser/tab_contents/tab_contents.cc:1534  #7  0x07218195 in TabContents::NotifySwappedFromRenderManager (this=0xa70400) at tab_contents.h:951  #8  0x07209313 in RenderViewHostManager::CommitPending (this=0xa704a4) at /Users/thakis/src/chrome-  git/src/chrome/browser/tab_contents/render_view_host_manager.cc:485  #9  0x07209dae in RenderViewHostManager::UpdateRendererStateForNavigate (this=0xa704a4  entry=@0x20c7bc60) at   /Users/thakis/src/chrome-git/src/chrome/browser/tab_contents/render_view_host_manager.cc:537  #10 0x0720a198 in RenderViewHostManager::Navigate (this=0xa704a4  entry=@0x20c7bc60) at   /Users/thakis/src/chrome-git/src/chrome/browser/tab_contents/render_view_host_manager.cc:67  #11 0x07212a99 in TabContents::NavigateToPendingEntry (this=0xa70400  reload=false) at /Users/thakis/src/chrome-  git/src/chrome/browser/tab_contents/tab_contents.cc:663  #12 0x071fb841 in NavigationController::NavigateToPendingEntry (this=0xa70430  reload=false) at   /Users/thakis/src/chrome-git/src/chrome/browser/tab_contents/navigation_controller.cc:927  #13 0x071fc3ad in NavigationController::LoadEntry (this=0xa70430  entry=0x20c7bc60) at /Users/thakis/src/chrome-  git/src/chrome/browser/tab_contents/navigation_controller.cc:218  #14 0x071fc3f2 in NavigationController::LoadURL (this=0xa70430  url=@0xbfffc458  referrer=@0xbfffc520    transition=2) at /Users/thakis/src/chrome-git/src/chrome/browser/tab_contents/navigation_controller.cc:409  #15 0x06d6793e in Browser::CreateTabContentsForURL (this=0x15f950  url=@0xbfffc458  referrer=@0xbfffc520    profile=0x140b80  transition=2  defer_load=false  instance=0x0) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser.cc:1700  #16 0x06d6ce2c in Browser::AddTabWithURL (this=0x15f950  url=@0xbfffc590  referrer=@0xbfffc520  transition=2    foreground=true  index=-1  force_index=false  instance=0x0) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser.cc:598  #17 0x06d6d1e6 in Browser::ShowSingleDOMUITab (this=0x15f950  url=@0xbfffc590) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser.cc:704  #18 0x06d6d266 in Browser::ShowExtensionsTab (this=0x15f950) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser.cc:1284  #19 0x06d6ef18 in Browser::ExecuteCommandWithDisposition (this=0x15f950  id=40023  disposition=CURRENT_TAB)   at /Users/thakis/src/chrome-git/src/chrome/browser/browser.cc:1580  #20 0x06d6f034 in Browser::ExecuteCommand (this=0x15f950  id=40023) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser.cc:1630  #21 0x06ded406 in -[BrowserWindowController commandDispatch:] (self=0x161a40  _cmd=0x88a83a8    sender=0x13afa0) at /Users/thakis/src/chrome-git/src/chrome/browser/cocoa/browser_window_controller.mm:856  #22 0x925cee8f in -[NSApplication sendAction:to:from:] ()  #23 0x06db76a5 in -[BrowserCrApplication sendAction:to:from:] (self=0x129a70  _cmd=0x964d1c48    anAction=0x88a83a8  aTarget=0x0  sender=0x13afa0) at /Users/thakis/src/chrome-  git/src/chrome/browser/chrome_browser_application_mac.mm:264  #24 0x9267db64 in -[NSMenu performActionForItemAtIndex:] ()  #25 0x9267d869 in -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] ()  #26 0x9265a4ba in AppKitMenuEventHandler ()  #27 0x9036213d in DispatchEventToHandlers ()  #28 0x9036157b in SendEventToEventTargetInternal ()  #29 0x9037decc in SendEventToEventTarget ()  #30 0x903b21e7 in SendHICommandEvent ()  #31 0x903d8959 in SendMenuCommandWithContextAndModifiers ()  #32 0x903d8914 in SendMenuItemSelectedEvent ()  #33 0x903d882a in FinishMenuSelection ()  #34 0x903b5494 in MenuSelectCore ()  #35 0x903b4e7f in _HandleMenuSelection2 ()  #36 0x903b4cf3 in _HandleMenuSelection ()  #37 0x92596e67 in _NSHandleCarbonMenuEvent ()  #38 0x924fdbc2 in _DPSNextEvent ()  #39 0x924fcf88 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()  #40 0x924f5f9f in -[NSApplication run] ()  #41 0x07373e6c in base::MessagePumpNSApplication::DoRun (this=0x13a8d0  delegate=0xbfffddc8) at   /Users/thakis/src/chrome-git/src/base/message_pump_mac.mm:677  #42 0x0737445b in base::MessagePumpCFRunLoopBase::Run (this=0x13a8d0  delegate=0xbfffddc8) at   /Users/thakis/src/chrome-git/src/base/message_pump_mac.mm:213  #43 0x073ab9d2 in MessageLoop::RunInternal (this=0xbfffddc8) at /Users/thakis/src/chrome-  git/src/base/message_loop.cc:205  #44 0x073ab9ed in MessageLoop::RunHandler (this=0xbfffddc8) at /Users/thakis/src/chrome-  git/src/base/message_loop.cc:177  #45 0x073aba51 in MessageLoop::Run (this=0xbfffddc8) at /Users/thakis/src/chrome-  git/src/base/message_loop.cc:155  #46 0x06d837fb in (anonymous namespace)::RunUIMessageLoop (browser_process=0x144d40) at   /Users/thakis/src/chrome-git/src/chrome/browser/browser_main.cc:163  #47 0x06d858de in BrowserMain (parameters=@0xbfffea74) at /Users/thakis/src/chrome-  git/src/chrome/browser/browser_main.cc:917  #48 0x06c09fda in ChromeMain (argc=1  argv=0xbffff2e8) at /Users/thakis/src/chrome-  git/src/chrome/app/chrome_dll_main.cc:744  #49 0x00001ffe in main (argc=1  argv=0xbffff2e8) at /Users/thakis/src/chrome-  git/src/chrome/app/chrome_exe_main.mm:17  #50 0x00001fba in start ()  Current language:  auto; currently c++      For some reason  this seems to happen only on OS X  though the DCHECK is deep in cross-platform code. </pre>