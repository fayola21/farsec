<title>Issue 42287 -   chromium -    Mac valgrind history backend valgrind errors after autocomplete revert. - Project Hosting on Google Code</title> <pre> <a href="http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20UI%20(valgrind)(3)/builds/2764/steps/valgrind%20test:%20ui/logs/stdio">http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20UI%20(valgrind)(3)/builds/2764/steps/valgrind%20test:%20ui/logs/stdio</a>    Introduced a number of valgrind leaks like the following.  Often these come from flakey tests  circle back and see if it's a continued problem.    19:21:02 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-mac-valgrind-ui-3/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium --no-first-run --no-default-browser-check --test-  type=ui --enable-file-cookies --dom-automation --testing-channel=ChromeTestingInterface:63367.27 --noerrdialogs --homepage=about:blank --disable-web-resources --user-  data-dir=/private/var/folders/pA/pAFAklSwHlKv-nkZRJzCU++++TM/-Tmp-/org.chromium.QrWaAw/test_user_data --metrics-recording-only --enable-logging --test-  name=DromaeoTest.JSLibPerf --allow-file-access-from-files  208 bytes in 1 blocks are definitely lost in loss record 9 846 of 11 082    malloc (mp/vg-bins/scripts/valgrind-memcheck/coregrind/m_replacemalloc/vg_replace_malloc.c:236)    sqlite3MemMalloc (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/mem1.c:43)    mallocWithAlarm (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/malloc.c:251)    sqlite3Malloc (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/malloc.c:279)    sqlite3DbMallocRaw (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/malloc.c:587)    sqlite3DbMallocZero (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/malloc.c:538)    sqlite3VdbeCreate (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/vdbeaux.c:39)    sqlite3GetVdbe (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/select.c:1288)    sqlite3CommitTransaction (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/build.c:3334)    yy_reduce (parse.y:128)    sqlite3Parser (parse.c:3691)    sqlite3RunParser (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/tokenize.c:471)    sqlite3Prepare (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/prepare.c:612)    sqlite3LockAndPrepare (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/prepare.c:710)    sqlite3_prepare_v2 (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/third_party/sqlite/src/prepare.c:785)    sql::Connection::GetUniqueStatement(char const*) (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/app/sql/connection.cc:199)    sql::Connection::GetCachedStatement(sql::StatementID const&amp;  char const*) (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/app/sql/connection.cc:187)    sql::Connection::CommitTransaction() (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/app/sql/connection.cc:157)    sql::Transaction::Commit() (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/app/sql/transaction.cc:48)    history::ArchivedDatabase::Init(FilePath const&amp;) (archived_database.cc:72)    history::HistoryBackend::InitImpl() (history_backend.cc:578)    history::HistoryBackend::Init(bool) (history_backend.cc:222)    void DispatchToMethod&lt;history::HistoryBackend  void (history::HistoryBackend::*)(bool)  bool&gt;(history::HistoryBackend*  void (history::HistoryBackend::*)(bool)    Tuple1&lt;bool&gt; const&amp;) (tuple.h:422)    RunnableMethod&lt;history::HistoryBackend  void (history::HistoryBackend::*)(bool)  Tuple1&lt;bool&gt; &gt;::Run() (task.h:296)    MessageLoop::RunTask(Task*) (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_loop.cc:328)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_loop.cc:336)    MessageLoop::DoWork() (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_loop.cc:443)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*) (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_pump_default.cc:23)    MessageLoop::RunInternal() (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_loop.cc:204)    MessageLoop::RunHandler() (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/message_loop.cc:176)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:malloc     fun:sqlite3MemMalloc     fun:mallocWithAlarm     fun:sqlite3Malloc     fun:sqlite3DbMallocRaw     fun:sqlite3DbMallocZero     fun:sqlite3VdbeCreate     fun:sqlite3GetVdbe     fun:sqlite3CommitTransaction     fun:yy_reduce     fun:sqlite3Parser     fun:sqlite3RunParser     fun:sqlite3Prepare     fun:sqlite3LockAndPrepare     fun:sqlite3_prepare_v2     fun:_ZN3sql10Connection18GetUniqueStatementEPKc     fun:_ZN3sql10Connection18GetCachedStatementERKNS_11StatementIDEPKc     fun:_ZN3sql10Connection17CommitTransactionEv     fun:_ZN3sql11Transaction6CommitEv     fun:_ZN7history16ArchivedDatabase4InitERK8FilePath     fun:_ZN7history14HistoryBackend8InitImplEv     fun:_ZN7history14HistoryBackend4InitEb  }   </pre>