<title>Issue 23314 -   chromium -    Invalid read in sqlite3PcacheClearSyncFlags - Project Hosting on Google Code</title> <pre> spotted here at <a href="/p/chromium/source/detail?r=27446">r27446</a>:  <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20UI%20(valgrind)(1)/builds/68/steps/valgrind%20test%3A%20ui/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20UI%20(valgrind)(1)/builds/68/steps/valgrind%20test%3A%20ui/logs/stdio</a>    20:02:59 memcheck_analyze.py [ERROR] InvalidRead  Command:  /b/slave/chromium-rel-mac-valgrind-ui-1/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium  --no-first-run --no-default-browser-check --enable-file-cookies  --dom-automation --testing-channel=ChromeTestingInterface:80118.22  --homepage=about:blank --disable-web-resources  --user-data-dir=/var/folders/yo/yotGBOBoH+ijr5HR-DAtvk+++TM/-Tmp-/org.chromium.CYsTzS/test_user_data  --metrics-recording-only --enable-logging  --test-name=AutomationProxyTest4.StringValueIsEchoedByDomAutomationController  Invalid read of size 2    sqlite3PcacheClearSyncFlags  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pcache.c:374)    syncJournal  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pager.c:2810)    sqlite3PagerCommitPhaseOne  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pager.c:4701)    sqlite3BtreeCommitPhaseOne  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/btree.c:2963)    vdbeCommit  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeaux.c:1645)    sqlite3VdbeHalt  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeaux.c:2019)    sqlite3VdbeExec  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbe.c:2638)    sqlite3Step  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeapi.c:344)    sqlite3_step  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeapi.c:403)    sqlite3_exec  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/legacy.c:71)    SQLTransaction::EndCommand(char const*)  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/chrome/common/sqlite_utils.cc:182)    SQLTransaction::Commit() (sqlite_utils.h:86)    history::ThumbnailDatabase::Init(FilePath const&amp;   history::HistoryPublisher const*) (thumbnail_database.cc:100)    history::HistoryBackend::InitImpl() (history_backend.cc:551)    history::HistoryBackend::Init() (history_backend.cc:214)    void DispatchToMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()&gt;(history::HistoryBackend*  void  (history::HistoryBackend::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()  Tuple0&gt;::Run() (task.h:256)    MessageLoop::RunTask(Task*) (message_loop.cc:314)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (message_loop.cc:322)    MessageLoop::DoWork() (message_loop.cc:429)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  (message_pump_default.cc:23)    MessageLoop::RunInternal() (message_loop.cc:199)    MessageLoop::RunHandler() (message_loop.cc:181)    MessageLoop::Run() (message_loop.cc:155)    (anonymous namespace)::ChromeHistoryThread::Run(MessageLoop*) (history.cc:80)    base::Thread::ThreadMain() (thread.cc:153)    ThreadFunc(void*)  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/base/platform_thread_posix.cc:26)    _pthread_start    thread_start  Address 0x142aa04c is 28 bytes inside a block of size 4 240 alloc'd    malloc  (sers/chrome-bot/valgrind-10880/coregrind/m_replacemalloc/vg_replace_malloc.c:195)    sqlite3MemMalloc  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/mem1.c:43)    mallocWithAlarm  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/malloc.c:251)    sqlite3Malloc  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/malloc.c:279)    pcache1Alloc  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pcache1.c:172)    pcache1AllocPage  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pcache1.c:206)    pcache1Fetch  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pcache1.c:575)    sqlite3PcacheFetch  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pcache.c:231)    sqlite3PagerAcquire2  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pager.c:3835)    sqlite3PagerAcquire  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/pager.c:3802)    btreeGetPage  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/btree.c:1516)    allocateBtreePage  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/btree.c:4817)    btreeCreateTable  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/btree.c:6813)    sqlite3BtreeCreateTable  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/btree.c:6826)    sqlite3VdbeExec  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbe.c:4408)    sqlite3Step  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeapi.c:344)    sqlite3_step  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/vdbeapi.c:403)    sqlite3_exec  (/b/slave/chromium-rel-mac-valgrind-ui-1/build/src/third_party/sqlite/src/legacy.c:71)    MetaTableHelper::Init(std::basic_string&lt;char  std::char_traits&lt;char&gt;   std::allocator&lt;char&gt; &gt; const&amp;  int  int  sqlite3*) (meta_table_helper.cc:55)    history::ThumbnailDatabase::Init(FilePath const&amp;   history::HistoryPublisher const*) (thumbnail_database.cc:73)    history::HistoryBackend::InitImpl() (history_backend.cc:551)    history::HistoryBackend::Init() (history_backend.cc:214)    void DispatchToMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()&gt;(history::HistoryBackend*  void  (history::HistoryBackend::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()  Tuple0&gt;::Run() (task.h:256)    MessageLoop::RunTask(Task*) (message_loop.cc:314)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (message_loop.cc:322)    MessageLoop::DoWork() (message_loop.cc:429)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  (message_pump_default.cc:23)    MessageLoop::RunInternal() (message_loop.cc:199)    MessageLoop::RunHandler() (message_loop.cc:181)   </pre>