<title>Issue 29069 -   chromium -    Valgrind leak in UserScriptMaster - Project Hosting on Google Code</title> <pre> <a href="http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valgrind)(4)/builds/2">http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valgrind)(4)/builds/2</a>  068/steps/valgrind%20test:%20ui/logs/stdio    07:55:03 memcheck_analyze.py [ERROR] FAIL! There were 2 errors:  07:55:03 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-linux-valgrind-tests-  4/build/src/sconsbuild/Release/chrome --no-first-run --no-default-browser-check --  enable-file-cookies --homepage=about:blank --disable-web-resources --user-data-  dir=/tmp/org.chromium.wFUoHY/test_user_data --metrics-recording-only --enable-logging -  -test-name=ChromeMainTest.ReuseBrowserInstanceWhenOpeningFile /b/slave/chromium-rel-  linux-valgrind-tests-4/build/src/chrome/test/data/empty.html  12 bytes in 1 blocks are definitely lost in loss record 259 of 1 002    operator new(unsigned int) (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:214)    UserScriptMaster::StartScan()   (uilder/build/src/chrome/browser/extensions/user_script_master.cc:402)    UserScriptMaster::Observe(NotificationType  NotificationSource const&amp;  NotificationDetails   const&amp;) (uilder/build/src/chrome/browser/extensions/user_script_master.cc:357)    NotificationService::Notify(NotificationType  NotificationSource const&amp;  NotificationDetails   const&amp;) (uilder/build/src/chrome/common/notification_service.cc:112)    ExtensionsService::OnLoadedInstalledExtensions()   (uilder/build/src/chrome/browser/extensions/extensions_service.cc:538)    ExtensionsService::LoadAllExtensions()   (uilder/build/src/chrome/browser/extensions/extensions_service.cc:303)    ExtensionsService::Init()   (uilder/build/src/chrome/browser/extensions/extensions_service.cc:145)    ProfileImpl::InitExtensions() (uilder/build/src/chrome/browser/profile.cc:646)    ProfileManager::AddProfile(Profile*) (uilder/build/src/chrome/browser/profile_manager.cc:136)    ProfileManager::AddProfileByPath(FilePath const&amp;)   (uilder/build/src/chrome/browser/profile_manager.cc:116)    ProfileManager::GetProfile(FilePath const&amp;)   (uilder/build/src/chrome/browser/profile_manager.cc:102)    ProfileManager::GetDefaultProfile(FilePath const&amp;)   (uilder/build/src/chrome/browser/profile_manager.cc:83)    BrowserMain(MainFunctionParams const&amp;)   (uilder/build/src/chrome/browser/browser_main.cc:618)    ChromeMain (uilder/build/src/chrome/app/chrome_dll_main.cc:643)    main (uilder/build/src/chrome/app/chrome_exe_main_gtk.cc:52)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN16UserScriptMaster9StartScanEv       fun:_ZN16UserScriptMaster7ObserveE16NotificationTypeRK18NotificationSourceRK19Notification  Details       fun:_ZN19NotificationService6NotifyE16NotificationTypeRK18NotificationSourceRK19Notification  Details     fun:_ZN17ExtensionsService27OnLoadedInstalledExtensionsEv     fun:_ZN17ExtensionsService17LoadAllExtensionsEv     fun:_ZN17ExtensionsService4InitEv     fun:_ZN11ProfileImpl14InitExtensionsEv     fun:_ZN14ProfileManager10AddProfileEP7Profile     fun:_ZN14ProfileManager16AddProfileByPathERK8FilePath     fun:_ZN14ProfileManager10GetProfileERK8FilePath     fun:_ZN14ProfileManager17GetDefaultProfileERK8FilePath     fun:_Z11BrowserMainRK18MainFunctionParams     fun:ChromeMain     fun:main  }      07:55:03 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-linux-valgrind-tests-  4/build/src/sconsbuild/Release/chrome --no-first-run --no-default-browser-check --  enable-file-cookies --homepage=about:blank --disable-web-resources --user-data-  dir=/tmp/org.chromium.wFUoHY/test_user_data --metrics-recording-only --enable-logging -  -test-name=ChromeMainTest.ReuseBrowserInstanceWhenOpeningFile /b/slave/chromium-rel-  linux-valgrind-tests-4/build/src/chrome/test/data/empty.html  24 bytes in 1 blocks are definitely lost in loss record 586 of 1 002    operator new(unsigned int) (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:214)    Serialize(std::vector&lt;UserScript  std::allocator&lt;UserScript&gt; &gt; const&amp;)   (uilder/build/src/chrome/browser/extensions/user_script_master.cc:239)    UserScriptMaster::ScriptReloader::RunScan(FilePath  std::vector&lt;UserScript    std::allocator&lt;UserScript&gt; &gt;)   (uilder/build/src/chrome/browser/extensions/user_script_master.cc:278)    void DispatchToMethod&lt;UserScriptMaster::ScriptReloader  void   (UserScriptMaster::ScriptReloader::*)(FilePath  std::vector&lt;UserScript  std::allocator&lt;UserScript&gt;   &gt;)  FilePath  std::vector&lt;UserScript  std::allocator&lt;UserScript&gt; &gt;   &gt;(UserScriptMaster::ScriptReloader*  void (UserScriptMaster::ScriptReloader::*)(FilePath    std::vector&lt;UserScript  std::allocator&lt;UserScript&gt; &gt;)  Tuple2&lt;FilePath  std::vector&lt;UserScript    std::allocator&lt;UserScript&gt; &gt; &gt; const&amp;) (uilder/build/src/base/tuple.h:429)    RunnableMethod&lt;UserScriptMaster::ScriptReloader  void   (UserScriptMaster::ScriptReloader::*)(FilePath  std::vector&lt;UserScript  std::allocator&lt;UserScript&gt;   &gt;)  Tuple2&lt;FilePath  std::vector&lt;UserScript  std::allocator&lt;UserScript&gt; &gt; &gt; &gt;::Run()   (uilder/build/src/base/task.h:284)    MessageLoop::RunTask(Task*) (uilder/build/src/base/message_loop.cc:320)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)   (uilder/build/src/base/message_loop.cc:328)    MessageLoop::DoWork() (uilder/build/src/base/message_loop.cc:435)    base::MessagePumpLibevent::Run(base::MessagePump::Delegate*)   (uilder/build/src/base/message_pump_libevent.cc:237)    MessageLoop::RunInternal() (uilder/build/src/base/message_loop.cc:205)    MessageLoop::RunHandler() (uilder/build/src/base/message_loop.cc:177)    MessageLoop::Run() (uilder/build/src/base/message_loop.cc:155)    base::Thread::Run(MessageLoop*) (uilder/build/src/base/thread.cc:133)    base::Thread::ThreadMain() (uilder/build/src/base/thread.cc:155)    ThreadFunc(void*) (uilder/build/src/base/platform_thread_posix.cc:26)    start_thread (/lib/tls/i686/cmov/libpthread-2.7.so)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_Z9SerializeRKSt6vectorI10UserScriptSaIS0_EE     fun:_ZN16UserScriptMaster14ScriptReloader7RunScanE8FilePathSt6vectorI10UserScriptSaIS3_EE       fun:_Z16DispatchToMethodIN16UserScriptMaster14ScriptReloaderEMS1_Fv8FilePathSt6vectorI10  UserScriptSaIS4_EEES2_S6_EvPT_T0_RK6Tuple2IT1_T2_E       fun:_ZN14RunnableMethodIN16UserScriptMaster14ScriptReloaderEMS1_Fv8FilePathSt6vectorI10U  serScriptSaIS4_EEE6Tuple2IS2_S6_EE3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base19MessagePumpLibevent3RunEPNS_11MessagePump8DelegateE     fun:_ZN11MessageLoop11RunInternalEv     fun:_ZN11MessageLoop10RunHandlerEv  }   </pre>