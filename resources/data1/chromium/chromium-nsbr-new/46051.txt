<title>Issue 46051 -   chromium -    ap key is not created and appended with -full when diff installer fails - Project Hosting on Google Code</title> <pre>   1. Install CF375.49  2. Go to C:Program FilesGoogleChrome FrameApplication5.0.375.49Installer and rename chrome_frame.7z  3. Now run the updater 375.62_from_375.49    What is the expected output?   ap should get created with value '-full' @ HKEY_LOCAL_MACHINESOFTWAREGoogleUpdateClientState{8BA986DA-5100-405E-AA35-86F34A02ACBF}    What do you see instead?  Nothing is written in registry.     Also  when ap is created manually without any value  and running the updater deletes ap from registry.    Log  ---  [0607/174005:INFO:setup_main.cc(614)] Command Line: &quot;C:Documents and Settingssunandt.GOOGLELocal SettingsTempCR_1C1.tmpsetup.exe&quot; --install-archive=&quot;C:Documents and Settingssunandt.GOOGLELocal SettingsTempCR_1C1.tmpCHROME_PATCH.PACKED.7Z&quot; --system-level --chrome-frame --verbose-logging  [0607/174005:INFO:setup_main.cc(619)] system install is 1  [0607/174005:INFO:install_util.cc(86)] Windows Version: 2  Service Pack: 3.0  [0607/174005:INFO:install_util.cc(76)] Existing Chrome version found 5.0.375.49  [0607/174005:INFO:setup_main.cc(687)] version on the system: 5.0.375.49  [0607/174005:INFO:install_util.cc(71)] No existing Chrome install found.  [0607/174005:INFO:setup_main.cc(246)] Archive found to install Chrome C:Documents and Settingssunandt.GOOGLELocal SettingsTempCR_1C1.tmpCHROME_PATCH.PACKED.7Z  [0607/174005:INFO:setup_main.cc(259)] created path C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339  [0607/174005:INFO:lzma_util.cc(83)] Opening archive C:Documents and Settingssunandt.GOOGLELocal SettingsTempCR_1C1.tmpCHROME_PATCH.PACKED.7Z  [0607/174005:INFO:lzma_util.cc(90)] Uncompressing archive to path C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339  [0607/174007:INFO:setup_main.cc(81)] Differential patch found. Applying to existing archive.  [0607/174007:INFO:setup_util.cc(19)] Applying patch C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339chrome_patch.diff to file C:Program FilesGoogleChrome FrameApplication5.0.375.49Installerchrome_frame.7z and generating file C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339chrome_frame.7z  [0607/174007:INFO:setup_util.cc(30)] Failed to apply patch C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339chrome_patch.diff using courgette.  [0607/174007:ERROR:setup_main.cc(95)] Binary patching failed with error 6  [0607/174007:INFO:create_reg_key_work_item.cc(47)] Software exists  [0607/174007:INFO:create_reg_key_work_item.cc(47)] SoftwareGoogle exists  [0607/174007:INFO:create_reg_key_work_item.cc(47)] SoftwareGoogleUpdate exists  [0607/174007:INFO:create_reg_key_work_item.cc(47)] SoftwareGoogleUpdateClientState exists  [0607/174007:INFO:create_reg_key_work_item.cc(47)] SoftwareGoogleUpdateClientState{8BA986DA-5100-405E-AA35-86F34A02ACBF} exists  [0607/174007:INFO:set_reg_value_work_item.cc(77)] overwritten value for InstallerResult  [0607/174007:INFO:set_reg_value_work_item.cc(77)] overwritten value for InstallerError  [0607/174007:INFO:set_reg_value_work_item.cc(77)] overwritten value for InstallerResultUIString  [0607/174007:INFO:work_item_list.cc(39)] list execution succeeded  [0607/174007:INFO:setup_main.cc(368)] Deleting temporary directory C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339  [0607/174008:ERROR:delete_tree_work_item.cc(47)] can not delete C:DOCUME~1SUNAND~1.GOOLOCALS~1Tempchrome_27339 OR copy it to backup path C:DOCUME~1SUNAND~1.GOOLOCALS~1Temp27346chrome_27339  [0607/174008:ERROR:work_item_list.cc(32)] list execution failed  [0607/174008:INFO:setup_main.cc(733)] Installation complete  returning: 0       </pre>