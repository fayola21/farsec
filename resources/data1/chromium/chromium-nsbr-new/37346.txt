<title>Issue 37346 -   chromium -    dl.google.com appears to not support http pipelining  making apt hang for two minutes (or fail sometimes?) - Project Hosting on Google Code</title> <pre>   1. Install on ubuntu jaunty (so that the dl.google.com apt sources get added).  2. Run sudo apt-get update    What is the expected output?     Should update quickly if no package lists have changed.    What do you see instead?    a) Hangs for two minutes on dl.google.com [Waiting for headers] then finishes   successfully.      I tcpdumped it and viewed with wireshark and while it's been a while  since I've read the http specs  it seems like the problem is apt is  trying to use HTTP pipelining and dl.google.com isn't liking it.  That  could explain why people trying with curl showed no problems  it  probably doesn't use pipelining.    The first request (frame 4) has two GETs:    GET /linux/deb/dists/stable/Release.gpg HTTP/1.1  Host: dl.google.com  Connection: keep-alive  User-Agent: Ubuntu APT-HTTP/1.3 (0.7.23.1ubuntu2)    GET /linux/deb/dists/stable/main/i18n/Translation-en_US.bz2 HTTP/1.1  Host: dl.google.com  Connection: keep-alive  User-Agent: Ubuntu APT-HTTP/1.3 (0.7.23.1ubuntu2)    The dl.google.com returns the first result (frames 6 and 8) and then  nothing.  After 120 seconds  apt gives up and does the rest of the  GETs without pipelining.  Attached the dump in case anyone else wants  to look.      I put my dump under http://www/~mattm/no_crawl/chrome/dl.google.com/ if someone wants   to look.      b) Sometimes instead of eventually succeeding apt fails and returns an error  though I   haven't seen that recently and haven't gotten a packet dump in that case to be sure   it's the same issue.        Several people on internal mailing list have mentioned seeing this  and my brother   mentioned it to me too. </pre>