<title>Issue 32157 -   chromium -    LayoutTest flaky crash: storage/multiple-databases-garbage-collection.html - Project Hosting on Google Code</title> <pre> test became flaky with webkit roll 53164:53171    stack trace:    ASSERTION FAILED: currentThread() == m_openingThread  (/b/slave/webkit-dbg-linux-  builder/build/src/third_party/WebKit/WebCore/platform/sql/SQLiteDatabase.h:  100 sqlite3* WebCore::SQLiteDatabase::sqlite3Handle() const)  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN10StackTraceC1Ev+0x20)[0x80f2298  ]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x80bc9cb]  [0x4001c420]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore15SQLiteStatement7prepar  eEv+0xb2)[0x8f04a54]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore15SQLiteStatement14execu  teCommandEv+0x1b)[0x8f057a3]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore14SQLiteDatabase14execut  eCommandERKNS_6StringE+0x2b)[0x8f033b5]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore17SQLiteTransaction8roll  backEv+0x81)[0x8f064db]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore17SQLiteTransactionD1Ev+  0x1c)[0x8f06514]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN3WTF14deleteOwnedPtrIN7WebCore17  SQLiteTransactionEEEvPT_+0x1d)[0x8c757a1]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x8c75843]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore14SQLTransactionD1Ev+0x1  4)[0x8c7499c]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x8c6b705]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore7DOMData11derefObjectENS  _12V8ClassIndex13V8WrapperTypeEPv+0x7b0)[0x8dc8924]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore7DOMData16handleWeakObje  ctIvEEvNS_12DOMDataStore17DOMWrapperMapTypeEN2v810PersistentINS4_6ObjectEEE  PT_+0x13b)[0x8dceea3]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore12DOMDataStore21weakDOMO  bjectCallbackEN2v810PersistentINS1_5ValueEEEPv+0x8f)[0x8dcbe3d]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x82c01b1]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal13GlobalHandles31Pos  tGarbageCollectionProcessingEv+0x59)[0x82bf3a3]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal4Heap24PerformGarbag  eCollectionENS0_15AllocationSpaceENS0_16GarbageCollectorEPNS0_8GCTracerE+0x  f8)[0x82d12ae]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal4Heap14CollectGarbag  eEiNS0_15AllocationSpaceE+0xb7)[0x82d1641]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal4Heap17CollectAllGar  bageEb+0x2c)[0x82d17f8]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal11GCExtension2GCERKN  S_9ArgumentsE+0x16)[0x82a8c16]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x82962c2]  [0x438d618e]  [0x438e8da9]  [0x439b1b43]  [0x439b1848]  [0x438e35b9]  [0x438d9722]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x82a9b3d]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88internal9Execution4CallENS0_  6HandleINS0_10JSFunctionEEENS2_INS0_6ObjectEEEiPPPS5_Pb+0x3d)[0x82aa0f5]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN2v88Function4CallENS_6HandleINS_  6ObjectEEEiPNS1_INS_5ValueEEE+0xf4)[0x827bac6]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore7V8Proxy12callFunctionEN  2v86HandleINS1_8FunctionEEENS2_INS1_6ObjectEEEiPNS2_INS1_5ValueEEE+0x11c)[0  x889e076]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore14invokeCallbackEN2v810P  ersistentINS0_6ObjectEEEiPNS0_6HandleINS0_5ValueEEERb+0x1dc)[0x937a9d0]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore20V8CustomVoidCallback11  handleEventEv+0x98)[0x937abee]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore14SQLTransaction22delive  rSuccessCallbackEv+0x6a)[0x8c73038]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore14SQLTransaction22perfor  mPendingCallbackEv+0x1d3)[0x8c7454f]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN7WebCore8Database22deliverPendin  gCallbackEPv+0x17)[0x8c63abb]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN3WTF31dispatchFunctionsFromMainT  hreadEv+0x106)[0x916d0b2]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_Z18DispatchToFunctionIPFvvEEvT_RK6  Tuple0+0xb)[0x85b03a5]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x85b03d0]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop7RunTaskEP4Task+0xc  e)[0x80afcba]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop21DeferOrRunPending  TaskERKNS_11PendingTaskE+0x35)[0x80b036b]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop6DoWorkEv+0xfb)[0x8  0b05fb]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN4base16MessagePumpForUI14HandleD  ispatchEv+0x2c)[0x80e6050]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x80e60a8]  /usr/lib/libglib-2.0.so.0(g_main_context_dispatch+0x176)[0x40675cf6]  /usr/lib/libglib-2.0.so.0[0x406790b3]  /usr/lib/libglib-2.0.so.0(g_main_context_iteration+0x6e)[0x4067966e]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN4base16MessagePumpForUI17RunWith  DispatcherEPNS_11MessagePump8DelegateEPNS0_10DispatcherE+0x147)[0x80e662d]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x80e7029]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop11RunInternalEv+0x1  37)[0x80b0c0f]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop10RunHandlerEv+0x11  )[0x80b0c29]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN11MessageLoop3RunEv+0x23)[0x80b0  ccd]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN9TestShell16WaitTestFinishedEv+0  x103)[0x80670d7]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(_ZN9TestShell11RunFileTestERKNS_10T  estParamsE+0x309)[0x8067415]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(main+0x16ca)[0x8049a2a]  /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe0)[0x40ba4450]  /b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell[0x8048181]   </pre>