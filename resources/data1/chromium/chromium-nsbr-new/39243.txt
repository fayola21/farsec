<title>Issue 39243 -   chromium -    ResourceDispatcherHost is deleting URLRequests from the UI thread during shutdown - Project Hosting on Google Code</title> <pre> We got the following crash in Chrome bot:    <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Reliability/builds/9154/steps/reliability:%20partial%20result%20of%20current%20build/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Reliability/builds/9154/steps/reliability:%20partial%20result%20of%20current%20build/logs/stdio</a>    Stack trace:  WARNING: Frame IP not in any known module. Following frames may be wrong.  0x632f2f3a  chrome_2680000!net::BoundNetLog::EndEvent+0x81 [c:bslavechromium-rel-xpbuildsrcnetbasenet_log.cc @ 92]  chrome_2680000!URLRequest::set_context+0x61 [c:bslavechromium-rel-xpbuildsrcneturl_requesturl_request.cc @ 509]  chrome_2680000!URLRequest::~URLRequest+0x3a [c:bslavechromium-rel-xpbuildsrcneturl_requesturl_request.cc @ 64]  chrome_2680000!ResourceDispatcherHost::ProcessBlockedRequestsForRoute+0xfe [c:bslavechromium-rel-xpbuildsrcchromebrowserrenderer_hostresource_dispatcher_host.cc @ 1727]  chrome_2680000!ResourceDispatcherHost::~ResourceDispatcherHost+0x1ad [c:bslavechromium-rel-xpbuildsrcchromebrowserrenderer_hostresource_dispatcher_host.cc @ 213]  chrome_2680000!ResourceDispatcherHost::`scalar deleting destructor'+0x8  chrome_2680000!BrowserProcessImpl::~BrowserProcessImpl+0x1b7 [c:bslavechromium-rel-xpbuildsrcchromebrowserbrowser_process_impl.cc @ 166]  chrome_2680000!BrowserProcessImpl::`scalar deleting destructor'+0x8  chrome_2680000!browser_shutdown::Shutdown+0x163 [c:bslavechromium-rel-xpbuildsrcchromebrowserbrowser_shutdown.cc @ 136]  chrome_2680000!BrowserMain+0x1c47 [c:bslavechromium-rel-xpbuildsrcchromebrowserbrowser_main.cc @ 1092]  chrome_2680000!ChromeMain+0xb86 [c:bslavechromium-rel-xpbuildsrcchromeappchrome_dll_main.cc @ 807]  chrome!MainDllLoader::Launch+0x15b [c:bslavechromium-rel-xpbuildsrcchromeappclient_util.cc @ 196]  chrome!wWinMain+0x97 [c:bslavechromium-rel-xpbuildsrcchromeappchrome_exe_main.cc @ 49]  chrome!__tmainCRTStartup+0x176 [f:ddvctoolscrt_bldself_x86crtsrccrt0.c @ 324]  kernel32!RegisterWaitForInputIdle+0x49      The problem here is that ResourceDispatcherHost is deleting URLRequests from the UI thread.    URLRequests are supposed to live on the IO thread  and it is invalid to call them from the UI thread.    In particular the reason this results in a crash  is the URLRequest holds a pointer to a NetLog  which is destroyed after the IO thread is stopped.    Sigh  more shutdown problems. </pre>