<title>Issue 38481 -   chromium -    Leaks in AutoFillInfoBarDelegateTest::SetUp() - Project Hosting on Google Code</title> <pre> From: <a href="http://chrome-buildbot.corp.google.com:8014/builders/Linux%20Tests%20(valgrind)(1)/builds/3488/steps/valgrind%20test:%20unit/logs/stdio">http://chrome-buildbot.corp.google.com:8014/builders/Linux%20Tests%20(valgrind)(1)/builds/3488/steps/valgrind%20test:%20unit/logs/stdio</a>    Command: src/sconsbuild/Release/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:URLFetcher  BadHTTPSTest.BadHTTPSTest --gtest_print_time  243 (24 direct  219 indirect) bytes in 1 blocks are definitely lost in loss record 17 658 of 18 718    operator new(unsigned int) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:228)    __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt; &gt;::allocate(unsigned int  void const*)   (sr/include/c++/4.2/ext/new_allocator.h:91)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt; &gt;::_M_get_node()   (sr/include/c++/4.2/bits/stl_tree.h:367)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_create_node(std::pair&lt;int const  WebDataService::WebDataRequest*&gt; const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:376)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*  std::pair&lt;int const  WebDataService::WebDataRequest*&gt; const&amp;)   (sr/include/c++/4.2/bits/stl_tree.h:838)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_insert_unique(std::pair&lt;int const  WebDataService::WebDataRequest*&gt; const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:986)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_insert_unique(std::_Rb_tree_iterator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;  std::pair&lt;int const    WebDataService::WebDataRequest*&gt; const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:1008)    std::map&lt;int  WebDataService::WebDataRequest*  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::insert(std::_Rb_tree_iterator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;   const&amp;) (sr/include/c++/4.2/bits/stl_map.h:427)    std::map&lt;int  WebDataService::WebDataRequest*  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::operator[](int const&amp;) (sr/include/c++/4.2/bits/stl_map.h:350)    WebDataService::RegisterRequest(WebDataService::WebDataRequest*) (uilder/build/src/chrome/browser/webdata/web_data_service.cc:90)    WebDataService::GetAutoFillProfiles(WebDataServiceConsumer*) (uilder/build/src/chrome/browser/webdata/web_data_service.cc:178)    PersonalDataManager::LoadProfiles() (uilder/build/src/chrome/browser/autofill/personal_data_manager.cc:448)    PersonalDataManager::PersonalDataManager(Profile*) (uilder/build/src/chrome/browser/autofill/personal_data_manager.cc:416)    TestingProfile::CreatePersonalDataManager() (uilder/build/src/chrome/test/testing_profile.cc:234)    (anonymous namespace)::AutoFillInfoBarDelegateTest::SetUp()   (uilder/build/src/chrome/browser/autofill/autofill_infobar_delegate_unittest.cc:72)    Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeISt4pairIKiPN14WebDataService14WebDataRequestEEEE8allocateEjPKv     fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE11_M_get_nodeEv     fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE14_M_create_nodeERKS5_       fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE9_M_insertEPSt18_Rb_tree_node_baseSD_RKS5  _     fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE16_M_insert_uniqueERKS5_       fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE16_M_insert_uniqueESt17_Rb_tree_iteratorI  S5_ERKS5_     fun:_ZNSt3mapIiPN14WebDataService14WebDataRequestESt4lessIiESaISt4pairIKiS2_EEE6insertESt17_Rb_tree_iteratorIS7_ERKS7_     fun:_ZNSt3mapIiPN14WebDataService14WebDataRequestESt4lessIiESaISt4pairIKiS2_EEEixERS6_     fun:_ZN14WebDataService15RegisterRequestEPNS_14WebDataRequestE     fun:_ZN14WebDataService19GetAutoFillProfilesEP22WebDataServiceConsumer     fun:_ZN19PersonalDataManager12LoadProfilesEv     fun:_ZN19PersonalDataManagerC1EP7Profile     fun:_ZN14TestingProfile25CreatePersonalDataManagerEv       fun:_ZN145_GLOBAL__N__b_slave_chromium_rel_linux_valgrind_builder_build_src_chrome_browser_autofill_autofill_infobar_delegate_unittest.cc_000000  00_8655CC8827AutoFillInfoBarDelegateTest5SetUpEv  }    19:07:17 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: src/sconsbuild/Release/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:URLFetcher  BadHTTPSTest.BadHTTPSTest --gtest_print_time  1 701 (560 direct  1 141 indirect) bytes in 7 blocks are definitely lost in loss record 18 462 of 18 718    operator new(unsigned int) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:228)    TestingProfile::CreateWebDataService(bool) (uilder/build/src/chrome/test/testing_profile.cc:228)    (anonymous namespace)::AutoFillInfoBarDelegateTest::SetUp()   (uilder/build/src/chrome/browser/autofill/autofill_infobar_delegate_unittest.cc:71)    Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN14TestingProfile20CreateWebDataServiceEb       fun:_ZN145_GLOBAL__N__b_slave_chromium_rel_linux_valgrind_builder_build_src_chrome_browser_autofill_autofill_infobar_delegate_unittest.cc_000000  00_8655CC8827AutoFillInfoBarDelegateTest5SetUpEv  }    From: <a href="http://chrome-buildbot.corp.google.com:8014/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio">http://chrome-buildbot.corp.google.com:8014/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio</a>    18:56:58 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: src/xcodebuild/Debug/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:IPCSyncCha  nnelTest.*:WebDropTargetTest.URL:WebDropTargetTest.Data:AutocompleteTextFieldEditorTest.CutCopyTest:DownloadUtilTest.AddFileToPasteboardTest:Fin  dPasteboardTest.ReadingFromPboardUpdatesFindText:FindPasteboardTest.SendsNotificationWhenTextChanges:RenderViewTest.MacTestCmdUp:ChromeBrowserWi  ndowTest.DoesHideTitle:ClearBrowsingDataControllerTest.*:NSMenuItemAdditionsTest.TestMOnDifferentLayouts:PrefsControllerTest.GetPrefsViewForPage  :PrefsControllerTest.GetToolbarItemForPage:PrefsControllerTest.ShowAndClose:PrefsControllerTest.SwitchToPage:RenderViewTest.OnPrintPages:RenderV  iewTest.Print*:TabStripControllerTest.AddRemoveTabs:TaskManagerWindowControllerTest.* --gtest_print_time  706 (48 direct  658 indirect) bytes in 2 blocks are definitely lost in loss record 15 144 of 15 926    operator new(unsigned long) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:235)    __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt; &gt;::allocate(unsigned long  void const*)   (ext/new_allocator.h:88)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt; &gt;::_M_get_node()   (stl_tree.h:356)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_create_node(std::pair&lt;int const  WebDataService::WebDataRequest*&gt; const&amp;) (stl_tree.h:365)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*  std::pair&lt;int const  WebDataService::WebDataRequest*&gt; const&amp;) (stl_tree.h:789)    std::_Rb_tree&lt;int  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;  std::_Select1st&lt;std::pair&lt;int const    WebDataService::WebDataRequest*&gt; &gt;  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::insert_unique(std::_Rb_tree_iterator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;  std::pair&lt;int const    WebDataService::WebDataRequest*&gt; const&amp;) (stl_tree.h:903)    std::map&lt;int  WebDataService::WebDataRequest*  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::insert(std::_Rb_tree_iterator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;  std::pair&lt;int const  WebDataService::WebDataRequest*&gt;   const&amp;) (stl_map.h:384)    std::map&lt;int  WebDataService::WebDataRequest*  std::less&lt;int&gt;  std::allocator&lt;std::pair&lt;int const  WebDataService::WebDataRequest*&gt; &gt;   &gt;::operator[](int const&amp;) (stl_map.h:339)    WebDataService::RegisterRequest(WebDataService::WebDataRequest*) (web_data_service.cc:90)    WebDataService::GetCreditCards(WebDataServiceConsumer*) (web_data_service.cc:220)    PersonalDataManager::LoadCreditCards() (personal_data_manager.cc:468)    PersonalDataManager::PersonalDataManager(Profile*) (personal_data_manager.cc:417)    PersonalDataManager::PersonalDataManager(Profile*) (personal_data_manager.cc:418)    TestingProfile::CreatePersonalDataManager() (testing_profile.cc:234)    (anonymous namespace)::AutoFillInfoBarDelegateTest::SetUp() (autofill_infobar_delegate_unittest.cc:72)    Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeISt4pairIKiPN14WebDataService14WebDataRequestEEEE8allocateEmPKv     fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE11_M_get_nodeEv     fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE14_M_create_nodeERKS5_       fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE9_M_insertEPSt18_Rb_tree_node_baseSD_RKS5  _       fun:_ZNSt8_Rb_treeIiSt4pairIKiPN14WebDataService14WebDataRequestEESt10_Select1stIS5_ESt4lessIiESaIS5_EE13insert_uniqueESt17_Rb_tree_iteratorIS5_  ERKS5_     fun:_ZNSt3mapIiPN14WebDataService14WebDataRequestESt4lessIiESaISt4pairIKiS2_EEE6insertESt17_Rb_tree_iteratorIS7_ERKS7_     fun:_ZNSt3mapIiPN14WebDataService14WebDataRequestESt4lessIiESaISt4pairIKiS2_EEEixERS6_     fun:_ZN14WebDataService15RegisterRequestEPNS_14WebDataRequestE     fun:_ZN14WebDataService14GetCreditCardsEP22WebDataServiceConsumer     fun:_ZN19PersonalDataManager15LoadCreditCardsEv     fun:_ZN19PersonalDataManagerC2EP7Profile     fun:_ZN19PersonalDataManagerC1EP7Profile     fun:_ZN14TestingProfile25CreatePersonalDataManagerEv     fun:_ZN12_GLOBAL__N_127AutoFillInfoBarDelegateTest5SetUpEv  }    18:56:58 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: src/xcodebuild/Debug/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:IPCSyncCha  nnelTest.*:WebDropTargetTest.URL:WebDropTargetTest.Data:AutocompleteTextFieldEditorTest.CutCopyTest:DownloadUtilTest.AddFileToPasteboardTest:Fin  dPasteboardTest.ReadingFromPboardUpdatesFindText:FindPasteboardTest.SendsNotificationWhenTextChanges:RenderViewTest.MacTestCmdUp:ChromeBrowserWi  ndowTest.DoesHideTitle:ClearBrowsingDataControllerTest.*:NSMenuItemAdditionsTest.TestMOnDifferentLayouts:PrefsControllerTest.GetPrefsViewForPage  :PrefsControllerTest.GetToolbarItemForPage:PrefsControllerTest.ShowAndClose:PrefsControllerTest.SwitchToPage:RenderViewTest.OnPrintPages:RenderV  iewTest.Print*:TabStripControllerTest.AddRemoveTabs:TaskManagerWindowControllerTest.* --gtest_print_time  706 (56 direct  650 indirect) bytes in 2 blocks are definitely lost in loss record 15 143 of 15 926    operator new(unsigned long) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:235)    WebDataService::GetAutoFillProfiles(WebDataServiceConsumer*) (web_data_service.cc:177)    PersonalDataManager::LoadProfiles() (personal_data_manager.cc:448)    PersonalDataManager::PersonalDataManager(Profile*) (personal_data_manager.cc:416)    PersonalDataManager::PersonalDataManager(Profile*) (personal_data_manager.cc:418)    TestingProfile::CreatePersonalDataManager() (testing_profile.cc:234)    (anonymous namespace)::AutoFillInfoBarDelegateTest::SetUp() (autofill_infobar_delegate_unittest.cc:72)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN14WebDataService19GetAutoFillProfilesEP22WebDataServiceConsumer     fun:_ZN19PersonalDataManager12LoadProfilesEv     fun:_ZN19PersonalDataManagerC2EP7Profile     fun:_ZN19PersonalDataManagerC1EP7Profile     fun:_ZN14TestingProfile25CreatePersonalDataManagerEv     fun:_ZN12_GLOBAL__N_127AutoFillInfoBarDelegateTest5SetUpEv  }   </pre>