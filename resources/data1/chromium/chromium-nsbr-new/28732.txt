<title>Issue 28732 -   chromium -    Chromium should call the NSS function  SSL_SetSockPeerID - Project Hosting on Google Code</title> <pre> Kaspar Brand contributed this patch.  Here is his description  of the problem and the patch.    ==========  I'd like to propose the attached patch  to improve interoperability with  servers based on mod_ssl which are configured to support the SNI TLS  extension.    The issue is limited to the Linux version  because it manifests itself  only with NSS: when NSS resumes a session  it will also try to resume a  session when the host name changes - as long as the certificate covers  both names:    <a href="http://bonsai.mozilla.org/cvsblame.cgi?">http://bonsai.mozilla.org/cvsblame.cgi?</a>  file=mozilla/security/nss/lib/ssl/sslnonce.c&amp;rev=1.25&amp;mark=310-314#267    [...snipped...]    The fix is relatively simple - it actually reflects what PSM already  does in Firefox:    <a href="http://bonsai.mozilla.org/cvsblame.cgi?">http://bonsai.mozilla.org/cvsblame.cgi?</a>  file=mozilla/security/manager/ssl/src/nsNSSIOLayer.cpp&amp;rev=1.165&amp;mark=3164-  3166#3156  ========== </pre>