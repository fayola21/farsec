<title>Issue 36144 -   chromium -    XSL numerical values are output using current locale (which can make them unparseable later on) - Project Hosting on Google Code</title> <pre> Chrome Version       : 5.0.307.7 ()      Firefox 3.x: OK    Opera 10.10: OK    When processing a XSL stylesheet  Chromium outputs numerical values to  strings using the current locale the application is run in. e.g.:    LC_ALL=C  &lt;xsl:value-of select=&quot;5 div 2&quot;&gt; --&gt; 2.5  LC_ALL=de_DE.utf8  &lt;xsl:value-of select=&quot;5 div 2&quot;&gt; --&gt; 2 5    However _parsing_ strings into numerical values always uses . as  decimal-separator  so using this values later on results into NaN.    Consider the following XSL code:  &lt;xsl:variable name=&quot;full&quot; select=&quot;25&quot; /&gt;  &lt;xsl:variable name=&quot;part&quot;&gt;    &lt;xsl:choose&gt;      &lt;xsl:when test=&quot;random() &amp;gt; 0.5&quot;&gt;&lt;xsl:value-of select=&quot;$full div  2&quot;/&gt;&lt;/xsl:when&gt;      &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;$full div 3&quot;&gt;&lt;/xsl:otherwise&gt;    &lt;/xsl:choose&gt;  &lt;/xsl:variable&gt;    &lt;xsl:value-of select=&quot;format-number($part  '0.##%')&quot;/&gt;    This will work on a locale using . as decimal-separator  but fail with  outputting NaN in any other locale (e.g. de_DE).    Since there /are/ several methods defined in XSL for formatting numbers  (think of &lt;xsl:decimal-format&gt; and fn:format-number())  I highly suggest  that numerical values that are converted to text always use . as  decimal-separator (e.g. the C locale). Many stylesheets rely on this as  using the body of &lt;xsl:variable&gt; often is the only way to get different  values based on a certain condition.   </pre>