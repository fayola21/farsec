<title>Issue 44892 -   chromium -    geolocation: Memory leak if GetSystemDirectory fails - Project Hosting on Google Code</title> <pre> From code review:    <a href="http://www.google.com/codesearch/p?">http://www.google.com/codesearch/p?</a>  hl=en#v71Mbfh3hEw/chrome/browser/geolocation/wifi_data_provider_win.cc&amp;q=char%20file:browser%5C/geolocation%5  C/&amp;sa=N&amp;cd=2&amp;ct=rc    char16 *buffer = new char16[buffer_size];  // Return value excludes terminating NULL.  int characters_written = ::GetSystemDirectory(buffer  buffer_size);  if (characters_written == 0) {   return false;  }    I guess if (characters_written == 0) then buffer memory will leak (unless ::GetSystemDirectory() deletes it).   </pre>