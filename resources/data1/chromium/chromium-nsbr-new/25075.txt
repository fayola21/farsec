<title>Issue 25075 -   chromium -    AudioRendererBase crash during teardown - Project Hosting on Google Code</title> <pre> Saw this on a linux webkit test builder:    [20517:20594:148985581541:FATAL:/b/slave/webkit-dbg-linux-  builder/build/src/media/filters/audio_renderer_base.cc(130)] Check failed:   state_ == kPaused || state_ == kSeeking || state_ == kPlaying.   /b/slave/webkit-dbg-linux-  builder/build/src/webkit/tools/test_shell/test_shell.cc:187: Failure  Failed  [20517:20594:148985581541:FATAL:/b/slave/webkit-dbg-linux-  builder/build/src/media/filters/audio_renderer_base.cc(130)] Check failed:   state_ == kPaused || state_ == kSeeking || state_ == kPlaying.   Backtrace:  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(StackTrace::StackTrace()+0x20)   [0x80e429c]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(logging::LogMessage::~LogMessage()+  0x21c) [0x809c6ce]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(media::AudioRendererBase::OnReadCom  plete(media::Buffer*)+0xc5) [0x915fad7]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(void   DispatchToMethod&lt;media::AudioRendererBase  void   (media::AudioRendererBase::*)(media::Buffer*)    media::Buffer*&gt;(media::AudioRendererBase*  void   (media::AudioRendererBase::*)(media::Buffer*)  Tuple1&lt;media::Buffer*&gt;   const&amp;)+0x43) [0x9160d05]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(CallbackImpl&lt;media::AudioRendererBa  se  void (media::AudioRendererBase::*)(media::Buffer*)    Tuple1&lt;media::Buffer*&gt; &gt;::RunWithParams(Tuple1&lt;media::Buffer*&gt;   const&amp;)+0x2c) [0x9160d34]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(void   CallbackRunner&lt;Tuple1&lt;media::Buffer*&gt; &gt;::Run&lt;scoped_refptr&lt;media::Buffer&gt;   &gt;(scoped_refptr&lt;media::Buffer&gt; const&amp;)+0x40) [0x91471c8]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(media::DecoderBase&lt;media::AudioDeco  der  media::Buffer&gt;::FulfillPendingRead()+0x156) [0x914a3d4]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(media::DecoderBase&lt;media::AudioDeco  der  media::Buffer&gt;::ReadCompleteTask(scoped_refptr&lt;media::Buffer&gt;)+0x226)   [0x914a790]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(void   DispatchToMethod&lt;media::DecoderBase&lt;media::AudioDecoder  media::Buffer&gt;    void (media::DecoderBase&lt;media::AudioDecoder    media::Buffer&gt;::*)(scoped_refptr&lt;media::Buffer&gt;)    scoped_refptr&lt;media::Buffer&gt; &gt;(media::DecoderBase&lt;media::AudioDecoder    media::Buffer&gt;*  void (media::DecoderBase&lt;media::AudioDecoder    media::Buffer&gt;::*)(scoped_refptr&lt;media::Buffer&gt;)    Tuple1&lt;scoped_refptr&lt;media::Buffer&gt; &gt; const&amp;)+0x55) [0x9148a33]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(RunnableMethod&lt;media::DecoderBase&lt;m  edia::AudioDecoder  media::Buffer&gt;  void   (media::DecoderBase&lt;media::AudioDecoder    media::Buffer&gt;::*)(scoped_refptr&lt;media::Buffer&gt;)    Tuple1&lt;scoped_refptr&lt;media::Buffer&gt; &gt; &gt;::Run()+0x39) [0x9148a79]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::RunTask(Task*)+0xce)   [0x809ebb6]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::DeferOrRunPendingTask(  MessageLoop::PendingTask const&amp;)+0x35) [0x809f281]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::DoWork()+0xfb)   [0x809f511]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(base::MessagePumpDefault::Run(base:  :MessagePump::Delegate*)+0xc9) [0x80a4cfd]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::RunInternal()+0x137)   [0x809fb23]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::RunHandler()+0x11)   [0x809fb3d]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(MessageLoop::Run()+0x23)   [0x809fbe1]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(base::Thread::Run(MessageLoop*)+0x1  1) [0x80c6e9d]  	/b/slave/webkit-dbg-linux-  3/build/src/sconsbuild/Debug/test_shell(base::Thread::ThreadMain()+0xe1)   [0x80c726d]  	/b/slave/webkit-dbg-linux-3/build/src/sconsbuild/Debug/test_shell   [0x80ad14a]  	/lib/tls/i686/cmov/libpthread.so.0 [0x407b84fb]  	/lib/tls/i686/cmov/libc.so.6(clone+0x5e) [0x40c36e5e]    test_shell: /b/slave/webkit-dbg-linux-  builder/build/src/base/scoped_ptr.h:93: C* scoped_ptr&lt;C&gt;::operator-&gt;()   const [with C = media::AudioRendererAlgorithmBase]: Assertion `ptr_ !=   __null' failed.      Test shell is using a null audio renderer  so I'm wondering if this can   also happen with a regular renderer.  This also might be causing a lot of   test flakiness. </pre>