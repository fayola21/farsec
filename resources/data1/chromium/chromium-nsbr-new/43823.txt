<title>Issue 43823 -   chromium -    passing array argument to an extension function call in another view causes type check to fail - Project Hosting on Google Code</title> <pre> In something like an options page  get a reference to the background page   and call a function there passing     For example     -----------------  in options.html:    var bg = chrome.extension.getBackgroundPage();  bg.addMenuItem({&quot;title&quot;:&quot;foo&quot;  &quot;contexts&quot;:[&quot;LINK&quot; &quot;IMAGE&quot;});      -----------------  in background.html:    function addMenuItem(props  callback) {    if (!props.onclick) { props.onclick = .... }    if (!callback) { callback = .... }    chrome.experimental.contextMenu.create(props  callback);  }    This will fail because inside chrome/renderer/resources/json_schema.js    we're checking that the &quot;contexts&quot; parameter is instanceof Array. But it   turns out that it's actually an instanceof the Array prototype from the   options page's window  not the background page's window  so this check   fails.    A workaround for now is to use JSON.stringify/JSON.parse to coerce the   arguments to the right type. Eg inside addMenuItem()  add code like:    var menuProps = JSON.parse(JSON.stringify(props));  ... go on to use menuProps instead of props in rest of function ....       </pre>