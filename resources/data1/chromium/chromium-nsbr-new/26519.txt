<title>Issue 26519 -   chromium -    Need to re-architect nestableTasksAllowed in MessageLoops - Project Hosting on Google Code</title> <pre> The way things are architected right now in MessageLoops is that we have a large switch for turning   NestableTasks on and off. This in general puts the decision about running nestable tasks in the wrong   hands. The person spinning the loop has no idea about the various tasks that may want to run  and   turning off ALL tasks is probably not a good thing. Instead of having a big switch We could define a   couple of well known message loop states such as:    DefaultState - Normal running state  ModalState - When a modal dialog is being presented  EventTrackingState - When you are doing a drag    possibly others....    and allow the person implementing the task decide which states are appropriate for their task. Then   the person spinning the loop can define what state they are going to spin the loop in  and will fire   only the appropriate tasks.    This would clean up a pile of workaround code on the Mac side  and would give us a lot more ways to   avoid blocking background tasks unnecessarily.   </pre>