<title>Issue 44966 -   chromium -    Occasional event_del leak/invalid read - Project Hosting on Google Code</title> <pre> sh tools/valgrind/chrome_tests.sh -t base  --gtest_filter=MessageLoopTest.FileDescriptorWatcherOutlivesMessageLoop    Invalid read of size 8    event_del (third_party/libevent/event.c:792)     base::MessagePumpLibevent::FileDescriptorWatcher::StopWatchingFileDescriptor()  (base/message_pump_libevent.cc:83)     base::MessagePumpLibevent::FileDescriptorWatcher::~FileDescriptorWatcher()  (base/message_pump_libevent.cc:58)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody()  (base/message_loop_unittest.cc:1515)    testing::Test::Run() (testing/gtest/src/gtest.cc:2095)    testing::internal::TestInfoImpl::Run() (testing/gtest/src/gtest.cc:2314)    testing::TestCase::Run() (testing/gtest/src/gtest.cc:2420)    testing::internal::UnitTestImpl::RunAllTests()  (testing/gtest/src/gtest.cc:4024)    testing::UnitTest::Run() (testing/gtest/src/gtest.cc:3687)    TestSuite::Run() (./base/test/test_suite.h:131)    main (base/test/run_all_unittests.cc:10)  Address 0xd9e8ad0 is 0 bytes inside a block of size 1 576 free'd    free  (mp/scripts/valgrind-memcheck/coregrind/m_replacemalloc/vg_replace_malloc.c:390)    event_base_free (third_party/libevent/event.c:263)    base::MessagePumpLibevent::~MessagePumpLibevent()  (base/message_pump_libevent.cc:148)    base::RefCountedThreadSafe&lt;base::MessagePump   base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;  &gt;::DeleteInternal(base::MessagePump*) (./base/ref_counted.h:146)     base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;::Destruct(base::MessagePump*)  (./base/ref_counted.h:112)    base::RefCountedThreadSafe&lt;base::MessagePump   base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt; &gt;::Release()  (./base/ref_counted.h:140)    scoped_refptr&lt;base::MessagePump&gt;::~scoped_refptr() (./base/ref_counted.h:238)    MessageLoop::~MessageLoop() (base/message_loop.cc:140)    MessageLoopForIO::~MessageLoopForIO() (./base/message_loop.h:492)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody()  (base/message_loop_unittest.cc:1513)    testing::Test::Run() (testing/gtest/src/gtest.cc:2095)    testing::internal::TestInfoImpl::Run() (testing/gtest/src/gtest.cc:2314)    testing::TestCase::Run() (testing/gtest/src/gtest.cc:2420)    testing::internal::UnitTestImpl::RunAllTests()  (testing/gtest/src/gtest.cc:4024)    testing::UnitTest::Run() (testing/gtest/src/gtest.cc:3687)    TestSuite::Run() (./base/test/test_suite.h:131)    main (base/test/run_all_unittests.cc:10)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Addr8     fun:event_del      fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcher26StopWatchingFileDescriptorEv     fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcherD1Ev      fun:_ZN61MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test8TestBodyEv     fun:_ZN7testing4Test3RunEv     fun:_ZN7testing8internal12TestInfoImpl3RunEv     fun:_ZN7testing8TestCase3RunEv     fun:_ZN7testing8internal12UnitTestImpl11RunAllTestsEv     fun:_ZN7testing8UnitTest3RunEv     fun:_ZN9TestSuite3RunEv     fun:main  }   </pre>