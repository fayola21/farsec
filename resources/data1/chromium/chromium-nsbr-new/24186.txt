<title>Issue 24186 -   chromium -    Investigate sending error code - Project Hosting on Google Code</title> <pre> From http://buganizer/issue?id=849085    jabdelmalek on September 11 2007 15:11  (New)  Summary     Investigate sending error code  Component     Chrome &gt; Deprecated &gt; Internal API  Reporter     jabdelmalek  CC     chrome-bugs  Type     Bug  Priority     P2  Severity     S2  In prod     false  Notes  pluginsget-url-with-blank-target.html tests that we don't crash  however  it's failing because when we call NPP_URLNotify we always pass in  NPRES_DONE instead of NPERR_NGENERIC_ERROR.  Find out what Firefox does in  such a case and investigate if this is worth fixing.  jabdelmalek on September 13 2007 17:04  (New)  Priority     P3  Severity     S3  Notes  I've done some more testing  and here's the comment I added to  ignored-tests.txt:    // bug 849085: test expects window to not open  even though it seems according  // to the spec it should open (target is _blank).  In Chrome and Firefox a  window  // is opened  so we don't return an error code as the test expects.  tc on September 13 2007 17:29  (New)  Notes  It's not supposed to open a window because by default  opening new windows  is disabled in the test shell in layout test mode.  Layout tests that use  windows are supposed to first call layoutTestController.setCanOpenWindows().    For whatever reason  creating a window via a plugin doesn't go through  TestShell::CreateWebView which does the check  but maybe it should?    In the case that the window is blocked (e.g.  with a hypothetical popup  blocker)  do we return the right error code?  jabdelmalek on September 13 2007 18:16  (New)  Notes  Should window creation through plugins go through the popup blocker?   They're running native code so they can always just start a browser with an  argument to any url they want to open.  For comparison  Firefox doesn't  block this.  tc on September 14 2007 09:51  (New)  Notes  It seems beneficial to for us to have the option to block windows created  from plugins in the situations we can.  There may be other reasons to block  window create from plugins (e.g.  an embedded renderer).    If we do block a window from being created  do we send the plugin the right  response code and not crash (that seems to be the purpose of this test)?  jabdelmalek on September 14 2007 16:33  (New)  Notes  Not sure (since we currently don't block)  mal on September 25 2007 16:31  (New)  Component     Chrome &gt; Deprecated &gt; WebKit &gt; Layout  mal on November 04 2007 20:48  (New)  Hotlist     WebKit ignored tests  eseidel on March 13 2008 17:54  (New)  Hotlist     WebKit ignored tests  layout_test_failures  mbelshe on March 28 2008 16:38  (Assigned)  Assignee     mbelshe  Notes  I'm in this code  and ran into this bug.    I think the idea that webkit wants this window to not open is incorrect.    Reasons:   1) The spec doesn't say so   2) Firefox doesn't behave that way.  (It does open the window but does not  callback to the JS notify routine at all)   3) Safari 3.1 for windows does not behave that way.  (It opens the  apple.com URL in a new window and returns error success).  mbelshe on March 31 2008 12:09  (Fixed / Fixed)  Notes  I fixed the layout test for this to reflect my latest comments. </pre>