<title>Issue 44393 -   chromium -    Mac ui_tests valgrind leak - Project Hosting on Google Code</title> <pre> This appeared on the cycle with revisions 47419 and 47420. Tony investigated the valgrind output and thinks it's probably not his change at 47419  so   probably the webkit roll was responsible.       <a href="http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20UI%20(valgrind)(2)/builds/3056/steps/valgrind%20test:%20ui/logs/stdio">http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20UI%20(valgrind)(2)/builds/3056/steps/valgrind%20test:%20ui/logs/stdio</a>      10:39:14 memcheck_analyze.py [ERROR] FAIL! There were 1 errors:   10:40:13 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium --no-first-run --no-default-browser-check --  test-type=ui --enable-file-cookies --testing-channel=ChromeTestingInterface:71710.28 --noerrdialogs --homepage=about:blank --disable-web-resources --user-  data-dir=/private/var/folders/Tf/TfOs8gm+HkuQrkICa3LquE+++TM/-Tmp-/org.chromium.yDumdU/test_user_data --metrics-recording-only --enable-logging --test-  name=NPAPITester.FLAKY_Arguments --allow-file-access-from-files --disable-apps-panel  732 (32 direct  700 indirect) bytes in 1 blocks are definitely lost in loss record 5 997 of 6 301    operator new(unsigned long) (mp/vg-bins/scripts/valgrind-memcheck/coregrind/m_replacemalloc/vg_replace_malloc.c:276)    __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::allocate(unsigned long  void   const*) (ext/new_allocator.h:88)    std::_Rb_tree&lt;net::HostCache::Key  std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt;    std::_Select1st&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::less&lt;net::HostCache::Key&gt;    std::allocator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::_M_get_node() (stl_tree.h:356)    std::_Rb_tree&lt;net::HostCache::Key  std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt;    std::_Select1st&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::less&lt;net::HostCache::Key&gt;    std::allocator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::_M_create_node(std::pair&lt;net::HostCache::Key const    scoped_refptr&lt;net::HostCache::Entry&gt; &gt; const&amp;) (stl_tree.h:365)    std::_Rb_tree&lt;net::HostCache::Key  std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt;    std::_Select1st&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::less&lt;net::HostCache::Key&gt;    std::allocator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*    std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; const&amp;) (stl_tree.h:789)    std::_Rb_tree&lt;net::HostCache::Key  std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt;    std::_Select1st&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::less&lt;net::HostCache::Key&gt;    std::allocator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::insert_unique(std::pair&lt;net::HostCache::Key const    scoped_refptr&lt;net::HostCache::Entry&gt; &gt; const&amp;) (stl_tree.h:883)    std::_Rb_tree&lt;net::HostCache::Key  std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt;    std::_Select1st&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::less&lt;net::HostCache::Key&gt;    std::allocator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;   &gt;::insert_unique(std::_Rb_tree_iterator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;  std::pair&lt;net::HostCache::Key const    scoped_refptr&lt;net::HostCache::Entry&gt; &gt; const&amp;) (stl_tree.h:905)    std::map&lt;net::HostCache::Key  scoped_refptr&lt;net::HostCache::Entry&gt;  std::less&lt;net::HostCache::Key&gt;  std::allocator&lt;std::pair&lt;net::HostCache::Key const    scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::insert(std::_Rb_tree_iterator&lt;std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt;    std::pair&lt;net::HostCache::Key const  scoped_refptr&lt;net::HostCache::Entry&gt; &gt; const&amp;) (stl_map.h:384)    std::map&lt;net::HostCache::Key  scoped_refptr&lt;net::HostCache::Entry&gt;  std::less&lt;net::HostCache::Key&gt;  std::allocator&lt;std::pair&lt;net::HostCache::Key const    scoped_refptr&lt;net::HostCache::Entry&gt; &gt; &gt; &gt;::operator[](net::HostCache::Key const&amp;) (stl_map.h:339)    net::HostCache::Set(net::HostCache::Key const&amp;  int  net::AddressList  base::TimeTicks) (host_cache.cc:62)    net::HostResolverImpl::OnJobComplete(net::HostResolverImpl::Job*  int  int  net::AddressList const&amp;) (host_resolver_impl.cc:951)    net::HostResolverImpl::Job::OnLookupComplete() (host_resolver_impl.cc:417)    void DispatchToMethod&lt;net::HostResolverImpl::Job  void (net::HostResolverImpl::Job::*)()&gt;(net::HostResolverImpl::Job*  void   (net::HostResolverImpl::Job::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;net::HostResolverImpl::Job  void (net::HostResolverImpl::Job::*)()  Tuple0&gt;::Run() (task.h:296)    MessageLoop::RunTask(Task*) (message_loop.cc:328)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) (message_loop.cc:336)    MessageLoop::DoWork() (message_loop.cc:443)    base::MessagePumpLibevent::Run(base::MessagePump::Delegate*) (message_pump_libevent.cc:241)    MessageLoop::RunInternal() (message_loop.cc:204)    MessageLoop::RunHandler() (message_loop.cc:176)    MessageLoop::Run() (message_loop.cc:154)    base::Thread::Run(MessageLoop*) (thread.cc:133)    base::Thread::ThreadMain() (thread.cc:157)    ThreadFunc(void*) (platform_thread_posix.cc:28)    _pthread_start    thread_start  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeISt4pairIKN3net9HostCache3KeyE13scoped_refptrINS4_5EntryEEEEE8allocateEmPKv     fun:_ZNSt8_Rb_treeIN3net9HostCache3KeyESt4pairIKS2_13scoped_refptrINS1_5EntryEEESt10_Select1stIS8_ESt4lessIS2_ESaIS8_EE11_M_get_nodeEv     fun:_ZNSt8_Rb_treeIN3net9HostCache3KeyESt4pairIKS2_13scoped_refptrINS1_5EntryEEESt10_Select1stIS8_ESt4lessIS2_ESaIS8_EE14_M_create_nodeERKS8_       fun:_ZNSt8_Rb_treeIN3net9HostCache3KeyESt4pairIKS2_13scoped_refptrINS1_5EntryEEESt10_Select1stIS8_ESt4lessIS2_ESaIS8_EE9_M_insertEPSt18_Rb_tree_node_baseSG_R  KS8_     fun:_ZNSt8_Rb_treeIN3net9HostCache3KeyESt4pairIKS2_13scoped_refptrINS1_5EntryEEESt10_Select1stIS8_ESt4lessIS2_ESaIS8_EE13insert_uniqueERKS8_       fun:_ZNSt8_Rb_treeIN3net9HostCache3KeyESt4pairIKS2_13scoped_refptrINS1_5EntryEEESt10_Select1stIS8_ESt4lessIS2_ESaIS8_EE13insert_uniqueESt17_Rb_tree_iteratorI  S8_ERKS8_     fun:_ZNSt3mapIN3net9HostCache3KeyE13scoped_refptrINS1_5EntryEESt4lessIS2_ESaISt4pairIKS2_S5_EEE6insertESt17_Rb_tree_iteratorISA_ERKSA_     fun:_ZNSt3mapIN3net9HostCache3KeyE13scoped_refptrINS1_5EntryEESt4lessIS2_ESaISt4pairIKS2_S5_EEEixERS9_     fun:_ZN3net9HostCache3SetERKNS0_3KeyEiNS_11AddressListEN4base9TimeTicksE     fun:_ZN3net16HostResolverImpl13OnJobCompleteEPNS0_3JobEiiRKNS_11AddressListE     fun:_ZN3net16HostResolverImpl3Job16OnLookupCompleteEv     fun:_Z16DispatchToMethodIN3net16HostResolverImpl3JobEMS2_FvvEEvPT_T0_RK6Tuple0     fun:_ZN14RunnableMethodIN3net16HostResolverImpl3JobEMS2_FvvE6Tuple0E3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base19MessagePumpLibevent3RunEPNS_11MessagePump8DelegateE     fun:_ZN11MessageLoop11RunInternalEv     fun:_ZN11MessageLoop10RunHandlerEv  }   </pre>