<title>Issue 30762 -   chromium -    Memory leaks in ExtensionMessageBundle::Create. - Project Hosting on Google Code</title> <pre> This started near   <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20(val">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20(val</a>  grind)/builds/2341/ and   <a href="http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valg">http://build.chromium.org/buildbot/waterfall/builders/Linux%20Tests%20(valg</a>  rind)(1)/builds/1855    unit_tests turned red on both the Linux and Mac valgrind bots. Looks like   this might be caused by <a href="/p/chromium/source/detail?r=34846">r34846</a>?    365 (24 direct  341 indirect) bytes in 1 blocks are definitely lost in loss   record 24 267 of 25 052    operator new(unsigned int) (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:220)      __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;std::basic_string&lt;cha  r  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::allocate(unsigned int  void const*)   (sr/include/c++/4.2/ext/new_allocator.h:91)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::_M_get_node() (sr/include/c++/4.2/bits/stl_tree.h:367)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::_M_create_node(std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; const&amp;)   (sr/include/c++/4.2/bits/stl_tree.h:376)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*    std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; const&amp;)   (sr/include/c++/4.2/bits/stl_tree.h:838)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::_M_insert_unique(std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;   const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:986)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::_M_insert_unique(std::_Rb_tree_iterator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; const&amp;)   (sr/include/c++/4.2/bits/stl_tree.h:1008)    std::map&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::less&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::allocator&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::insert(std::_Rb_tree_iterator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;    std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; const&amp;)   (sr/include/c++/4.2/bits/stl_map.h:427)    std::map&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::less&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;    std::allocator&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;   &gt;::operator[](std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const&amp;) (sr/include/c++/4.2/bits/stl_map.h:350)    ExtensionMessageBundle::Init(std::vector&lt;linked_ptr&lt;DictionaryValue&gt;    std::allocator&lt;linked_ptr&lt;DictionaryValue&gt; &gt; &gt; const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/common/extensions/extension_message_bundle.cc:61)    ExtensionMessageBundle::Create(std::vector&lt;linked_ptr&lt;DictionaryValue&gt;    std::allocator&lt;linked_ptr&lt;DictionaryValue&gt; &gt; &gt; const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/common/extensions/extension_message_bundle.cc:39)    extension_l10n_util::LoadMessageCatalogs(FilePath const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const&amp;  std::set&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt; const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/common/extensions/extension_l10n_util.cc:293)    extension_file_util::LoadExtensionMessageBundle(FilePath const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/browser/extensions/extension_file_util.cc:424)    extension_l10n_util::LocalizeExtension(Extension*  DictionaryValue*    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/common/extensions/extension_l10n_util.cc:128)    extension_file_util::LoadExtension(FilePath const&amp;  bool    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;*)   (uilder/build/src/chrome/browser/extensions/extension_file_util.cc:144)    ExtensionCreator::InitializeInput(FilePath const&amp;  FilePath const&amp;    FilePath const&amp;)   (uilder/build/src/chrome/browser/extensions/extension_creator.cc:58)    ExtensionCreator::Run(FilePath const&amp;  FilePath const&amp;  FilePath const&amp;    FilePath const&amp;)   (uilder/build/src/chrome/browser/extensions/extension_creator.cc:220)    ExtensionsServiceTest_PackExtensionOpenSSLKey_Test::TestBody()   (uilder/build/src/chrome/browser/extensions/extensions_service_unittest.cc:  881)    testing::Test::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2099)    testing::internal::TestInfoImpl::Run()   (uilder/build/src/testing/gtest/src/gtest.cc:2318)    testing::TestCase::Run()   (uilder/build/src/testing/gtest/src/gtest.cc:2426)    testing::internal::UnitTestImpl::RunAllTests()   (uilder/build/src/testing/gtest/src/gtest.cc:4026)    testing::UnitTest::Run()   (uilder/build/src/testing/gtest/src/gtest.cc:3694)    TestSuite::Run() (uilder/build/src/base/test/test_suite.h:124)    main (uilder/build/src/chrome/test/unit/run_all_unittests.cc:8)     </pre>