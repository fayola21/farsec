<title>Issue 38935 -   chromium -    ObserverList crash in ApplyChangesFromSyncModel on startup - Project Hosting on Google Code</title> <pre> Crash may be happening on other OSes as well.    Sample crash 1: http://crash/reportdetail?reportid=3f08852d43a748e5  Product  Version 	Chrome_Linux    5.0.356.2   Uptime 	4512 ms   ptype 	browser  lsb-release 	Ubuntu 9.10     Thread 21 *CRASHED* ( SIGSEGV @ 0x00000008 )  0x093b568f 	[chrome 	- stl_tree.h:481] 	  std::_Rb_tree&lt;unsigned int  std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt;    std::_Select1st&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt;  std::less&lt;unsigned int&gt;    std::allocator&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt; &gt;::find(unsigned int const&amp;)   const  0x093b570a 	[chrome 	- stl_map.h:557] 	  NotificationService::HasKey(std::map&lt;unsigned int    ObserverList&lt;NotificationObserver  false&gt;*  std::less&lt;unsigned int&gt;    std::allocator&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt; &gt; const&amp;  NotificationSource   const&amp;)  0x093b6051 	[chrome 	- notification_service.cc:95] 	  NotificationService::Notify(NotificationType  NotificationSource const&amp;    NotificationDetails const&amp;)  0x08316470 	[chrome 	- bookmark_model.cc:677] 	  BookmarkModel::RemoveAndDeleteNode(BookmarkNode*)  0x08488173 	[chrome 	- bookmark_change_processor.cc:402] 	  browser_sync::BookmarkChangeProcessor::ApplyChangesFromSyncModel(sync_api::  BaseTransaction const*  sync_api::SyncManager::ChangeRecord const*  int)  0x08492665 	[chrome 	- sync_backend_host.cc:345] 	  browser_sync::SyncBackendHost::Core::OnChangesApplied(syncable::ModelType    sync_api::BaseTransaction const*  sync_api::SyncManager::ChangeRecord   const*  int)  0x085dd6db 	[chrome 	- syncapi.cc:1577] 	  sync_api::SyncManager::SyncInternal::HandleTransactionCompleteChangeEvent(s  yncable::DirectoryChangeEvent const&amp;)  0x085e043f 	[chrome 	- event_sys-inl.h:287] 	  EventListenerHookupImpl&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock    AutoLock&gt;  syncable::DirectoryChangeEvent    SimpleHookup&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock  AutoLock&gt;    syncable::DirectoryChangeEvent  sync_api::SyncManager::SyncInternal  void   (sync_api::SyncManager::SyncInternal::*)(syncable::DirectoryChangeEvent   const&amp;)&gt; &gt;::HandleEvent(syncable::DirectoryChangeEvent const&amp;)  0x09336614 	[chrome 	- event_sys-inl.h:184] 	  syncable::BaseTransaction::UnlockAndLog(std::set&lt;syncable::EntryKernel    syncable::LessEntryMetaHandles  std::allocator&lt;syncable::EntryKernel&gt; &gt;*)  0x0933e5b0 	[chrome 	- syncable.cc:1010] 	  syncable::WriteTransaction::~WriteTransaction()  0x093563e4 	[chrome 	- apply_updates_command.cc:37] 	  browser_sync::ApplyUpdatesCommand::ModelChangingExecuteImpl(browser_sync::s  essions::SyncSession*)  0x0935d477 	[chrome 	- model_changing_syncer_command.h:35] 	  browser_sync::ModelChangingSyncerCommand::StartChangingModel()  0x08491a19 	[chrome 	- callback.h:78] 	  browser_sync::ModelSafeWorker::DoWorkAndWaitUntilDone(CallbackRunner&lt;Tuple0  &gt;*)  0x0935d609 	[chrome 	- model_changing_syncer_command.cc:29] 	  browser_sync::ModelChangingSyncerCommand::ExecuteImpl(browser_sync::session  s::SyncSession*)  0x0934894d 	[chrome 	- syncer_command.cc:20] 	  browser_sync::SyncerCommand::Execute(browser_sync::sessions::SyncSession*)  0x09347e4b 	[chrome 	- syncer.cc:154] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*    browser_sync::SyncerStep  browser_sync::SyncerStep)  0x0934815b 	[chrome 	- syncer.cc:95] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*)  0x093481a3 	[chrome 	- syncer.cc:79] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession::Delega  te*)  0x093304dc 	[chrome 	- syncer_thread.cc:421] 	  browser_sync::SyncerThread::SyncMain(browser_sync::Syncer*)  0x09330cb9 	[chrome 	- syncer_thread.cc:288] 	  browser_sync::SyncerThread::ThreadMainLoop()  0x09331004 	[chrome 	- syncer_thread.cc:408] 	  browser_sync::SyncerThread::ThreadMain()  0x08632e20 	[chrome 	- message_loop.cc:329] 	  MessageLoop::RunTask(Task*)  0x086336a5 	[chrome 	- message_loop.cc:337] 	  MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  0x08633ca9 	[chrome 	- message_loop.cc:444] 	  MessageLoop::DoWork()  0x086364dc 	[chrome 	- message_pump_default.cc:23] 	  base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  0x08634013 	[chrome 	- message_loop.cc:205] 	  MessageLoop::RunInternal()  0x08634115 	[chrome 	- message_loop.cc:155] 	MessageLoop::Run()  0x0864b18e 	[chrome 	- thread.cc:155] 	  base::Thread::ThreadMain()  0x0863ef50 	[chrome 	- platform_thread_posix.cc:26] 	  ThreadFunc(void*)      Sample crash 2: http://crash/reportdetail?reportid=236489856b55036d  Product  Version 	Chrome_Linux    5.0.356.2   Uptime 	2378 ms  ptype 	browser  lsb-release 	Ubuntu 9.10     0x093b568f 	[chrome 	- stl_tree.h:481] 	  std::_Rb_tree&lt;unsigned int  std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt;    std::_Select1st&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt;  std::less&lt;unsigned int&gt;    std::allocator&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt; &gt;::find(unsigned int const&amp;)   const  0x093b570a 	[chrome 	- stl_map.h:557] 	  NotificationService::HasKey(std::map&lt;unsigned int    ObserverList&lt;NotificationObserver  false&gt;*  std::less&lt;unsigned int&gt;    std::allocator&lt;std::pair&lt;unsigned int const    ObserverList&lt;NotificationObserver  false&gt;*&gt; &gt; &gt; const&amp;  NotificationSource   const&amp;)  0x093b6051 	[chrome 	- notification_service.cc:95] 	  NotificationService::Notify(NotificationType  NotificationSource const&amp;    NotificationDetails const&amp;)  0x08314735 	[chrome 	- bookmark_model.cc:710] 	  BookmarkModel::AddNode(BookmarkNode*  int  BookmarkNode*  bool)  0x083148d9 	[chrome 	- bookmark_model.cc:442] 	  BookmarkModel::AddURLWithCreationTime(BookmarkNode const*  int    std::basic_string&lt;unsigned short  base::string16_char_traits    std::allocator&lt;unsigned short&gt; &gt; const&amp;  GURL const&amp;  base::Time const&amp;)  0x083149bf 	[chrome 	- bookmark_model.cc:401] 	  BookmarkModel::AddURL(BookmarkNode const*  int  std::basic_string&lt;unsigned   short  base::string16_char_traits  std::allocator&lt;unsigned short&gt; &gt; const&amp;    GURL const&amp;)  0x08314a0f 	[chrome 	- bookmark_model.cc:394] 	  BookmarkModel::AddURL(BookmarkNode const*  int  std::basic_string&lt;wchar_t    std::char_traits&lt;wchar_t&gt;  std::allocator&lt;wchar_t&gt; &gt; const&amp;  GURL const&amp;)  0x08487627 	[chrome 	- bookmark_change_processor.cc:485] 	  browser_sync::BookmarkChangeProcessor::CreateBookmarkNode(sync_api::BaseNod  e*  BookmarkNode const*  BookmarkModel*  int)  0x084878b2 	[chrome 	- bookmark_change_processor.cc:449] 	  browser_sync::BookmarkChangeProcessor::CreateOrUpdateBookmarkNode(sync_api:  :BaseNode*  BookmarkModel*)  0x08488292 	[chrome 	- bookmark_change_processor.cc:416] 	  browser_sync::BookmarkChangeProcessor::ApplyChangesFromSyncModel(sync_api::  BaseTransaction const*  sync_api::SyncManager::ChangeRecord const*  int)  0x08492665 	[chrome 	- sync_backend_host.cc:345] 	  browser_sync::SyncBackendHost::Core::OnChangesApplied(syncable::ModelType    sync_api::BaseTransaction const*  sync_api::SyncManager::ChangeRecord   const*  int)  0x085dd6db 	[chrome 	- syncapi.cc:1577] 	  sync_api::SyncManager::SyncInternal::HandleTransactionCompleteChangeEvent(s  yncable::DirectoryChangeEvent const&amp;)  0x085e043f 	[chrome 	- event_sys-inl.h:287] 	  EventListenerHookupImpl&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock    AutoLock&gt;  syncable::DirectoryChangeEvent    SimpleHookup&lt;EventChannel&lt;syncable::DirectoryChangeEvent  Lock  AutoLock&gt;    syncable::DirectoryChangeEvent  sync_api::SyncManager::SyncInternal  void   (sync_api::SyncManager::SyncInternal::*)(syncable::DirectoryChangeEvent   const&amp;)&gt; &gt;::HandleEvent(syncable::DirectoryChangeEvent const&amp;)  0x09336614 	[chrome 	- event_sys-inl.h:184] 	  syncable::BaseTransaction::UnlockAndLog(std::set&lt;syncable::EntryKernel    syncable::LessEntryMetaHandles  std::allocator&lt;syncable::EntryKernel&gt; &gt;*)  0x0933e5b0 	[chrome 	- syncable.cc:1010] 	  syncable::WriteTransaction::~WriteTransaction()  0x093563e4 	[chrome 	- apply_updates_command.cc:37] 	  browser_sync::ApplyUpdatesCommand::ModelChangingExecuteImpl(browser_sync::s  essions::SyncSession*)  0x0935d477 	[chrome 	- model_changing_syncer_command.h:35] 	  browser_sync::ModelChangingSyncerCommand::StartChangingModel()  0x08491a19 	[chrome 	- callback.h:78] 	  browser_sync::ModelSafeWorker::DoWorkAndWaitUntilDone(CallbackRunner&lt;Tuple0  &gt;*)  0x0935d609 	[chrome 	- model_changing_syncer_command.cc:29] 	  browser_sync::ModelChangingSyncerCommand::ExecuteImpl(browser_sync::session  s::SyncSession*)  0x0934894d 	[chrome 	- syncer_command.cc:20] 	  browser_sync::SyncerCommand::Execute(browser_sync::sessions::SyncSession*)  0x09347e4b 	[chrome 	- syncer.cc:154] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*    browser_sync::SyncerStep  browser_sync::SyncerStep)  0x0934815b 	[chrome 	- syncer.cc:95] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*)  0x093481a3 	[chrome 	- syncer.cc:79] 	  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession::Delega  te*)  0x093304dc 	[chrome 	- syncer_thread.cc:421] 	  browser_sync::SyncerThread::SyncMain(browser_sync::Syncer*)  0x09330cb9 	[chrome 	- syncer_thread.cc:288] 	  browser_sync::SyncerThread::ThreadMainLoop()  0x09331004 	[chrome 	- syncer_thread.cc:408] 	  browser_sync::SyncerThread::ThreadMain()  0x08632e20 	[chrome 	- message_loop.cc:329] 	  MessageLoop::RunTask(Task*)  0x086336a5 	[chrome 	- message_loop.cc:337] 	  MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  0x08633ca9 	[chrome 	- message_loop.cc:444] 	  MessageLoop::DoWork()  0x086364dc 	[chrome 	- message_pump_default.cc:23] 	  base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  0x08634013 	[chrome 	- message_loop.cc:205] 	  MessageLoop::RunInternal()  0x08634115 	[chrome 	- message_loop.cc:155] 	MessageLoop::Run()  0x0864b18e 	[chrome 	- thread.cc:155] 	  base::Thread::ThreadMain()  0x0863ef50 	[chrome 	- platform_thread_posix.cc:26] 	  ThreadFunc(void*) </pre>