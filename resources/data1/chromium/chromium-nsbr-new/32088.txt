<title>Issue 32088 -   chromium -    memory leak around nss in chromium os unit_tests - Project Hosting on Google Code</title> <pre>   -- bots --  http://chrome-buildbot:8016/waterfall?  branch=&amp;builder=Chromium%20OS+UI+(valgrind)(1)&amp;builder=Chromium%20OS+UI+(va  lgrind)(2)&amp;builder=Chromium%20OS+UI+(valgrind)(3)&amp;builder=Chromium%20OS+UI+  (valgrind)(4)&amp;reload=90    -- full log ---  http://chrome-  buildbot:8016/builders/Chromium%20OS%20UI%20(valgrind)(1)/builds/809/steps/  valgrind%20test:%20unit/logs/stdio    -- snippet from log ---  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTes  t.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest --  gtest_print_time  72 bytes in 1 blocks are definitely lost in loss record 15 735 of 18 140    calloc (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:453)    PR_Calloc (ild/buildd/nspr-  4.7.5/mozilla/nsprpub/pr/src/malloc/prmem.c:474)    error_get_my_stack (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/error.c:145)    nss_ClearErrorStack (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/error.c:281)    NSSArena_Create (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/arena.c:385)    NSSTrustDomain_Create (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pki/trustdomain.c:74)    STAN_LoadDefaultNSS3TrustDomain (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pki/pki3hack.c:144)    nss_Init (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/nss/nssinit.c:548)    NSS_InitReadWrite (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/nss/nssinit.c:596)    (anonymous namespace)::NSSInitSingleton::NSSInitSingleton()   (base/nss_init.cc:82)    DefaultSingletonTraits&lt;(anonymous namespace)::NSSInitSingleton&gt;::New()   (base/singleton.h:22)    Singleton&lt;(anonymous namespace)::NSSInitSingleton    DefaultSingletonTraits&lt;(anonymous namespace)::NSSInitSingleton&gt;  (anonymous   namespace)::NSSInitSingleton&gt;::get() (base/singleton.h:133)    base::EnsureNSSInit() (base/nss_init.cc:177)    TestSuite::Initialize() (base/test/test_suite.h:220)    ChromeTestSuite::Initialize() (chrome/test/unit/chrome_test_suite.h:95)    TestSuite::Run() (base/test/test_suite.h:114)    main (chrome/test/unit/run_all_unittests.cc:8)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:calloc     fun:PR_Calloc     fun:error_get_my_stack     fun:nss_ClearErrorStack     fun:NSSArena_Create     fun:NSSTrustDomain_Create     fun:STAN_LoadDefaultNSS3TrustDomain     fun:nss_Init     fun:NSS_InitReadWrite       fun:_ZN103_GLOBAL__N__b_slave_chromium_rel_chromeos_valgrind_tests_1_build_  src_base_nss_init.cc_00000000_F9261D6A16NSSInitSingletonC1Ev       fun:_ZN22DefaultSingletonTraitsIN103_GLOBAL__N__b_slave_chromium_rel_chrome  os_valgrind_tests_1_build_src_base_nss_init.cc_00000000_F9261D6A16NSSInitSi  ngletonEE3NewEv       fun:_ZN9SingletonIN103_GLOBAL__N__b_slave_chromium_rel_chromeos_valgrind_te  sts_1_build_src_base_nss_init.cc_00000000_F9261D6A16NSSInitSingletonE22Defa  ultSingletonTraitsIS1_ES1_E3getEv     fun:_ZN4base13EnsureNSSInitEv     fun:_ZN9TestSuite10InitializeEv     fun:_ZN15ChromeTestSuite10InitializeEv     fun:_ZN9TestSuite3RunEv     fun:main  }      11:06:06 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: src/sconsbuild/Release/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTes  t.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest --  gtest_print_time  72 bytes in 1 blocks are definitely lost in loss record 15 734 of 18 140    calloc (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:453)    PR_Calloc (ild/buildd/nspr-  4.7.5/mozilla/nsprpub/pr/src/malloc/prmem.c:474)    error_get_my_stack (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/error.c:145)    nss_ClearErrorStack (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/error.c:281)    NSSArena_Create (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/base/arena.c:385)    nssCKFWInstance_Create (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/ckfw/instance.c:217)    NSSCKFWC_Initialize (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/ckfw/wrap.c:205)    builtinsC_Initialize (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/ckfw/builtins/../../../../../dist/public/  nss/nssck.api:117)    secmod_ModuleInit (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11load.c:146)    SECMOD_LoadPKCS11Module (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11load.c:386)    SECMOD_LoadModule (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11pars.c:323)    SECMOD_LoadModule (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11pars.c:338)    nss_Init (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/nss/nssinit.c:536)    NSS_InitReadWrite (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/nss/nssinit.c:596)    (anonymous namespace)::NSSInitSingleton::NSSInitSingleton()   (base/nss_init.cc:82)    DefaultSingletonTraits&lt;(anonymous namespace)::NSSInitSingleton&gt;::New()   (base/singleton.h:22)    Singleton&lt;(anonymous namespace)::NSSInitSingleton    DefaultSingletonTraits&lt;(anonymous namespace)::NSSInitSingleton&gt;  (anonymous   namespace)::NSSInitSingleton&gt;::get() (base/singleton.h:133)    base::EnsureNSSInit() (base/nss_init.cc:177)    TestSuite::Initialize() (base/test/test_suite.h:220)    ChromeTestSuite::Initialize() (chrome/test/unit/chrome_test_suite.h:95)    TestSuite::Run() (base/test/test_suite.h:114)    main (chrome/test/unit/run_all_unittests.cc:8)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:calloc     fun:PR_Calloc     fun:error_get_my_stack     fun:nss_ClearErrorStack     fun:NSSArena_Create     fun:nssCKFWInstance_Create     fun:NSSCKFWC_Initialize     fun:builtinsC_Initialize     fun:secmod_ModuleInit     fun:SECMOD_LoadPKCS11Module     fun:SECMOD_LoadModule     fun:SECMOD_LoadModule     fun:nss_Init     fun:NSS_InitReadWrite       fun:_ZN103_GLOBAL__N__b_slave_chromium_rel_chromeos_valgrind_tests_1_build_  src_base_nss_init.cc_00000000_F9261D6A16NSSInitSingletonC1Ev       fun:_ZN22DefaultSingletonTraitsIN103_GLOBAL__N__b_slave_chromium_rel_chrome  os_valgrind_tests_1_build_src_base_nss_init.cc_00000000_F9261D6A16NSSInitSi  ngletonEE3NewEv       fun:_ZN9SingletonIN103_GLOBAL__N__b_slave_chromium_rel_chromeos_valgrind_te  sts_1_build_src_base_nss_init.cc_00000000_F9261D6A16NSSInitSingletonE22Defa  ultSingletonTraitsIS1_ES1_E3getEv     fun:_ZN4base13EnsureNSSInitEv     fun:_ZN9TestSuite10InitializeEv     fun:_ZN15ChromeTestSuite10InitializeEv     fun:_ZN9TestSuite3RunEv     fun:main  } </pre>