<title>Issue 43344 -   chromium -    SPDY DCHECK failure in starting request - Project Hosting on Google Code</title> <pre> From a user:    I have a reproducible crasher in SPDY.  Not only does it crash the dev   release  it also crashes my (pretty up-to-date) presonal tree.     I initially hit this by trying to reply to a message  and attache a large   file.  When run under the debugger  it seems to crash a bit sooner.  The   dev release repro consists of:    a) Search for the message (a patent draft).  b) Select the message.  c) Reply to the message.  d) Attach a marked up file.  e) Sit for about 15 seconds *without* seeing the progress bar move much.  f) Boom.  &quot;Whoa!&quot; message.    I've restarted Chrome a bunch of times  and each time  been able to   immediately hit this (I'm unable to send mail).    When I run under the debugger  with a debug build  I crash sooner  and the   following is my stack:       chrome.dll!DebugUtil::BreakDebugger()  Line 222    C++       chrome.dll!logging::LogMessage::~LogMessage()  Line 572    C++  &gt;    chrome.dll!net::HttpNetworkTransaction::Read(net::IOBuffer *   buf=0x0b13be20  int buf_len=32768  CallbackRunner&lt;Tuple1&lt;int&gt; &gt; *   callback=0x0f3855d8)  Line 426    C++       chrome.dll!net::HttpCache::Transaction::DoNetworkRead()  Line 649 +   0x40 bytes    C++       chrome.dll!net::HttpCache::Transaction::DoLoop(int result=0)  Line 444   + 0x8 bytes    C++       chrome.dll!net::HttpCache::Transaction::ReadFromNetwork(net::IOBuffer   * data=0x0b13be20  int data_len=32768)  Line 1636    C++       chrome.dll!net::HttpCache::Transaction::Read(net::IOBuffer *   buf=0x0b13be20  int buf_len=32768  CallbackRunner&lt;Tuple1&lt;int&gt; &gt; *   callback=0x0f10bc68)  Line 323 + 0x10 bytes    C++       chrome.dll!URLRequestHttpJob::ReadRawData(net::IOBuffer *   buf=0x0b13be20  int buf_size=32768  int * bytes_read=0x0a5fc498)  Line 419   + 0x3b bytes    C++       chrome.dll!URLRequestJob::ReadRawDataForFilter(int *   bytes_read=0x0a5fc498)  Line 211 + 0x1b bytes    C++       chrome.dll!URLRequestJob::ReadFilteredData(int *   bytes_read=0x0a5fcb14)  Line 247 + 0xc bytes    C++       chrome.dll!URLRequestJob::Read(net::IOBuffer * buf=0x0f1c68c0  int   buf_size=32768  int * bytes_read=0x0a5fcb14)  Line 182 + 0xc bytes    C++       chrome.dll!URLRequest::Read(net::IOBuffer * dest=0x0f1c68c0  int   dest_size=32768  int * bytes_read=0x0a5fcb14)  Line 354    C++       chrome.dll!ResourceDispatcherHost::Read(URLRequest *   request=0x0f1436c0  int * bytes_read=0x0a5fcb14)  Line 1275    C++       chrome.dll!ResourceDispatcherHost::StartReading(URLRequest *   request=0x0f1436c0)  Line 1250 + 0x10 bytes    C++       chrome.dll!ResourceDispatcherHost::OnResponseStarted(URLRequest *   request=0x0f1436c0)  Line 1012    C++       chrome.dll!URLRequest::ResponseStarted()  Line 383 + 0x1f bytes    C++       chrome.dll!URLRequestJob::NotifyHeadersComplete()  Line 430    C++       chrome.dll!URLRequestHttpJob::NotifyHeadersComplete()  Line 597    C++       chrome.dll!URLRequestHttpJob::SaveNextCookie()  Line 755    C++       chrome.dll!URLRequestHttpJob::SaveCookiesAndNotifyHeadersComplete()    Line 747    C++       chrome.dll!URLRequestHttpJob::OnStartCompleted(int result=0)  Line 508   + 0x8 bytes    C++       chrome.dll!DispatchToMethod&lt;URLRequestHttpJob void (__thiscall   URLRequestHttpJob::*)(int) int&gt;(URLRequestHttpJob * obj=0x0f10b9c0  void   (int)* method=0x05085ca0  const Tuple1&lt;int&gt; &amp; arg={...})  Line 422 + 0x11   bytes    C++       chrome.dll!CallbackImpl&lt;URLRequestHttpJob void (__thiscall   URLRequestHttpJob::*)(int) Tuple1&lt;int&gt; &gt;::RunWithParams(const Tuple1&lt;int&gt; &amp;   params={...})  Line 118 + 0x1b bytes    C++       chrome.dll!CallbackRunner&lt;Tuple1&lt;int&gt; &gt;::Run&lt;int&gt;(const int &amp; a=0)    Line 83 + 0x1c bytes    C++       chrome.dll!net::HttpCache::Transaction::DoCallback(int rv=0)  Line 414      C++       chrome.dll!net::HttpCache::Transaction::HandleResult(int rv=0)  Line   420    C++       chrome.dll!net::HttpCache::Transaction::DoLoop(int result=0)  Line 562      C++       chrome.dll!net::HttpCache::Transaction::OnIOComplete(int result=0)    Line 1807    C++       chrome.dll!DispatchToMethod&lt;net::HttpCache::Transaction void   (__thiscall   net::HttpCache::Transaction::*)(int) int&gt;(net::HttpCache::Transaction *   obj=0x0f385480  void (int)* method=0x0502de50  const Tuple1&lt;int&gt; &amp;   arg={...})  Line 422 + 0xe bytes    C++       chrome.dll!CallbackImpl&lt;net::HttpCache::Transaction void (__thiscall   net::HttpCache::Transaction::*)(int) Tuple1&lt;int&gt; &gt;::RunWithParams(const   Tuple1&lt;int&gt; &amp; params={...})  Line 118 + 0x17 bytes    C++       chrome.dll!CallbackRunner&lt;Tuple1&lt;int&gt; &gt;::Run&lt;int&gt;(const int &amp; a=0)    Line 83 + 0x1c bytes    C++       chrome.dll!net::HttpNetworkTransaction::DoCallback(int rv=0)  Line 513      C++       chrome.dll!net::HttpNetworkTransaction::OnIOComplete(int result=0)    Line 519    C++       chrome.dll!DispatchToMethod&lt;net::HttpNetworkTransaction void   (__thiscall   net::HttpNetworkTransaction::*)(int) int&gt;(net::HttpNetworkTransaction *   obj=0x0f367800  void (int)* method=0x04f1d230  const Tuple1&lt;int&gt; &amp;   arg={...})  Line 422 + 0xe bytes    C++       chrome.dll!CallbackImpl&lt;net::HttpNetworkTransaction void (__thiscall   net::HttpNetworkTransaction::*)(int) Tuple1&lt;int&gt; &gt;::RunWithParams(const   Tuple1&lt;int&gt; &amp; params={...})  Line 118 + 0x17 bytes    C++       chrome.dll!CallbackRunner&lt;Tuple1&lt;int&gt; &gt;::Run&lt;int&gt;(const int &amp; a=0)    Line 83 + 0x1c bytes    C++       chrome.dll!net::SpdyStream::DoCallback(int rv=0)  Line 420    C++       chrome.dll!net::SpdyStream::OnResponseReceived(const   net::HttpResponseInfo &amp; response={...})  Line 223    C++       chrome.dll!net::SpdySession::Respond(const   std::map&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;   &gt; std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;   &gt; std::less&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;ch  ar&gt; &gt;   &gt; std::allocator&lt;std::pair&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; st  d::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;   &amp; headers=[16]((&quot;cache-control&quot; &quot;public max-age=31536000&quot;) (&quot;content-  encoding&quot; &quot;gzip&quot;) (&quot;content-length&quot; &quot;7097&quot;) (&quot;content-  type&quot; &quot;text/javascript; charset=utf-8&quot;) (&quot;date&quot; &quot;Wed  05 May 2010 00:32:42   GMT&quot;) (&quot;expires&quot; &quot;Thu  05 May 2011 00:32:42   GMT&quot;) (&quot;server&quot; &quot;GSE&quot;) (&quot;status&quot; &quot;200 OK&quot;) (&quot;version&quot; &quot;HTTP/1.1&quot;) (&quot;x-  content-type-options&quot; &quot;nosniff&quot;) (&quot;x-frame-options&quot; &quot;SAMEORIGIN&quot;) (&quot;x-  google-backends&quot; &quot;/bns/pr/b) ...)  scoped_refptr&lt;net::SpdyStream&gt;   stream={...})  Line 909    C++       chrome.dll!net::SpdySession::OnSynReply(const   spdy::SpdySynReplyControlFrame &amp; frame={...}  const   std::map&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;   &gt; std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;   &gt; std::less&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;ch  ar&gt; &gt;   &gt; std::allocator&lt;std::pair&lt;std::basic_string&lt;char std::char_traits&lt;char&gt; st  d::allocator&lt;char&gt; &gt; const    std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;   &amp; headers=[16]((&quot;cache-control&quot; &quot;public max-age=31536000&quot;) (&quot;content-  encoding&quot; &quot;gzip&quot;) (&quot;content-length&quot; &quot;7097&quot;) (&quot;content-  type&quot; &quot;text/javascript; charset=utf-8&quot;) (&quot;date&quot; &quot;Wed  05 May 2010 00:32:42   GMT&quot;) (&quot;expires&quot; &quot;Thu  05 May 2011 00:32:42   GMT&quot;) (&quot;server&quot; &quot;GSE&quot;) (&quot;status&quot; &quot;200 OK&quot;) (&quot;version&quot; &quot;HTTP/1.1&quot;) (&quot;x-  content-type-options&quot; &quot;nosniff&quot;) (&quot;x-frame-options&quot; &quot;SAMEORIGIN&quot;) (&quot;x-  google-backends&quot; &quot;/bns/pr/b) ...))  Line 1047    C++       chrome.dll!net::SpdySession::OnControl(const spdy::SpdyControlFrame *   frame=0x0a5fed74)  Line 1079    C++       chrome.dll!spdy::SpdyFramer::ProcessControlFramePayload(const char *   data=0x0ad08164  unsigned int len=0)  Line 346 + 0x19 bytes    C++       chrome.dll!spdy::SpdyFramer::ProcessInput(const char *   data=0x0ad08008  unsigned int len=348)  Line 185 + 0x10 bytes    C++       chrome.dll!net::SpdySession::OnReadComplete(int bytes_read=356)  Line   548 + 0x16 bytes    C++       chrome.dll!DispatchToMethod&lt;net::SpdySession void (__thiscall   net::SpdySession::*)(int) int&gt;(net::SpdySession * obj=0x0b217000  void   (int)* method=0x04fd4d00  const Tuple1&lt;int&gt; &amp; arg={...})  Line 422 + 0x11   bytes    C++       chrome.dll!CallbackImpl&lt;net::SpdySession void (__thiscall   net::SpdySession::*)(int) Tuple1&lt;int&gt; &gt;::RunWithParams(const Tuple1&lt;int&gt; &amp;   params={...})  Line 118 + 0x1b bytes    C++       chrome.dll!CallbackRunner&lt;Tuple1&lt;int&gt; &gt;::Run&lt;int&gt;(const int &amp; a=356)    Line 83 + 0x1c bytes    C++       chrome.dll!net::SSLClientSocketNSS::DoReadCallback(int rv=356)  Line   782    C++       chrome.dll!net::SSLClientSocketNSS::OnRecvComplete(int result=1418)    Line 879    C++       chrome.dll!net::SSLClientSocketNSS::BufferRecvComplete(int   result=1418)  Line 1016    C++       chrome.dll!DispatchToMethod&lt;net::SSLClientSocketNSS void (__thiscall   net::SSLClientSocketNSS::*)(int) int&gt;(net::SSLClientSocketNSS *   obj=0x0f384a00  void (int)* method=0x04fffca0  const Tuple1&lt;int&gt; &amp;   arg={...})  Line 422 + 0xe bytes    C++       chrome.dll!CallbackImpl&lt;net::SSLClientSocketNSS void (__thiscall   net::SSLClientSocketNSS::*)(int) Tuple1&lt;int&gt; &gt;::RunWithParams(const   Tuple1&lt;int&gt; &amp; params={...})  Line 118 + 0x17 bytes    C++       chrome.dll!CallbackRunner&lt;Tuple1&lt;int&gt; &gt;::Run&lt;int&gt;(const int &amp; a=1418)    Line 83 + 0x1c bytes    C++       chrome.dll!net::TCPClientSocketWin::DoReadCallback(int rv=1418)  Line   631    C++       chrome.dll!net::TCPClientSocketWin::DidCompleteRead()  Line 701    C++         chrome.dll!net::TCPClientSocketWin::Core::ReadDelegate::OnObjectSignaled(vo  id * object=0x0000052c)  Line 261    C++       chrome.dll!base::ObjectWatcher::Watch::Run()  Line 30 + 0x1c bytes      C++       chrome.dll!MessageLoop::RunTask(Task * task=0x0f37a330)  Line 328 +   0xf bytes    C++       chrome.dll!MessageLoop::DeferOrRunPendingTask(const   MessageLoop::PendingTask &amp; pending_task={...})  Line 339    C++       chrome.dll!MessageLoop::DoWork()  Line 443 + 0xc bytes    C++       chrome.dll!base::MessagePumpForIO::DoRunLoop()  Line 449 + 0x19 bytes      C++         chrome.dll!base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Deleg  ate * delegate=0x0a5ff8c0  base::MessagePumpWin::Dispatcher *   dispatcher=0x00000000)  Line 52 + 0xf bytes    C++       chrome.dll!base::MessagePumpWin::Run(base::MessagePump::Delegate *   delegate=0x0a5ff8c0)  Line 78 + 0x1c bytes    C++       chrome.dll!MessageLoop::RunInternal()  Line 204 + 0x2a bytes    C++       chrome.dll!MessageLoop::RunHandler()  Line 177    C++       chrome.dll!MessageLoop::Run()  Line 155    C++       chrome.dll!base::Thread::Run(MessageLoop * message_loop=0x0a5ff8c0)    Line 134    C++       chrome.dll!base::Thread::ThreadMain()  Line 156 + 0x16 bytes    C++       chrome.dll!`anonymous namespace'::ThreadFunc(void *   closure=0x00f89460)  Line 26 + 0xf bytes    C++       kernel32.dll!76e6e4a5()            [Frames below may be incorrect and/or missing  no symbols loaded for   kernel32.dll]           ntdll.dll!7730cfed()            ntdll.dll!7730d1ff()      </pre>