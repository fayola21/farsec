<title>Issue 38490 -   chromium -    A leak in browser_sync::SyncBackendHost::Core::NotifyFrontend() - Project Hosting on Google Code</title> <pre> From: <a href="http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio</a>    Command: src/xcodebuild/Debug/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:IPCSyncChan  nelTest.*:WebDropTargetTest.URL:WebDropTargetTest.Data:AutocompleteTextFieldEditorTest.CutCopyTest:DownloadUtilTest.AddFileToPasteboardTest:FindP  asteboardTest.ReadingFromPboardUpdatesFindText:FindPasteboardTest.SendsNotificationWhenTextChanges:RenderViewTest.MacTestCmdUp:ChromeBrowserWindo  wTest.DoesHideTitle:ClearBrowsingDataControllerTest.*:NSMenuItemAdditionsTest.TestMOnDifferentLayouts:PrefsControllerTest.GetPrefsViewForPage:Pre  fsControllerTest.GetToolbarItemForPage:PrefsControllerTest.ShowAndClose:PrefsControllerTest.SwitchToPage:RenderViewTest.OnPrintPages:RenderViewTe  st.Print*:TabStripControllerTest.AddRemoveTabs:TaskManagerWindowControllerTest.* --gtest_print_time  80 bytes in 4 blocks are definitely lost in loss record 11 841 of 15 926    operator new(unsigned long) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:235)    browser_sync::TypedUrlDataTypeController::Start(bool  CallbackRunner&lt;Tuple1&lt;browser_sync::DataTypeController::StartResult&gt; &gt;*)   (typed_url_data_type_controller.cc:83)    browser_sync::DataTypeManagerImpl::StartNextType() (data_type_manager_impl.cc:81)    browser_sync::DataTypeManagerImpl::Observe(NotificationType  NotificationSource const&amp;  NotificationDetails const&amp;)   (data_type_manager_impl.cc:197)    NotificationService::Notify(NotificationType  NotificationSource const&amp;  NotificationDetails const&amp;) (notification_service.cc:119)    void NotifyActionP&lt;NotificationType::Type&gt;::gmock_Impl&lt;void ()()&gt;::gmock_PerformImpl&lt;testing::internal::ExcessiveArg    testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg    testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg    testing::internal::ExcessiveArg&gt;(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;    testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg    testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg  testing::internal::ExcessiveArg    testing::internal::ExcessiveArg  testing::internal::ExcessiveArg) const (profile_sync_test_util.h:24)    testing::internal::ActionHelper&lt;void  NotifyActionP&lt;NotificationType::Type&gt;::gmock_Impl&lt;void ()()&gt;   &gt;::Perform(NotifyActionP&lt;NotificationType::Type&gt;::gmock_Impl&lt;void ()()&gt;*  std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;) (gmock-generated-actions.h:647)    NotifyActionP&lt;NotificationType::Type&gt;::gmock_Impl&lt;void ()()&gt;::Perform(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;) (profile_sync_test_util.h:23)    testing::Action&lt;void ()()&gt;::Perform(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;) const   (gmock-actions.h:329)    testing::internal::DoBothAction&lt;NotifyActionP&lt;NotificationType::Type&gt;  testing::internal::ReturnAction&lt;bool&gt; &gt;::Impl&lt;bool   ()()&gt;::Perform(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;) (gmock-actions.h:868)    testing::Action&lt;bool ()()&gt;::Perform(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;) const   (gmock-actions.h:329)    testing::internal::FunctionMockerBase&lt;bool ()()&gt;::PerformDefaultAction(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass&gt; const&amp;  std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;) const (gmock-  spec-builders.h:1373)    testing::internal::ActionResultHolder&lt;bool&gt; testing::internal::ActionResultHolder&lt;bool&gt;::PerformDefaultAction&lt;bool ()()    std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass&gt;   &gt;(testing::internal::FunctionMockerBase&lt;bool ()()&gt; const*  std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass&gt; const&amp;  std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;) (gmock-spec-builders.h:1283)    testing::internal::FunctionMockerBase&lt;bool ()()&gt;::InvokeWith(std::tr1::tuple&lt;std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass  std::tr1::_NullClass    std::tr1::_NullClass&gt; const&amp;) (gmock-spec-builders.h:1747)    testing::internal::FunctionMocker&lt;bool ()()&gt;::Invoke() (gmock-generated-function-mockers.h:74)    browser_sync::SyncBackendHostMock::RequestPause() (sync_backend_host_mock.h:28)    browser_sync::DataTypeManagerImpl::Start(CallbackRunner&lt;Tuple1&lt;browser_sync::DataTypeManager::StartResult&gt; &gt;*) (data_type_manager_impl.cc:59)    ProfileSyncService::StartProcessingChangesIfReady() (profile_sync_service.cc:417)    ProfileSyncService::OnBackendInitialized() (profile_sync_service.cc:280)    browser_sync::SyncBackendHost::Core::NotifyFrontend(browser_sync::SyncBackendHost::Core::FrontendNotification) (sync_backend_host.cc:205)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN12browser_sync26TypedUrlDataTypeController5StartEbP14CallbackRunnerI6Tuple1INS_18DataTypeController11StartResultEEE     fun:_ZN12browser_sync19DataTypeManagerImpl13StartNextTypeEv     fun:_ZN12browser_sync19DataTypeManagerImpl7ObserveE16NotificationTypeRK18NotificationSourceRK19NotificationDetails     fun:_ZN19NotificationService6NotifyE16NotificationTypeRK18NotificationSourceRK19NotificationDetails       fun:_ZNK13NotifyActionPIN16NotificationType4TypeEE10gmock_ImplIFvvEE17gmock_PerformImplIN7testing8internal12ExcessiveArgES9_S9_S9_S9_S9_S9_S9_S9_  S9_EEvRKNSt3tr15tupleINSA_10_NullClassESC_SC_SC_SC_SC_SC_SC_SC_SC_EET_T0_T1_T2_T3_T4_T5_T6_T7_T8_       fun:_ZN7testing8internal12ActionHelperIvN13NotifyActionPIN16NotificationType4TypeEE10gmock_ImplIFvvEEEE7PerformEPS8_RKNSt3tr15tupleINSB_10_NullCl  assESD_SD_SD_SD_SD_SD_SD_SD_SD_EE     fun:_ZN13NotifyActionPIN16NotificationType4TypeEE10gmock_ImplIFvvEE7PerformERKNSt3tr15tupleINS6_10_NullClassES8_S8_S8_S8_S8_S8_S8_S8_S8_EE     fun:_ZNK7testing6ActionIFvvEE7PerformERKNSt3tr15tupleINS3_10_NullClassES5_S5_S5_S5_S5_S5_S5_S5_S5_EE       fun:_ZN7testing8internal12DoBothActionI13NotifyActionPIN16NotificationType4TypeEENS0_12ReturnActionIbEEE4ImplIFbvEE7PerformERKNSt3tr15tupleINSC_1  0_NullClassESE_SE_SE_SE_SE_SE_SE_SE_SE_EE     fun:_ZNK7testing6ActionIFbvEE7PerformERKNSt3tr15tupleINS3_10_NullClassES5_S5_S5_S5_S5_S5_S5_S5_S5_EE     fun:_ZNK7testing8internal18FunctionMockerBaseIFbvEE20PerformDefaultActionERKNSt3tr15tupleINS4_10_NullClassES6_S6_S6_S6_S6_S6_S6_S6_S6_EERKSs       fun:_ZN7testing8internal18ActionResultHolderIbE20PerformDefaultActionIFbvENSt3tr15tupleINS5_10_NullClassES7_S7_S7_S7_S7_S7_S7_S7_S7_EEEES2_PKNS0_  18FunctionMockerBaseIT_EERKT0_RKSs     fun:_ZN7testing8internal18FunctionMockerBaseIFbvEE10InvokeWithERKNSt3tr15tupleINS4_10_NullClassES6_S6_S6_S6_S6_S6_S6_S6_S6_EE     fun:_ZN7testing8internal14FunctionMockerIFbvEE6InvokeEv     fun:_ZN12browser_sync19SyncBackendHostMock12RequestPauseEv     fun:_ZN12browser_sync19DataTypeManagerImpl5StartEP14CallbackRunnerI6Tuple1INS_15DataTypeManager11StartResultEEE     fun:_ZN18ProfileSyncService29StartProcessingChangesIfReadyEv     fun:_ZN18ProfileSyncService20OnBackendInitializedEv     fun:_ZN12browser_sync15SyncBackendHost4Core14NotifyFrontendENS1_20FrontendNotificationE  }   </pre>