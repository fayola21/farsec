<title>Issue 25676 -   chromium -    Mac: crash entering full screen mode on Snow Leopard - Project Hosting on Google Code</title> <pre>   1. Run Chromium.  2. Shift-Cmd-F to enter full screen mode.      Full screen mode. It crashes instead.    This is Chromium <a href="/p/chromium/source/detail?r=29935">r29935</a> (off the trunk; local debug build) on 10.6.1. The exact same build works fine on Leopard (10.5.8).    [67539:2575:733529687660452:ERROR:/Users/vtl/cr/src/chrome/browser/chrome_application_mac.mm(42)] Someone is preparing to raise an exception!  NSInvalidArgumentException *** *** -[NSCFDictionary   setObject:forKey:]: attempt to insert nil value (key: NSColor)  [67539:2575:733529687716999:FATAL:/Users/vtl/cr/src/chrome/browser/chrome_application_mac.mm(45)] Check failed: false.   (gdb) bt  #0  DebugUtil::BreakDebugger () at /Users/vtl/cr/src/base/debug_util_posix.cc:184  #1  0x00018956 in logging::LogMessage::~LogMessage (this=0xbfffc460) at /Users/vtl/cr/src/base/logging.cc:539  #2  0x001c4d54 in -[NSException(NSExceptionSwizzle) chromeInitWithName:reason:userInfo:] (self=0x9e30e40  _cmd=0x92d39c1e  aName=0xa080fbc8  aReason=0x9e29cf0  someUserInfo=0x0) at   /Users/vtl/cr/src/chrome/browser/chrome_application_mac.mm:45  #3  0x96ae3317 in +[NSException exceptionWithName:reason:userInfo:] ()  #4  0x96ae32b0 in +[NSException raise:format:arguments:] ()  #5  0x96ae322a in +[NSException raise:format:] ()  #6  0x98d2b8d7 in -[NSCFDictionary setObject:forKey:] ()  #7  0x918b0e8d in -[NSTextFieldCell _textAttributes] ()  #8  0x91868c5f in __NSGetStringAndAttributesFromTextCell ()  #9  0x918dd28e in _NSDrawTextCell ()  #10 0x918e75ed in -[NSTextFieldCell drawInteriorWithFrame:inView:] ()  #11 0x918e718f in -[NSTextFieldCell drawWithFrame:inView:] ()  #12 0x918e189e in -[NSControl drawRect:] ()  #13 0x918d9ce1 in -[NSView _drawRect:clip:] ()  #14 0x918d897f in -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] ()  #15 0x918d8cb4 in -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] ()  #16 0x918d8cb4 in -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] ()  #17 0x918d8cb4 in -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] ()  #18 0x918d8cb4 in -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] ()  #19 0x918d6e9e in -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()  #20 0x91975b1b in -[NSNextStepFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()  #21 0x918d3359 in -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] ()  #22 0x91833f26 in -[NSView displayIfNeeded] ()  #23 0x917e7bbd in -[NSNextStepFrame displayIfNeeded] ()  #24 0x917fd292 in -[NSWindow displayIfNeeded] ()  #25 0x917fbd30 in -[NSWindow _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] ()  #26 0x917fb892 in -[NSWindow orderWindow:relativeTo:] ()  #27 0x917f9054 in -[NSWindow makeKeyAndOrderFront:] ()  #28 0x001ea655 in -[BrowserWindowController setFullscreen:] (self=0x6613ba0  _cmd=0x1ab9ea1  fullscreen=1 '001') at /Users/vtl/cr/src/chrome/browser/cocoa/browser_window_controller.mm:952  #29 0x001e8a39 in BrowserWindowCocoa::SetFullscreen (this=0x7b03500  fullscreen=true) at /Users/vtl/cr/src/chrome/browser/cocoa/browser_window_cocoa.mm:155  #30 0x0017af02 in Browser::ToggleFullscreenMode (this=0x6612010) at /Users/vtl/cr/src/chrome/browser/browser.cc:888  #31 0x0018012f in Browser::ExecuteCommandWithDisposition (this=0x6612010  id=34030  disposition=CURRENT_TAB) at /Users/vtl/cr/src/chrome/browser/browser.cc:1361  #32 0x0018045a in Browser::ExecuteCommand (this=0x6612010  id=34030) at /Users/vtl/cr/src/chrome/browser/browser.cc:1476  #33 0x001ebf0e in -[BrowserWindowController commandDispatch:] (self=0x6613ba0  _cmd=0x1ae93e2  sender=0x7817d00) at /Users/vtl/cr/src/chrome/browser/cocoa/browser_window_controller.mm:615  #34 0x9184314a in -[NSApplication sendAction:to:from:] ()  #35 0x001c4617 in -[CrApplication sendAction:to:from:] (self=0x7811290  _cmd=0x91f92d50  anAction=0x1ae93e2  aTarget=0x0  sender=0x7817d00) at /Users/vtl/cr/src/chrome/browser/chrome_application_mac.mm:243  #36 0x91842ffd in -[NSMenuItem _corePerformAction] ()  #37 0x91842cee in -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] ()  #38 0x9193e74b in -[NSMenu _performActionWithHighlightingForItemAtIndex:] ()  #39 0x9193def7 in -[NSMenu performKeyEquivalent:] ()  #40 0x9193c6a1 in -[NSApplication _handleKeyEquivalent:] ()  #41 0x918326c6 in -[NSApplication sendEvent:] ()  #42 0x001c42a5 in -[CrApplication sendEvent:] (self=0x7811290  _cmd=0x91f92d64  event=0x7a17d90) at /Users/vtl/cr/src/chrome/browser/chrome_application_mac.mm:258  #43 0x917c66fb in -[NSApplication run] ()  #44 0x006dfcb6 in base::MessagePumpNSApplication::DoRun (this=0x781d9a0  delegate=0xbffff078) at /Users/vtl/cr/src/base/message_pump_mac.mm:556  #45 0x006e006f in base::MessagePumpCFRunLoopBase::Run (this=0x781d9a0  delegate=0xbffff078) at /Users/vtl/cr/src/base/message_pump_mac.mm:171  #46 0x006d89d4 in MessageLoop::RunInternal (this=0xbffff078) at /Users/vtl/cr/src/base/message_loop.cc:199  #47 0x006d89ef in MessageLoop::RunHandler (this=0xbffff078) at /Users/vtl/cr/src/base/message_loop.cc:181  #48 0x006d8a53 in MessageLoop::Run (this=0xbffff078) at /Users/vtl/cr/src/base/message_loop.cc:155  #49 0x001926e8 in (anonymous namespace)::RunUIMessageLoop (browser_process=0x781fcb0) at /Users/vtl/cr/src/chrome/browser/browser_main.cc:153  #50 0x00194a88 in BrowserMain (parameters=@0xbffff5b4) at /Users/vtl/cr/src/chrome/browser/browser_main.cc:884  #51 0x0003ddb1 in ChromeMain (argc=1  argv=0xbffff6d4) at /Users/vtl/cr/src/chrome/app/chrome_dll_main.cc:601  #52 0x00001f5e in main (argc=1  argv=0xbffff6d4) at /Users/vtl/cr/src/chrome/app/chrome_exe_main.mm:17  #53 0x00001f1a in start ()   </pre>