<title>Issue 37149 -   chromium -    chrome.tabs.onUpdated.addListener extension being called random times for a page with frames. - Project Hosting on Google Code</title> <pre> Version: Google Chrome 5.0.335.1 (Official Build 39691) dev    Somehow the extension system onUpdate is returning random times the complete events  it should just return one. In the   example below  you can see that I pressed refresh 4 times  and I got complete event fired in random.    __________________________________________________  ==================================================  Data:  __________________________________________________  ==================================================    ==================================================  [Notice that there are 2 complete onUpdate events]  ==================================================  loading url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://www.google.ca/">http://www.google.ca/</a>  From a content script: <a href="http://www.uottawa.ca/">http://www.uottawa.ca/</a>  From a content script: <a href="http://static.ak.facebook.com/common/redirectiframe.html">http://static.ak.facebook.com/common/redirectiframe.html</a>  From a content script: <a href="http://ca.yahoo.com/?p=us">http://ca.yahoo.com/?p=us</a>  From a content script: <a href="http://www.facebook.com/">http://www.facebook.com/</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://13.channel74.facebook.com/iframe/10?">http://13.channel74.facebook.com/iframe/10?</a>  r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz8QSB%2Fhash%2Fcy5bodok.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frs  rc.php%2FzEI34%2Fhash%2Fb858b4wv.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz2OLY%2Fhash%2Fdyimsnp5.js&amp;r=htt  p%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz6F6I%2Fhash%2Fbxdm2bja.js      ==================================================  [Notice that there are 3 complete onUpdate events]  ==================================================  loading url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://www.google.ca/">http://www.google.ca/</a>  From a content script: <a href="http://www.uottawa.ca/">http://www.uottawa.ca/</a>  From a content script: <a href="http://ca.yahoo.com/?p=us">http://ca.yahoo.com/?p=us</a>  From a content script: <a href="http://static.ak.facebook.com/common/redirectiframe.html">http://static.ak.facebook.com/common/redirectiframe.html</a>  From a content script: <a href="http://www.facebook.com/">http://www.facebook.com/</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://13.channel74.facebook.com/iframe/10?">http://13.channel74.facebook.com/iframe/10?</a>  r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz8QSB%2Fhash%2Fcy5bodok.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frs  rc.php%2FzEI34%2Fhash%2Fb858b4wv.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz2OLY%2Fhash%2Fdyimsnp5.js&amp;r=htt  p%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz6F6I%2Fhash%2Fbxdm2bja.js      ==================================================  [Notice that there are 2 complete onUpdate event]  ==================================================  loading url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://www.google.ca/">http://www.google.ca/</a>  From a content script: <a href="http://www.uottawa.ca/">http://www.uottawa.ca/</a>  From a content script: <a href="http://ca.yahoo.com/?p=us">http://ca.yahoo.com/?p=us</a>  From a content script: <a href="http://static.ak.facebook.com/common/redirectiframe.html">http://static.ak.facebook.com/common/redirectiframe.html</a>  From a content script: <a href="http://www.facebook.com/">http://www.facebook.com/</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://13.channel74.facebook.com/iframe/10?">http://13.channel74.facebook.com/iframe/10?</a>  r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz8QSB%2Fhash%2Fcy5bodok.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frs  rc.php%2FzEI34%2Fhash%2Fb858b4wv.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz2OLY%2Fhash%2Fdyimsnp5.js&amp;r=htt  p%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz6F6I%2Fhash%2Fbxdm2bja.js      ==================================================  [Notice that there are 1 complete onUpdate events]  ==================================================  loading url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://www.google.ca/">http://www.google.ca/</a>  From a content script: <a href="http://www.uottawa.ca/">http://www.uottawa.ca/</a>  From a content script: <a href="http://static.ak.facebook.com/common/redirectiframe.html">http://static.ak.facebook.com/common/redirectiframe.html</a>  From a content script: <a href="http://www.facebook.com/">http://www.facebook.com/</a>  From a content script: <a href="http://ca.yahoo.com/?p=us">http://ca.yahoo.com/?p=us</a>  complete url: <a href="http://mysite.com/sandbox/chrome/frame.html">http://mysite.com/sandbox/chrome/frame.html</a>  From a content script: <a href="http://13.channel74.facebook.com/iframe/10?">http://13.channel74.facebook.com/iframe/10?</a>  r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz8QSB%2Fhash%2Fcy5bodok.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frs  rc.php%2FzEI34%2Fhash%2Fb858b4wv.js&amp;r=http%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz2OLY%2Fhash%2Fdyimsnp5.js&amp;r=htt  p%3A%2F%2Fb.static.ak.fbcdn.net%2Frsrc.php%2Fz6F6I%2Fhash%2Fbxdm2bja.js      __________________________________________________  ==================================================  Extension:  __________________________________________________  ==================================================    manifest.json excerpt  --------------------------------------    &quot;content_scripts&quot;: [      {        &quot;matches&quot;: [&quot;http://*/*&quot;        &quot;js&quot;: [&quot;test.js&quot;]         &quot;all_frames&quot;: true       }    ]         content script  test.js  --------------------------------------  chrome.extension.sendRequest({method: &quot;hello&quot;  url: window.location.toString()}  function(response) {});        background page  background.html  --------------------------------------  chrome.tabs.onUpdated.addListener(function(tabId  changeInfo  tab) {    console.log(changeInfo.status + ' url: ' + tab.url + ' change: ' + changeInfo.url);  });    chrome.extension.onRequest.addListener(    function(request  sender  sendResponse) {      if (request.method == &quot;hello&quot; &amp;&amp; sender.tab) {        console.log(&quot;From a content script: &quot; + request.url);       }       sendResponse({}); // snub them.  }); </pre>