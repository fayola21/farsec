<title>Issue 38352 -   chromium -    need more robust handling of Preferences errors - Project Hosting on Google Code</title> <pre> On startup  Chrome does no error handling when it reads Preferences.  If it   can't read the file  it just sets Preferences to their default values.  If   Chrome is later able to write to Preferences  then it will clobber your old   values.  This shows up more visibly in Extensions  causing them to simply   be removed from the user's system (see <a title="Extensions disappear from hard disk  but still (partially) show up in UI" class=closed_ref href="/p/chromium/issues/detail?id=31670"> bug 31670 </a> and <a title="Attempt heroic recovery of extensions in cases where Preferences file gets corrupted and thrown out."  href="/p/chromium/issues/detail?id=32895">bug 32895</a>).    Here's a proposal for how we can address this:  step (1)  * add histograms to measure how frequently this is happening on which   platforms    step (2)  * Set a bit in Preferences indicating that Preferences aren't correct.  * Don't save Preferences when you're in this state.  * Don't garbage collect extensions when you're in this state  * Alert the user that no Preferences are being saved and that they won't   have access to their extensions when in this state    step (3)  (6) Make a periodic backup of Preferences to protect against file   corruption.  (7) If corruption is detected  attempt to restore from backup  (8) If we're simply unable to read Preferences  stay in read-only mode  but   read from the backup file (then you'll have access to extensions  and your   old settings).     </pre>