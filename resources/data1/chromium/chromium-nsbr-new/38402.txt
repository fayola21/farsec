<title>Issue 38402 -   chromium -    Heap leak checker reports memory leaks in ProfileSyncFactoryImpl::CreateProfileSyncService (unit_tests) - Project Hosting on Google Code</title> <pre> To reproduce  build unit_tests with 'linux_use_heapchecker' GYP variable  set to 1.    $ HEAPCHECK=strict sconsbuild/Debug/unit_tests  --gtest_filter=RenderViewHostManagerTest.*  ...  [==========] 5 tests from 1 test case ran. (230 ms total)  [  PASSED  ] 5 tests.      YOU HAVE 15 DISABLED TESTS      YOU HAVE 1 FLAKY TEST    Leak check _main_ detected leaks of 312 bytes in 3 objects  The 3 largest leaks:  Leak of 104 bytes in 1 objects allocated from:  	@ 18340ee ProfileSyncFactoryImpl::CreateProfileSyncService  	@ 2fa8774 TestingProfile::CreateProfileSyncService  	@ 122e37e RenderViewHostManagerTest_DOMUI_Test::TestBody  	@ 1cc7367 testing::Test::Run  	@ 1ccaad8 testing::internal::TestInfoImpl::Run  	@ 1ccac0e testing::TestCase::Run  	@ 1ccb66d testing::internal::UnitTestImpl::RunAllTests  	@ 1ccb7bd testing::UnitTest::Run  	@ 1bc388f TestSuite::Run  	@ 1bc2359 main  	@ 7fec46a671c4 __libc_start_main  Leak of 104 bytes in 1 objects allocated from:  	@ 18340ee ProfileSyncFactoryImpl::CreateProfileSyncService  	@ 2fa8774 TestingProfile::CreateProfileSyncService  	@ 12303f5  RenderViewHostManagerTest_AlwaysSendEnableViewSourceMode_Test::TestBody  	@ 1cc7367 testing::Test::Run  	@ 1ccaad8 testing::internal::TestInfoImpl::Run  	@ 1ccac0e testing::TestCase::Run  	@ 1ccb66d testing::internal::UnitTestImpl::RunAllTests  	@ 1ccb7bd testing::UnitTest::Run  	@ 1bc388f TestSuite::Run  	@ 1bc2359 main  	@ 7fec46a671c4 __libc_start_main  Leak of 104 bytes in 1 objects allocated from:  	@ 18340ee ProfileSyncFactoryImpl::CreateProfileSyncService  	@ 2fa8774 TestingProfile::CreateProfileSyncService  	@ 1230f33 RenderViewHostManagerTest_NewTabPageProcesses_Test::TestBody  	@ 1cc7367 testing::Test::Run  	@ 1ccaad8 testing::internal::TestInfoImpl::Run  	@ 1ccac0e testing::TestCase::Run  	@ 1ccb66d testing::internal::UnitTestImpl::RunAllTests  	@ 1ccb7bd testing::UnitTest::Run  	@ 1bc388f TestSuite::Run  	@ 1bc2359 main  	@ 7fec46a671c4 __libc_start_main    The same leaks can be observed at the buildbot log page  e.g.  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3528/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3528/steps/heapcheck%20test:%20unit/logs/stdio</a> </pre>