<title>Issue 39016 -   chromium -    Heap leak checker reports a memory leak in RenderThreadTest - Project Hosting on Google Code</title> <pre> See the heapchecker bot log:  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3425/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3425/steps/heapcheck%20test:%20unit/logs/stdio</a>    Leak of 7632 bytes in 1 objects allocated from:  	@ 0x11c16d9 IPC::Channel::Channel  	@ 0x11c345f IPC::ChannelProxy::Context::CreateChannel  	@ 0x11c34c7 IPC::ChannelProxy::Init  	@ 0x11c3680 IPC::ChannelProxy::ChannelProxy  	@ 0x11cb9fc IPC::SyncChannel::SyncChannel  	@ 0x1073abf ChildThread::Init  	@ 0x1073cf3 ChildThread::ChildThread  	@ 0x10e1dee RenderThread::RenderThread  	@ 0x94f366 ::RenderThreadTest::SetUp  	@ 0x128f48f testing::Test::Run  	@ 0x1292c38 testing::internal::TestInfoImpl::Run  	@ 0x1292d6e testing::TestCase::Run  	@ 0x12937cd testing::internal::UnitTestImpl::RunAllTests  	@ 0x129391d testing::UnitTest::Run  	@ 0x118b9ef TestSuite::Run  	@ 0x118a4b9 main    Leak of 512 bytes in 1 objects allocated from:  	@ 0x11cf7c2 __gnu_cxx::new_allocator::allocate  	@ 0x11cf7ee std::_Deque_base::_M_allocate_node  	@ 0x11cf91f std::_Deque_base::_M_create_nodes  	@ 0x11cf9f9 std::_Deque_base::_M_initialize_map  	@ 0x11cfa9c std::_Deque_base::_Deque_base  	@ 0x11cfac0 std::deque::deque  	@ 0x11cb937 IPC::SyncChannel::SyncContext::SyncContext  	@ 0x11cb9df IPC::SyncChannel::SyncChannel  	@ 0x1073abf ChildThread::Init  	@ 0x1073cf3 ChildThread::ChildThread  	@ 0x10e1dee RenderThread::RenderThread  	@ 0x94f366 ::RenderThreadTest::SetUp  	@ 0x128f48f testing::Test::Run  	@ 0x1292c38 testing::internal::TestInfoImpl::Run  	@ 0x1292d6e testing::TestCase::Run  	@ 0x12937cd testing::internal::UnitTestImpl::RunAllTests  	@ 0x129391d testing::UnitTest::Run  	@ 0x118b9ef TestSuite::Run  	@ 0x118a4b9 main  	@ 0x2ab94ed861c4 __libc_start_main    Leak of 296 bytes in 1 objects allocated from:  	@ 0x11cb9c1 IPC::SyncChannel::SyncChannel  	@ 0x1073abf ChildThread::Init  	@ 0x1073cf3 ChildThread::ChildThread  	@ 0x10e1dee RenderThread::RenderThread  	@ 0x94f366 ::RenderThreadTest::SetUp  	@ 0x128f48f testing::Test::Run  	@ 0x1292c38 testing::internal::TestInfoImpl::Run  	@ 0x1292d6e testing::TestCase::Run  	@ 0x12937cd testing::internal::UnitTestImpl::RunAllTests  	@ 0x129391d testing::UnitTest::Run  	@ 0x118b9ef TestSuite::Run  	@ 0x118a4b9 main  	@ 0x2ab94ed861c4 __libc_start_main    Leak of 184 bytes in 1 objects allocated from:  	@ 0x11d08da IPC::SyncChannel::ReceivedSyncMsgQueue::AddContext  	@ 0x11cb955 IPC::SyncChannel::SyncContext::SyncContext  	@ 0x11cb9df IPC::SyncChannel::SyncChannel  	@ 0x1073abf ChildThread::Init  	@ 0x1073cf3 ChildThread::ChildThread  	@ 0x10e1dee RenderThread::RenderThread  	@ 0x94f366 ::RenderThreadTest::SetUp  	@ 0x128f48f testing::Test::Run  	@ 0x1292c38 testing::internal::TestInfoImpl::Run  	@ 0x1292d6e testing::TestCase::Run  	@ 0x12937cd testing::internal::UnitTestImpl::RunAllTests  	@ 0x129391d testing::UnitTest::Run  	@ 0x118b9ef TestSuite::Run  	@ 0x118a4b9 main  	@ 0x2ab94ed861c4 __libc_start_main    etc.    I believe RenderThreadTest::TearDown  (<a href="http://src.chromium.org/viewvc/chrome/trunk/src//chrome/renderer/render_thread_unittest.cc">http://src.chromium.org/viewvc/chrome/trunk/src//chrome/renderer/render_thread_unittest.cc</a>)  is just not being run.      BTW  these reports are flaky on Linux:  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3421/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3421/steps/heapcheck%20test:%20unit/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3422/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3422/steps/heapcheck%20test:%20unit/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3423/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3423/steps/heapcheck%20test:%20unit/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3424/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3424/steps/heapcheck%20test:%20unit/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3425/steps/heapcheck%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Heapcheck/builds/3425/steps/heapcheck%20test:%20unit/logs/stdio</a>   </pre>