<title>Issue 38053 -   chromium -    Any browser test can get stuck and require human intervention - Project Hosting on Google Code</title> <pre> This happens randomly with some frequency.  It's is not specific to any one test.  For example this morning 6 bots were all stuck in this  all on different individual tests that are part of browser_tests.    There appears to be some race condition where a test can get started  and when it waits for some notification it misses it.  This results in the test spinning pretty much forever waiting to the condition to get noticed and   never happens.  Normally our testing script would kill the test after some length of time if there way no output  but the problem is some of our infrastructure writes INFO messages and the code patterns are just right   such that a line of output happens every few minutes  and we don't kill the test.  This leaves the bot stuck running the test until someone notices and for kill the test so things will move along. So...    Can someone that knows the building blocks for all the browser tests  please make sure every wait loop includes a reasonable timeout so no matter what happens in the launch process the test will fail/bail?  Once that's   in  it might be nice to fix the root race condition  but having the timeout seems like the more important first step since whatever a test does could always cause a loop in the other code too.    Here are the studio links for everything that got stuck this morning:    <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Linux/builds/10586/steps/browser_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Linux/builds/10586/steps/browser_tests/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Linux%20x64/builds/6117/steps/browser_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Linux%20x64/builds/6117/steps/browser_tests/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall/builders/Mac10.6%20Tests%20%28dbg%29%283%29/builds/797/steps/browser_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Mac10.6%20Tests%20%28dbg%29%283%29/builds/797/steps/browser_tests/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall/builders/Modules%20Linux/builds/17147/steps/browser_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Modules%20Linux/builds/17147/steps/browser_tests/logs/stdio</a>  <a href="http://build.chromium.org/buildbot/waterfall/builders/Linux%20Builder%20%28Views%20dbg%29/builds/8259/steps/browser_tests/logs/stdio">http://build.chromium.org/buildbot/waterfall/builders/Linux%20Builder%20%28Views%20dbg%29/builds/8259/steps/browser_tests/logs/stdio</a>    Don't let the fact that that's mostly Linux confuse things  I've seen this on Linux  Mac  Windows.    And here is a sample of the output that keeps the test from getting killed:    [11901:11908:0312/043214:7048903184424:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/043714:7049203188378:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/044214:7049503193858:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/044714:7049803197885:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/045214:7050103200411:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/045714:7050403204405:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State  [11901:11908:0312/050214:7050703208445:INFO:/b/slave/sub-rel-linux/build/src/chrome/browser/important_file_writer.cc(70)] successfully saved /tmp/org.chromium.uqykKa/test_user_data/Local State    Again  I don't think there is anything wrong with this  the problem is the browser_tests building blocks that wait in loops without timeouts. </pre>