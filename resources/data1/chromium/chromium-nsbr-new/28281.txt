<title>Issue 28281 -   chromium -    NetUtilTest.FileURLConversion and NetUtilTest.GetSuggestedFilename fail on Linux - Project Hosting on Google Code</title> <pre> When I run net_unittests on 64-bit Ubuntu 8.04    NetUtilTest.FileURLConversion and NetUtilTest.GetSuggestedFilename fail.    The non-ASCII characters in the expected and actual test results make me   suspect these failures may have to do with the locale of my computer:    [----------] 23 tests from NetUtilTest  [ RUN      ] NetUtilTest.FileURLConversion  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:483:  Failure  Value of: file_url.spec()   Actual: &quot;file:///latin1/caf%E9%DD.txt&quot;  Expected: round_trip_cases[i].url  Which is: &quot;file:///latin1/caf%C3%A9%C3%9D.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:483:  Failure  Value of: file_url.spec()   Actual: &quot;file:///&quot;  Expected: round_trip_cases[i].url  Which is: &quot;file:///otherlatin/caf%C4%99.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:487:  Failure  Value of: output.ToWStringHack()   Actual: L&quot;/&quot;  Expected: round_trip_cases[i].file  Which is: L&quot;/otherlatin/caf��_�_��.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:483:  Failure  Value of: file_url.spec()   Actual: &quot;file:///&quot;  Expected: round_trip_cases[i].url  Which is: &quot;file:///greek/%CE%B1%CE%B2%CE%B3.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:487:  Failure  Value of: output.ToWStringHack()   Actual: L&quot;/&quot;  Expected: round_trip_cases[i].file  Which is: L&quot;/greek/��__뱕�__��__��__��__.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:483:  Failure  Value of: file_url.spec()   Actual: &quot;file:///&quot;  Expected: round_trip_cases[i].url  Which is:   &quot;file:///Chinese/%E6%89%80%E6%9C%89%E4%B8%AD%E6%96%87%E7%BD%91%E9%A1%B5.doc  &quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:487:  Failure  Value of: output.ToWStringHack()   Actual: L&quot;/&quot;  Expected: round_trip_cases[i].file  Which is: L&quot;/Chinese/��__��_��_��_���_��_��_��_��_��__��_��_ ��__��_��_��_��_��_��_��__��__��_��_��_��_��_��.doc&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:483:  Failure  Value of: file_url.spec()   Actual: &quot;file:///&quot;  Expected: round_trip_cases[i].url  Which is: &quot;file:///plane1/%F0%9D%90%80%F0%9D%90%81.txt&quot;  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:487:  Failure  Value of: output.ToWStringHack()   Actual: L&quot;/&quot;  Expected: round_trip_cases[i].file  Which is: L&quot;/plane1/��_��_  ��_��Օ�_   .txt&quot;  [  FAILED  ] NetUtilTest.FileURLConversion (2 ms)  ...  [ RUN      ] NetUtilTest.GetSuggestedFilename  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;��_��_��_��_��_��Ε�_��_  ��_��_��_��_��_��Ε�_��_ .jpg&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 15: <a href="http://www.google.com/">http://www.google.com/</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;��_��_��_��_��_��Ε�_��_  ��_��_��_��_��_��Ε�_��_ .jpg&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 16:   <a href="http://www.google.com/%EC%98%88%EC%88%A0%20%EC%98%88%EC%88%A0.jpg">http://www.google.com/%EC%98%88%EC%88%A0%20%EC%98%88%EC%88%A0.jpg</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;www.google.com&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 17: <a href="http://www.google.com/">http://www.google.com/</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;��_��_��_�Օ�_덕�_��_��_3.png&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 18: <a href="http://www.google.com/">http://www.google.com/</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;caf��_��_�.png&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;caf��_��_.png&quot;  Iteration 19: <a href="http://www.example.com/images?id=3">http://www.example.com/images?id=3</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;caf��__�.png&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 20: <a href="http://www.example.com/images?id=3">http://www.example.com/images?id=3</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;��__��_�_��__��_��_��__��__.zip&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 21: <a href="http://www.example.com/file?id=3">http://www.example.com/file?id=3</a>  /usr/local/google/home/wtc/chrome1/src/net/base/net_util_unittest.cc:1044:  Failure  Value of: filename.value()   Actual: &quot;download&quot;  Expected: base::SysWideToNativeMB(test_cases[i].expected_filename)  Which is: &quot;&quot;  Iteration 27: data: looks/like/a.path  [  FAILED  ] NetUtilTest.GetSuggestedFilename (3 ms) </pre>