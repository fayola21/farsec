<title>Issue 24885 -   chromium -    DCHECK is not friendly to googletest's &quot;death tests&quot; on Windows - Project Hosting on Google Code</title> <pre> Hi     I've tried writing a death test verifying that DCHECK fails under certain   conditions. It worked ok on both Linux and Mac.  However  it was consistently failing on Windows trybot.    After investigating the issue for a while  I've found out that the   following test fails on Windows:    TEST(MyDeathTest  Test1) {      ASSERT_DEBUG_DEATH(DCHECK(false)  &quot;&quot;);    }    I've tried running a DCHECK-failing test:    TEST(ThisTestWillFail  Test2) {      DCHECK(false);    }  It exits with &quot;0&quot; exit code on Windows and &quot;1&quot; on Linux/Mac.    However  the following death test doesn't pass on Windows:    TEST(MyDeathTest  Test3) {      ASSERT_EXIT(DCHECK(false)                   ::testing::ExitedWithCode(GTEST_OS_WINDOWS ? 0 : 1)                   &quot;&quot;);  // or &quot;Check failed&quot;    } </pre>