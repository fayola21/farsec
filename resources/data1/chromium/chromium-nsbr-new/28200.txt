<title>Issue 28200 -   chromium -    Memory leak in WebKit::WebSharedWorkerImpl - Project Hosting on Google Code</title> <pre> Started showing up today between <a href="/p/chromium/source/detail?r=32391">r32391</a> and <a href="/p/chromium/source/detail?r=32407">r32407</a>. It's a bit flaky and  doesn't show up on every run  but enough to make the tree red.    14:49:18 memcheck_analyze.py [ERROR] FAIL! There were 1 errors:  14:49:18 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command:  /b/slave/chromium-rel-linux-valgrind-tests-3/build/src/sconsbuild/Release/chrome  --type=worker --channel=12846.6cea9d8.879820284  8 bytes in 1 blocks are definitely lost in loss record 102 of 1 863    malloc  (ome/chrome-bot/valgrind-10880-redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:195)    malloc (uilder/build/src/base/process_util_linux.cc:577)    WTF::fastMalloc(unsigned int)  (uilder/build/src/third_party/WebKit/JavaScriptCore/wtf/FastMalloc.cpp:233)    WTF::FastAllocBase::operator new(unsigned int)  (uilder/build/src/third_party/WebKit/JavaScriptCore/wtf/FastAllocBase.h:96)     WebCore::MessagePortChannel::create(WTF::PassRefPtr&lt;WebCore::PlatformMessagePortChannel&gt;)  (uilder/build/src/third_party/WebKit/WebKit/chromium/src/PlatformMessagePortChannel.cpp:49)    WebKit::WebSharedWorkerImpl::connect(WebKit::WebMessagePortChannel*   WebKit::WebSharedWorker::ConnectListener*)  (uilder/build/src/third_party/WebKit/WebKit/chromium/src/WebSharedWorkerImpl.cpp:76)    WebSharedWorkerStub::OnConnect(int  int)  (uilder/build/src/chrome/worker/websharedworker_stub.cc:51)    void DispatchToMethod&lt;WebSharedWorkerStub  void  (WebSharedWorkerStub::*)(int  int)  int  int&gt;(WebSharedWorkerStub*  void  (WebSharedWorkerStub::*)(int  int)  Tuple2&lt;int  int&gt; const&amp;)  (uilder/build/src/base/tuple.h:429)    bool IPC::MessageWithTuple&lt;Tuple2&lt;int  int&gt;  &gt;::Dispatch&lt;WebSharedWorkerStub  void (WebSharedWorkerStub::*)(int   int)&gt;(IPC::Message const*  WebSharedWorkerStub*  void  (WebSharedWorkerStub::*)(int  int))  (uilder/build/src/ipc/ipc_message_utils.h:999)    WebSharedWorkerStub::OnMessageReceived(IPC::Message const&amp;)  (uilder/build/src/chrome/worker/websharedworker_stub.cc:33)    MessageRouter::RouteMessage(IPC::Message const&amp;)  (uilder/build/src/chrome/common/message_router.cc:40)    MessageRouter::OnMessageReceived(IPC::Message const&amp;)  (uilder/build/src/chrome/common/message_router.cc:31)    ChildThread::OnMessageReceived(IPC::Message const&amp;)  (uilder/build/src/chrome/common/child_thread.cc:118)    IPC::ChannelProxy::Context::OnDispatchMessage(IPC::Message const&amp;)  (uilder/build/src/ipc/ipc_channel_proxy.cc:204)    void DispatchToMethod&lt;IPC::ChannelProxy::Context  void  (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)   IPC::Message&gt;(IPC::ChannelProxy::Context*  void  (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt;  const&amp;) (uilder/build/src/base/tuple.h:422)    RunnableMethod&lt;IPC::ChannelProxy::Context  void  (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt;  &gt;::Run() (uilder/build/src/base/task.h:284)    MessageLoop::RunTask(Task*) (uilder/build/src/base/message_loop.cc:320)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (uilder/build/src/base/message_loop.cc:328)    MessageLoop::DoWork() (uilder/build/src/base/message_loop.cc:435)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  (uilder/build/src/base/message_pump_default.cc:23)    MessageLoop::RunInternal() (uilder/build/src/base/message_loop.cc:205)    MessageLoop::RunHandler() (uilder/build/src/base/message_loop.cc:177)    MessageLoop::Run() (uilder/build/src/base/message_loop.cc:155)    WorkerMain(MainFunctionParams const&amp;)  (uilder/build/src/chrome/worker/worker_main.cc:49)    ChromeMain (uilder/build/src/chrome/app/chrome_dll_main.cc:579)    main (uilder/build/src/chrome/app/chrome_exe_main_gtk.cc:34)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:malloc     fun:malloc     fun:_ZN3WTF10fastMallocEj     fun:_ZN3WTF13FastAllocBasenwEj      fun:_ZN7WebCore18MessagePortChannel6createEN3WTF10PassRefPtrINS_26PlatformMessagePortChannelEEE      fun:_ZN6WebKit19WebSharedWorkerImpl7connectEPNS_21WebMessagePortChannelEPNS_15WebSharedWorker15ConnectListenerE     fun:_ZN19WebSharedWorkerStub9OnConnectEii      fun:_Z16DispatchToMethodI19WebSharedWorkerStubMS0_FviiEiiEvPT_T0_RK6Tuple2IT1_T2_E      fun:_ZN3IPC16MessageWithTupleI6Tuple2IiiEE8DispatchI19WebSharedWorkerStubMS5_FviiEEEbPKNS_7MessageEPT_T0_     fun:_ZN19WebSharedWorkerStub17OnMessageReceivedERKN3IPC7MessageE     fun:_ZN13MessageRouter12RouteMessageERKN3IPC7MessageE     fun:_ZN13MessageRouter17OnMessageReceivedERKN3IPC7MessageE     fun:_ZN11ChildThread17OnMessageReceivedERKN3IPC7MessageE     fun:_ZN3IPC12ChannelProxy7Context17OnDispatchMessageERKNS_7MessageE      fun:_Z16DispatchToMethodIN3IPC12ChannelProxy7ContextEMS2_FvRKNS0_7MessageEES3_EvPT_T0_RK6Tuple1IT1_E      fun:_ZN14RunnableMethodIN3IPC12ChannelProxy7ContextEMS2_FvRKNS0_7MessageEE6Tuple1IS3_EE3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base18MessagePumpDefault3RunEPNS_11MessagePump8DelegateE     fun:_ZN11MessageLoop11RunInternalEv     fun:_ZN11MessageLoop10RunHandlerEv  }     </pre>