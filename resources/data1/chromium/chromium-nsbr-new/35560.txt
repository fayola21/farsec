<title>Issue 35560 -   chromium -    Data race in geolocation/wifi_data_provider_common_unittest.cc on int counter - Project Hosting on Google Code</title> <pre> This race was found by ThreadSanitizer (the report is attached)  See <a href="http://dev.chromium.org/developers/how-tos/using-valgrind/threadsanitizer">http://dev.chromium.org/developers/how-tos/using-valgrind/threadsanitizer</a> for the details what is ThreadSanitizer.    <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Tests%20(tsan%20x64)/builds/2495/steps/valgrind%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/waterfall.fyi/builders/Linux%20Tests%20(tsan%20x64)/builds/2495/steps/valgrind%20test:%20unit/logs/stdio</a>    The race is between    GeolocationWifiDataProviderCommonTest_DoScanWithResults_Test::TestBody()      chrome/browser/geolocation/wifi_data_provider_common_unittest.cc:130  and    MockWlanApi::GetAccessPointData(std::set&lt;AccessPointData  AccessPointDataLess  std::allocator&lt;AccessPointData&gt; &gt;*)      chrome/browser/geolocation/wifi_data_provider_common_unittest.cc:17    This has appeared since <a href="http://src.chromium.org/viewvc/chrome?view=rev&amp;revision=38890">http://src.chromium.org/viewvc/chrome?view=rev&amp;revision=38890</a>  This doesn't show up on the memory waterfall right now since all the Valgrind bots can't compile due to ffmpeg issues. </pre>