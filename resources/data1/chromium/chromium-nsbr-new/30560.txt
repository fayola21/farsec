<title>Issue 30560 -   chromium -    Consistent browser crashes in ThreadCache::Allocate / ThreadCache::Deallocate - Project Hosting on Google Code</title> <pre> We've got a user here in the office who gets 3 or 4 Chrome crashes a day  this initially started showing up in v3 and has continued after he   upgraded to the beta channel:    Recent crashes - 4.0.249.0:  1) http://crash/reportdetail?reportid=65e2b6d5d380e1e4#crashing_thread - crashes in 	tcmalloc::ThreadCache::Deallocate()  2) http://crash/reportdetail?reportid=80c41ea70caab1db#crashing_thread - tcmalloc::ThreadCache::Allocate()    Old crash - v3.0.195.27:  3) http://crash/reportdetail?reportid=8c042ce12359888d#crashing_thread - crashes in tcmalloc::ThreadCache::Allocate();    cpu  eroman: any ideas for who the best person to look at this would be?    === Stack for #1: ===  Thread 7 *CRASHED* ( EXCEPTION_ACCESS_VIOLATION @ 0x50545448 )    0x01c49add	 [chrome.dll	 - thread_cache.h:207]	tcmalloc::ThreadCache::FreeList::PopRange(int void * * void * *)  0x01c49cc9	 [chrome.dll	 - thread_cache.cc:218]	tcmalloc::ThreadCache::ReleaseToCentralCache(tcmalloc::ThreadCache::FreeList * unsigned   int int)  0x01c49d25	 [chrome.dll	 - thread_cache.cc:237]	tcmalloc::ThreadCache::Scavenge()  0x01c43102	 [chrome.dll	 - thread_cache.h:361]	tcmalloc::ThreadCache::Deallocate(void * unsigned int)  0x01c43ef9	 [chrome.dll	 - tcmalloc.cc:872]	`anonymous namespace'::do_free_with_callback(void * void (*)(void *))  0x022aa246	 [chrome.dll	 + 0x0067a246]	net::IOBuffer::`vector deleting destructor'(unsigned int)  0x01d1a42b	 [chrome.dll	 - ref_counted.h:140]	  base::RefCountedThreadSafe&lt;browser_sync::SyncBackendHost::Core base::DefaultRefCountedThreadSafeTraits&lt;browser_sync::SyncBackendHost::Co  re&gt; &gt;::Release()  0x02289164	 [chrome.dll	 + 0x00659164]	GZipFilter::`scalar deleting destructor'(unsigned int)  0x022ce933	 [chrome.dll	 - url_request_http_job.cc:93]	URLRequestHttpJob::~URLRequestHttpJob()  0x022ce8d5	 [chrome.dll	 + 0x0069e8d5]	URLRequestHttpJob::`vector deleting destructor'(unsigned int)  0x01d1a42b	 [chrome.dll	 - ref_counted.h:140]	  base::RefCountedThreadSafe&lt;browser_sync::SyncBackendHost::Core base::DefaultRefCountedThreadSafeTraits&lt;browser_sync::SyncBackendHost::Co  re&gt; &gt;::Release()  0x01d99dc5	 [chrome.dll	 + 0x00169dc5]	RunnableMethod&lt;IPC::ChannelProxy::Context void (   IPC::ChannelProxy::Context::*)(void) Tuple0&gt;::`scalar deleting destructor'(unsigned int)  0x01cc5deb	 [chrome.dll	 - message_loop.cc:321]	MessageLoop::RunTask(Task *)  0x01cc5e1d	 [chrome.dll	 - message_loop.cc:328]	MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const &amp;)  0x01cc5fd2	 [chrome.dll	 - message_loop.cc:435]	MessageLoop::DoWork()  0x01cd737f	 [chrome.dll	 - message_pump_win.cc:469]	base::MessagePumpForIO::DoRunLoop()  0x01cd6e83	 [chrome.dll	 - message_pump_win.cc:52]	base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate   * base::MessagePumpWin::Dispatcher *)  0x01cd6cc8	 [chrome.dll	 - message_pump_win.h:78]	base::MessagePumpWin::Run(base::MessagePump::Delegate *)  0x01cc5c93	 [chrome.dll	 - message_loop.cc:205]	MessageLoop::RunInternal()  0x01cc5c18	 [chrome.dll	 - message_loop.cc:177]	MessageLoop::RunHandler()  0x01cc5bc9	 [chrome.dll	 - message_loop.cc:155]	MessageLoop::Run()  0x02339108	 [chrome.dll	 - thread.cc:132]	base::Thread::Run(MessageLoop *)  0x0233918d	 [chrome.dll	 - thread.cc:153]	base::Thread::ThreadMain()  0x01ccfec3	 [chrome.dll	 - platform_thread_win.cc:26]	`anonymous namespace'::ThreadFunc(void *)  0x7c80b728	 [kernel32.dll	 + 0x0000b728]	BaseThreadStart      === Stack for #2 ===  Thread 7 *CRASHED* ( EXCEPTION_ACCESS_VIOLATION @ 0x50545448 )    0x01c430a8	 [chrome.dll	 - thread_cache.h:343]	tcmalloc::ThreadCache::Allocate(unsigned int)  0x01c43e3e	 [chrome.dll	 - tcmalloc.cc:818]	`anonymous namespace'::do_malloc(unsigned int)  0x01c44186	 [chrome.dll	 - allocator_shim.cc:110]	malloc  0x01c4420e	 [chrome.dll	 - allocator_shim.cc:147]	realloc  0x02283c5d	 [chrome.dll	 - io_buffer.cc:25]	net::GrowableIOBuffer::SetCapacity(int)  0x022df001	 [chrome.dll	 - http_stream_parser.cc:212]	net::HttpStreamParser::DoReadHeaders()  0x022dee98	 [chrome.dll	 - http_stream_parser.cc:140]	net::HttpStreamParser::DoLoop(int)  0x022d1602	 [chrome.dll	 - http_basic_stream.cc:26]	net::HttpBasicStream::ReadResponseHeaders(CallbackRunner&lt;Tuple1&lt;int&gt; &gt; *)  0x022b79c3	 [chrome.dll	 - http_network_transaction.cc:453]	net::HttpNetworkTransaction::DoLoop(int)  0x022b7844	 [chrome.dll	 - http_network_transaction.cc:386]	net::HttpNetworkTransaction::OnIOComplete(int)  0x022ba655	 [chrome.dll	 - task.h:549]	CallbackImpl&lt;`anonymous namespace'::NewTabPageSetHomePageHandler void (   A0x76121646::NewTabPageSetHomePageHandler::*)(Value const *) Tuple1&lt;Value const *&gt; &gt;::RunWithParams(Tuple1&lt;Value const *&gt; const &amp;)  0x022dee5b	 [chrome.dll	 - http_stream_parser.cc:110]	net::HttpStreamParser::OnIOComplete(int)  0x022ba655	 [chrome.dll	 - task.h:549]	CallbackImpl&lt;`anonymous namespace'::NewTabPageSetHomePageHandler void (   A0x76121646::NewTabPageSetHomePageHandler::*)(Value const *) Tuple1&lt;Value const *&gt; &gt;::RunWithParams(Tuple1&lt;Value const *&gt; const &amp;)  0x022d4d80	 [chrome.dll	 - tcp_client_socket_win.cc:634]	net::TCPClientSocketWin::DoWriteCallback(int)  0x022d4f59	 [chrome.dll	 - tcp_client_socket_win.cc:701]	net::TCPClientSocketWin::DidCompleteWrite()  0x022d4553	 [chrome.dll	 - tcp_client_socket_win.cc:282]	net::TCPClientSocketWin::Core::WriteDelegate::OnObjectSignaled(void *)  0x01cda58c	 [chrome.dll	 - object_watcher.cc:30]	base::ObjectWatcher::Watch::Run()  0x01cc5de3	 [chrome.dll	 - message_loop.cc:320]	MessageLoop::RunTask(Task *)  0x01cc5e1d	 [chrome.dll	 - message_loop.cc:328]	MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const &amp;)  0x01cc5fd2	 [chrome.dll	 - message_loop.cc:435]	MessageLoop::DoWork()  0x01cd737f	 [chrome.dll	 - message_pump_win.cc:469]	base::MessagePumpForIO::DoRunLoop()  0x01cd6e83	 [chrome.dll	 - message_pump_win.cc:52]	base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate   * base::MessagePumpWin::Dispatcher *)  0x01cd6cc8	 [chrome.dll	 - message_pump_win.h:78]	base::MessagePumpWin::Run(base::MessagePump::Delegate *)  0x01cc5c93	 [chrome.dll	 - message_loop.cc:205]	MessageLoop::RunInternal()  0x01cc5c18	 [chrome.dll	 - message_loop.cc:177]	MessageLoop::RunHandler()  0x01cc5bc9	 [chrome.dll	 - message_loop.cc:155]	MessageLoop::Run()  0x02339108	 [chrome.dll	 - thread.cc:132]	base::Thread::Run(MessageLoop *)  0x0233918d	 [chrome.dll	 - thread.cc:153]	base::Thread::ThreadMain()  0x01ccfec3	 [chrome.dll	 - platform_thread_win.cc:26]	`anonymous namespace'::ThreadFunc(void *)  0x7c80b728	 [kernel32.dll	 + 0x0000b728]	BaseThreadStart </pre>