<title>Issue 25556 -   chromium -    CRASH suspected in download item popup menu. - Project Hosting on Google Code</title> <pre> I have not found a repro.  <a title="CRASH tab context menu versus JavaScript close." class=closed_ref href="/p/chromium/issues/detail?id=25465"> Issue 25465 </a> revolves around the right-click context menu for tabs.  There's a very similar backtrace which is somehow   provoked by a directly-accessible right-click menu.  Reviewing how NSMenu handles item validation  I've determined that -validateMenuItem: being sent   to a freed object is the likely culprit in both cases.  TabController implements that  which is the other bug  and the other implementation is in   DownloadItemController.  In the latter case the popup menu is associated directly with the view  which I believe is how we end up with the stack backtrace   not including any Chrome frames.    The core problem is probably that the DownloadItemController is being freed while the popup menu is visible.    http://crash/reportdetail?reportid=3361e59102a41e08    Thread 0 *CRASHED* (EXC_BAD_ACCESS / KERN_INVALID_ADDRESS @0x3274668d)    0x92cf6688	 [libobjc.A.dylib	 + 0x00015688]	  0x9066bdf6	 [AppKit	 + 0x001c9df6]	 -[NSMenu _enableItems]  0x9063dd87	 [AppKit	 + 0x0019bd87]	 AppKitMenuEventHandler  0x95c6513c	 [HIToolbox	 + 0x0000813c]	 DispatchEventToHandlers(EventTargetRec*  OpaqueEventRef*  HandlerCallRec*)  0x95c6457a	 [HIToolbox	 + 0x0000757a]	 SendEventToEventTargetInternal(OpaqueEventRef*  OpaqueEventTargetRef*  HandlerCallRec*)  0x95c80ecb	 [HIToolbox	 + 0x00023ecb]	 SendEventToEventTarget  0x95cbe0d4	 [HIToolbox	 + 0x000610d4]	 SendMenuOpening(MenuSelectData*  MenuData*  double  unsigned long  __CFDictionary*  unsigned char    unsigned char*)  0x95d2b737	 [HIToolbox	 + 0x000ce737]	 PopUpMenuSelectCore(MenuData*  Point  double  Point  unsigned short  unsigned int  Rect const*  unsigned   short  unsigned long  Rect const*  Rect const*  __CFString const*  OpaqueMenuRef**  unsigned short*)  0x95d2b3fa	 [HIToolbox	 + 0x000ce3fa]	 _HandlePopUpMenuSelection7  0x9072b19a	 [AppKit	 + 0x0028919a]	 _NSPopUpCarbonMenu3  0x9072a587	 [AppKit	 + 0x00288587]	 _NSPopUpCarbonMenu2  0x9072a4e8	 [AppKit	 + 0x002884e8]	 _NSPopUpCarbonMenu1  0x9072a448	 [AppKit	 + 0x00288448]	 -[NSCarbonMenuImpl _popUpContextMenu:withEvent:forView:withFont:]  0x9072a281	 [AppKit	 + 0x00288281]	 -[NSMenu _popUpContextMenu:withEvent:forView:withFont:]  0x9072a15e	 [AppKit	 + 0x0028815e]	 -[NSMenu _popUpContextMenu:withEvent:forView:]  0x9072a119	 [AppKit	 + 0x00288119]	 -[NSMenu _popUpMenuWithEvent:forView:]  0x90af4c48	 [AppKit	 + 0x00652c48]	 -[NSView rightMouseDown:]  0x905b1730	 [AppKit	 + 0x0010f730]	 -[NSWindow sendEvent:]  0x023dab93	 [Google Chrome Framework	 - chrome_event_processing_window.mm:99]	 -[ChromeEventProcessingWindow sendEvent:]  0x023d9bcd	 [Google Chrome Framework	 - chrome_browser_window.mm:260]	 -[ChromeBrowserWindow sendEvent:]  0x9057d6a4	 [AppKit	 + 0x000db6a4]	 -[NSApplication sendEvent:]  0x023bd3a7	 [Google Chrome Framework	 - chrome_application_mac.mm:200]	 -[CrApplication sendEvent:]  0x904dafe6	 [AppKit	 + 0x00038fe6]	 -[NSApplication run]  0x027690d2	 [Google Chrome Framework	 - message_pump_mac.mm:494]	   base::MessagePumpNSApplication::DoRun(base::MessagePump::Delegate*)  0x027691b5	 [Google Chrome Framework	 - message_pump_mac.mm:152]	   base::MessagePumpCFRunLoopBase::Run(base::MessagePump::Delegate*)  0x02765b13	 [Google Chrome Framework	 - message_loop.cc:199]	 MessageLoop::Run()  0x0239c62a	 [Google Chrome Framework	 - browser_main.cc:153]	 BrowserMain(MainFunctionParams const&amp;)  0x022d4f8f	 [Google Chrome Framework	 - chrome_dll_main.cc:600]	 ChromeMain  0x00001fc5	 [Google Chrome	 + 0x00000fc5]	  0x00000001			   </pre>