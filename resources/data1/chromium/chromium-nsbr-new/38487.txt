<title>Issue 38487 -   chromium -    A leak in ProfileSyncServiceTypedUrlTest::TearDown() - Project Hosting on Google Code</title> <pre> From: <a href="http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/memory/builders/Chromium%20Mac%20(valgrind)/builds/3809/steps/valgrind%20test:%20unit/logs/stdio</a>    Command: src/xcodebuild/Debug/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:IPCSyncCha  nnelTest.*:WebDropTargetTest.URL:WebDropTargetTest.Data:AutocompleteTextFieldEditorTest.CutCopyTest:DownloadUtilTest.AddFileToPasteboardTest:Fin  dPasteboardTest.ReadingFromPboardUpdatesFindText:FindPasteboardTest.SendsNotificationWhenTextChanges:RenderViewTest.MacTestCmdUp:ChromeBrowserWi  ndowTest.DoesHideTitle:ClearBrowsingDataControllerTest.*:NSMenuItemAdditionsTest.TestMOnDifferentLayouts:PrefsControllerTest.GetPrefsViewForPage  :PrefsControllerTest.GetToolbarItemForPage:PrefsControllerTest.ShowAndClose:PrefsControllerTest.SwitchToPage:RenderViewTest.OnPrintPages:RenderV  iewTest.Print*:TabStripControllerTest.AddRemoveTabs:TaskManagerWindowControllerTest.* --gtest_print_time  80 bytes in 4 blocks are definitely lost in loss record 11 822 of 15 818    operator new(unsigned long) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:235)    browser_sync::TypedUrlDataTypeController::Stop() (typed_url_data_type_controller.cc:116)    browser_sync::DataTypeManagerImpl::FinishStop() (data_type_manager_impl.cc:174)    browser_sync::DataTypeManagerImpl::Stop() (data_type_manager_impl.cc:164)    ProfileSyncService::Shutdown(bool) (profile_sync_service.cc:203)    ProfileSyncService::~ProfileSyncService() (profile_sync_service.cc:58)    TestingProfileSyncService::~TestingProfileSyncService() (/b/slave/chromium-dbg-mac-  valgrind/build/src/chrome/browser/sync/profile_sync_service_autofill_unittest.cc:82)    scoped_ptr&lt;TestingProfileSyncService&gt;::reset(TestingProfileSyncService*) (scoped_ptr.h:81)    ProfileSyncServiceTypedUrlTest::TearDown() (/b/slave/chromium-dbg-mac-  valgrind/build/src/chrome/browser/sync/profile_sync_service_typed_url_unittest.cc:218)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN12browser_sync26TypedUrlDataTypeController4StopEv     fun:_ZN12browser_sync19DataTypeManagerImpl10FinishStopEv     fun:_ZN12browser_sync19DataTypeManagerImpl4StopEv     fun:_ZN18ProfileSyncService8ShutdownEb     fun:_ZN18ProfileSyncServiceD2Ev     fun:_ZN25TestingProfileSyncServiceD0Ev     fun:_ZN10scoped_ptrI25TestingProfileSyncServiceE5resetEPS0_     fun:_ZN30ProfileSyncServiceTypedUrlTest8TearDownEv  }    From: <a href="http://build.chromium.org/buildbot/memory/builders/Linux%20Tests%20(valgrind)(1)/builds/3488/steps/valgrind%20test:%20unit/logs/stdio">http://build.chromium.org/buildbot/memory/builders/Linux%20Tests%20(valgrind)(1)/builds/3488/steps/valgrind%20test:%20unit/logs/stdio</a>    Command: src/sconsbuild/Release/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:URLFetcher  BadHTTPSTest.BadHTTPSTest --gtest_print_time  64 bytes in 4 blocks are definitely lost in loss record 16 255 of 18 714    operator new(unsigned int) (mp/vg-chr/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:228)    browser_sync::TypedUrlDataTypeController::Stop() (uilder/build/src/chrome/browser/sync/glue/typed_url_data_type_controller.cc:116)    browser_sync::DataTypeManagerImpl::FinishStop() (uilder/build/src/chrome/browser/sync/glue/data_type_manager_impl.cc:174)    browser_sync::DataTypeManagerImpl::Stop() (uilder/build/src/chrome/browser/sync/glue/data_type_manager_impl.cc:164)    ProfileSyncService::Shutdown(bool) (uilder/build/src/chrome/browser/sync/profile_sync_service.cc:203)    ProfileSyncService::~ProfileSyncService() (uilder/build/src/chrome/browser/sync/profile_sync_service.cc:58)    TestingProfileSyncService::~TestingProfileSyncService() (uilder/build/src/chrome/browser/sync/profile_sync_service_typed_url_unittest.cc:84)    scoped_ptr&lt;TestingProfileSyncService&gt;::reset(TestingProfileSyncService*) (uilder/build/src/base/scoped_ptr.h:81)    ProfileSyncServiceTypedUrlTest::TearDown() (uilder/build/src/chrome/browser/sync/profile_sync_service_typed_url_unittest.cc:218)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN12browser_sync26TypedUrlDataTypeController4StopEv     fun:_ZN12browser_sync19DataTypeManagerImpl10FinishStopEv     fun:_ZN12browser_sync19DataTypeManagerImpl4StopEv     fun:_ZN18ProfileSyncService8ShutdownEb     fun:_ZN18ProfileSyncServiceD2Ev     fun:_ZN25TestingProfileSyncServiceD0Ev     fun:_ZN10scoped_ptrI25TestingProfileSyncServiceE5resetEPS0_     fun:_ZN30ProfileSyncServiceTypedUrlTest8TearDownEv  }   </pre>