<title>Issue 36075 -   chromium -    Memory leak in page translator - Project Hosting on Google Code</title> <pre> Memory leak @ page_translator.cc:62    First detected in:  http://chrome-buildbot:8014/builders/Chromium%20OS%20UI%20(valgrind)(1)/builds/1465    Must be related to this CL that went in at the same time:  <a href="http://codereview.chromium.org/613002">http://codereview.chromium.org/613002</a>    15:02:34 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: /b/slave/chromium-rel-chromeos-valgrind-tests-1/build/src/sconsbuild/Release/chrome --type=zygote --enable-logging=  20 bytes in 1 blocks are definitely lost in loss record 259 of 1 138    operator new(unsigned int) (mp/chromium-valgrind-binaries/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:228)    __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;WebKit::WebString&gt; &gt;::allocate(unsigned int  void const*) (sr/include/c++/4.2/ext/new_allocator.h:91)    std::_Rb_tree&lt;WebKit::WebString  WebKit::WebString  std::_Identity&lt;WebKit::WebString&gt;  PageTranslator::WebStringCompare    std::allocator&lt;WebKit::WebString&gt; &gt;::_M_get_node() (sr/include/c++/4.2/bits/stl_tree.h:367)    std::_Rb_tree&lt;WebKit::WebString  WebKit::WebString  std::_Identity&lt;WebKit::WebString&gt;  PageTranslator::WebStringCompare    std::allocator&lt;WebKit::WebString&gt; &gt;::_M_create_node(WebKit::WebString const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:376)    std::_Rb_tree&lt;WebKit::WebString  WebKit::WebString  std::_Identity&lt;WebKit::WebString&gt;  PageTranslator::WebStringCompare    std::allocator&lt;WebKit::WebString&gt; &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*  WebKit::WebString const&amp;)   (sr/include/c++/4.2/bits/stl_tree.h:838)    std::_Rb_tree&lt;WebKit::WebString  WebKit::WebString  std::_Identity&lt;WebKit::WebString&gt;  PageTranslator::WebStringCompare    std::allocator&lt;WebKit::WebString&gt; &gt;::_M_insert_unique(WebKit::WebString const&amp;) (sr/include/c++/4.2/bits/stl_tree.h:990)    std::set&lt;WebKit::WebString  PageTranslator::WebStringCompare  std::allocator&lt;WebKit::WebString&gt; &gt;::insert(WebKit::WebString const&amp;)   (sr/include/c++/4.2/bits/stl_set.h:307)    PageTranslator::PageTranslator(TextTranslator*  PageTranslator::PageTranslatorDelegate*) (chrome/renderer/translate/page_translator.cc:62)    RenderView::RenderView(RenderThreadBase*  WebPreferences const&amp;  long long) (chrome/renderer/render_view.cc:318)    RenderView::Create(RenderThreadBase*  int  int  RendererPreferences const&amp;  WebPreferences const&amp;  base::RefCountedData&lt;int&gt;*  int  long long)   (chrome/renderer/render_view.cc:379)    RenderThread::OnCreateNewView(ViewMsg_New_Params const&amp;) (chrome/renderer/render_thread.cc:459)    void DispatchToMethod&lt;RenderThread  void (RenderThread::*)(ViewMsg_New_Params const&amp;)  ViewMsg_New_Params&gt;(RenderThread*  void   (RenderThread::*)(ViewMsg_New_Params const&amp;)  Tuple1&lt;ViewMsg_New_Params&gt; const&amp;) (base/tuple.h:422)    bool IPC::MessageWithTuple&lt;Tuple1&lt;ViewMsg_New_Params&gt; &gt;::Dispatch&lt;RenderThread  void (RenderThread::*)(ViewMsg_New_Params const&amp;)&gt;(IPC::Message const*    RenderThread*  void (RenderThread::*)(ViewMsg_New_Params const&amp;)) (ipc/ipc_message_utils.h:988)    RenderThread::OnControlMessageReceived(IPC::Message const&amp;) (chrome/renderer/render_thread.cc:383)    ChildThread::OnMessageReceived(IPC::Message const&amp;) (chrome/common/child_thread.cc:129)    IPC::ChannelProxy::Context::OnDispatchMessage(IPC::Message const&amp;) (ipc/ipc_channel_proxy.cc:204)    void DispatchToMethod&lt;IPC::ChannelProxy::Context  void (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  IPC::Message&gt;(IPC::ChannelProxy::Context*    void (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt; const&amp;) (base/tuple.h:422)    RunnableMethod&lt;IPC::ChannelProxy::Context  void (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt; &gt;::Run() (base/task.h:290)    MessageLoop::RunTask(Task*) (base/message_loop.cc:320)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) (base/message_loop.cc:328)    MessageLoop::DoWork() (base/message_loop.cc:435)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*) (base/message_pump_default.cc:23)    MessageLoop::RunInternal() (base/message_loop.cc:205)    MessageLoop::RunHandler() (base/message_loop.cc:177)    MessageLoop::Run() (base/message_loop.cc:155)    RendererMain(MainFunctionParams const&amp;) (chrome/renderer/renderer_main.cc:277)    ChromeMain (chrome/app/chrome_dll_main.cc:708)    main (chrome/app/chrome_exe_main_gtk.cc:52)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeIN6WebKit9WebStringEEE8allocateEjPKv     fun:_ZNSt8_Rb_treeIN6WebKit9WebStringES1_St9_IdentityIS1_EN14PageTranslator16WebStringCompareESaIS1_EE11_M_get_nodeEv     fun:_ZNSt8_Rb_treeIN6WebKit9WebStringES1_St9_IdentityIS1_EN14PageTranslator16WebStringCompareESaIS1_EE14_M_create_nodeERKS1_     fun:_ZNSt8_Rb_treeIN6WebKit9WebStringES1_St9_IdentityIS1_EN14PageTranslator16WebStringCompareESaIS1_EE9_M_insertEPSt18_Rb_tree_node_baseS9_RKS1_     fun:_ZNSt8_Rb_treeIN6WebKit9WebStringES1_St9_IdentityIS1_EN14PageTranslator16WebStringCompareESaIS1_EE16_M_insert_uniqueERKS1_     fun:_ZNSt3setIN6WebKit9WebStringEN14PageTranslator16WebStringCompareESaIS1_EE6insertERKS1_     fun:_ZN14PageTranslatorC1EP14TextTranslatorPNS_22PageTranslatorDelegateE     fun:_ZN10RenderViewC1EP16RenderThreadBaseRK14WebPreferencesx     fun:_ZN10RenderView6CreateEP16RenderThreadBaseiiRK19RendererPreferencesRK14WebPreferencesPN4base14RefCountedDataIiEEix     fun:_ZN12RenderThread15OnCreateNewViewERK18ViewMsg_New_Params     fun:_Z16DispatchToMethodI12RenderThreadMS0_FvRK18ViewMsg_New_ParamsES1_EvPT_T0_RK6Tuple1IT1_E     fun:_ZN3IPC16MessageWithTupleI6Tuple1I18ViewMsg_New_ParamsEE8DispatchI12RenderThreadMS6_FvRKS2_EEEbPKNS_7MessageEPT_T0_     fun:_ZN12RenderThread24OnControlMessageReceivedERKN3IPC7MessageE     fun:_ZN11ChildThread17OnMessageReceivedERKN3IPC7MessageE     fun:_ZN3IPC12ChannelProxy7Context17OnDispatchMessageERKNS_7MessageE     fun:_Z16DispatchToMethodIN3IPC12ChannelProxy7ContextEMS2_FvRKNS0_7MessageEES3_EvPT_T0_RK6Tuple1IT1_E     fun:_ZN14RunnableMethodIN3IPC12ChannelProxy7ContextEMS2_FvRKNS0_7MessageEE6Tuple1IS3_EE3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base18MessagePumpDefault3RunEPNS_11MessagePump8DelegateE  } </pre>