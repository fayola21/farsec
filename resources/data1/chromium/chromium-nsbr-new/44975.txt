<title>Issue 44975 -   chromium -    An invalid read in MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody() - Project Hosting on Google Code</title> <pre> From: <a href="http://chrome-buildbot.corp.google.com:8014/builders/Linux%20Tests%20(valgrind)(2)/builds/5776/steps/valgrind%20test:%20base/logs/stdio">http://chrome-buildbot.corp.google.com:8014/builders/Linux%20Tests%20(valgrind)(2)/builds/5776/steps/valgrind%20test:%20base/logs/stdio</a>    Command: src/sconsbuild/Release/base_unittests --gtest_filter=-  WatchdogTest.AlarmTest:TimerTest.RepeatingTimer:TimerTest.RepeatingTimer_Cancel:ObserverListThreadSafeTest.CrossThreadObserver:ObserverListThr  eadSafeTest.CrossThreadNotifications:ClipboardTest.*:OutOfMemoryTest.* --gtest_print_time  Invalid read of size 4    event_del (uilder/build/src/third_party/libevent/event.c:792)    base::MessagePumpLibevent::FileDescriptorWatcher::StopWatchingFileDescriptor() (uilder/build/src/base/message_pump_libevent.cc:83)    base::MessagePumpLibevent::FileDescriptorWatcher::~FileDescriptorWatcher() (uilder/build/src/base/message_pump_libevent.cc:58)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody() (uilder/build/src/base/message_loop_unittest.cc:1515)    testing::Test::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2095)    testing::internal::TestInfoImpl::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2314)    testing::TestCase::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2420)    testing::internal::UnitTestImpl::RunAllTests() (uilder/build/src/testing/gtest/src/gtest.cc:4024)    testing::UnitTest::Run() (uilder/build/src/testing/gtest/src/gtest.cc:3687)    TestSuite::Run() (uilder/build/src/./base/test/test_suite.h:131)    main (uilder/build/src/base/test/run_all_unittests.cc:10)  Address 0x58fd418 is 0 bytes inside a block of size 944 free'd    free (mp/scripts/valgrind-memcheck/coregrind/m_replacemalloc/vg_replace_malloc.c:389)    event_base_free (uilder/build/src/third_party/libevent/event.c:263)    base::MessagePumpLibevent::~MessagePumpLibevent() (uilder/build/src/base/message_pump_libevent.cc:148)    base::RefCountedThreadSafe&lt;base::MessagePump  base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;   &gt;::DeleteInternal(base::MessagePump*) (uilder/build/src/./base/ref_counted.h:146)    base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;::Destruct(base::MessagePump*) (uilder/build/src/./base/ref_counted.h:112)    base::RefCountedThreadSafe&lt;base::MessagePump  base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt; &gt;::Release()   (uilder/build/src/./base/ref_counted.h:140)    scoped_refptr&lt;base::MessagePump&gt;::~scoped_refptr() (uilder/build/src/./base/ref_counted.h:238)    MessageLoop::~MessageLoop() (uilder/build/src/base/message_loop.cc:140)    MessageLoopForIO::~MessageLoopForIO() (uilder/build/src/./base/message_loop.h:492)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody() (uilder/build/src/base/message_loop_unittest.cc:1513)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Addr4     fun:event_del     fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcher26StopWatchingFileDescriptorEv     fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcherD1Ev     fun:_ZN61MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test8TestBodyEv  }    From: <a href="http://chrome-buildbot.corp.google.com:8014/builders/Chromium%20Mac%20(valgrind)/builds/4991/steps/valgrind%20test:%20base/logs/stdio">http://chrome-buildbot.corp.google.com:8014/builders/Chromium%20Mac%20(valgrind)/builds/4991/steps/valgrind%20test:%20base/logs/stdio</a>    Command: src/sconsbuild/Release/base_unittests --gtest_filter=-  WatchdogTest.AlarmTest:TimerTest.RepeatingTimer:TimerTest.RepeatingTimer_Cancel:ObserverListThreadSafeTest.CrossThreadObserver:ObserverListThr  eadSafeTest.CrossThreadNotifications:ClipboardTest.*:OutOfMemoryTest.* --gtest_print_time  Invalid read of size 4    event_del (uilder/build/src/third_party/libevent/event.c:792)    base::MessagePumpLibevent::FileDescriptorWatcher::StopWatchingFileDescriptor() (uilder/build/src/base/message_pump_libevent.cc:83)    base::MessagePumpLibevent::FileDescriptorWatcher::~FileDescriptorWatcher() (uilder/build/src/base/message_pump_libevent.cc:58)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody() (uilder/build/src/base/message_loop_unittest.cc:1515)    testing::Test::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2095)    testing::internal::TestInfoImpl::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2314)    testing::TestCase::Run() (uilder/build/src/testing/gtest/src/gtest.cc:2420)    testing::internal::UnitTestImpl::RunAllTests() (uilder/build/src/testing/gtest/src/gtest.cc:4024)    testing::UnitTest::Run() (uilder/build/src/testing/gtest/src/gtest.cc:3687)    TestSuite::Run() (uilder/build/src/./base/test/test_suite.h:131)    main (uilder/build/src/base/test/run_all_unittests.cc:10)  Address 0x58fd418 is 0 bytes inside a block of size 944 free'd    free (mp/scripts/valgrind-memcheck/coregrind/m_replacemalloc/vg_replace_malloc.c:389)    event_base_free (uilder/build/src/third_party/libevent/event.c:263)    base::MessagePumpLibevent::~MessagePumpLibevent() (uilder/build/src/base/message_pump_libevent.cc:148)    base::RefCountedThreadSafe&lt;base::MessagePump  base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;   &gt;::DeleteInternal(base::MessagePump*) (uilder/build/src/./base/ref_counted.h:146)    base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt;::Destruct(base::MessagePump*) (uilder/build/src/./base/ref_counted.h:112)    base::RefCountedThreadSafe&lt;base::MessagePump  base::DefaultRefCountedThreadSafeTraits&lt;base::MessagePump&gt; &gt;::Release()   (uilder/build/src/./base/ref_counted.h:140)    scoped_refptr&lt;base::MessagePump&gt;::~scoped_refptr() (uilder/build/src/./base/ref_counted.h:238)    MessageLoop::~MessageLoop() (uilder/build/src/base/message_loop.cc:140)    MessageLoopForIO::~MessageLoopForIO() (uilder/build/src/./base/message_loop.h:492)    MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test::TestBody() (uilder/build/src/base/message_loop_unittest.cc:1513)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Addr4     fun:event_del     fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcher26StopWatchingFileDescriptorEv     fun:_ZN4base19MessagePumpLibevent21FileDescriptorWatcherD1Ev     fun:_ZN61MessageLoopTest_FileDescriptorWatcherOutlivesMessageLoop_Test8TestBodyEv  } </pre>