<title>Issue 31975 -   chromium -    Browser crash when window closes and extension calls windows.getAll - Project Hosting on Google Code</title> <pre>   1.Open a new window  2.Close the window  3.Immediately call windows.getAll  or  1.Load the attached extension      EXPECTED: window opens and closes  ACTUAL: window opens and closes and crashes chrome      Only occurs with toolkit views on linux.  When windows.getAll is called  the BrowserList still contains the window that is being   removed. GetAllWindowsFunction tries to get the restored bounds for the closing window and   crashes.    ----- Trace -----  [14685:14685:437457380991:FATAL:views/widget/widget_gtk.cc(382)] Check failed: widget_.   [14685:14685:437457380991:FATAL:views/widget/widget_gtk.cc(382)] Check failed: widget_.   Backtrace:  	out/Debug/chrome(StackTrace::StackTrace()+0x21) [0x1bb7405]  	out/Debug/chrome(logging::LogMessage::~LogMessage()+0x29d) [0x1bc9d7f]  	out/Debug/chrome(views::WidgetGtk::GetBounds(gfx::Rect*  bool) const+0x9f)   [0x1b61c71]  	out/Debug/chrome(views::WindowGtk::GetBounds() const+0x29) [0x1b68edd]  	out/Debug/chrome(views::WindowGtk::GetNormalBounds() const+0x29) [0x1b68a89]  	out/Debug/chrome(BrowserView::GetRestoredBounds() const+0x49) [0x16e22a3]  	out/Debug/chrome(ExtensionTabUtil::CreateWindowValue(Browser const*  bool)+0x119)   [0x14cd0a9]  	out/Debug/chrome(GetAllWindowsFunction::RunImpl()+0x184) [0x14cdfa4]  	out/Debug/chrome [0x14a7cca]  	out/Debug/chrome(ExtensionFunctionDispatcher::HandleRequest(std::string const&amp;    Value const*  int  bool)+0x1cf) [0x14a55bd]  	out/Debug/chrome(ExtensionHost::ProcessDOMUIMessage(std::string const&amp;  Value   const*  int  bool)+0x62) [0x180b7d2]  	out/Debug/chrome(RenderViewHost::OnExtensionRequest(std::string const&amp;  ListValue   const&amp;  int  bool)+0x170) [0x15df94e]  	out/Debug/chrome(void DispatchToMethod&lt;RenderViewHost  void   (RenderViewHost::*)(std::string const&amp;  ListValue const&amp;  int  bool)  std::string    ListValue  int  bool&gt;(RenderViewHost*  void (RenderViewHost::*)(std::string const&amp;    ListValue const&amp;  int  bool)  Tuple4&lt;std::string  ListValue  int  bool&gt; const&amp;)+0x80)   [0x15e8db4]  	out/Debug/chrome [0x15f09a5]  	out/Debug/chrome(RenderViewHost::OnMessageReceived(IPC::Message const&amp;)+0x1825)   [0x15e63a9]  	out/Debug/chrome(BrowserRenderProcessHost::OnMessageReceived(IPC::Message   const&amp;)+0x3b9) [0x189da7f]  	out/Debug/chrome(IPC::ChannelProxy::Context::OnDispatchMessage(IPC::Message   const&amp;)+0x8f) [0x2235af5]  	out/Debug/chrome(void DispatchToMethod&lt;IPC::ChannelProxy::Context  void   (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)    IPC::Message&gt;(IPC::ChannelProxy::Context*  void (IPC::ChannelProxy::Context::*)(IPC::Message   const&amp;)  Tuple1&lt;IPC::Message&gt; const&amp;)+0x5d) [0x2236d37]  	out/Debug/chrome [0x2236d74]  	out/Debug/chrome(MessageLoop::RunTask(Task*)+0xd7) [0x1bcb25b]  	out/Debug/chrome(MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask   const&amp;)+0x3e) [0x1bcb978]  	out/Debug/chrome(MessageLoop::DoWork()+0xf6) [0x1bcbbc8]  	out/Debug/chrome(base::MessagePumpForUI::RunWithDispatcher(base::MessagePump::Delega  te*  base::MessagePumpForUI::Dispatcher*)+0x1b2) [0x1c160aa]  	out/Debug/chrome(MessageLoop::RunInternal()+0x11a) [0x1bcc0fe]  	out/Debug/chrome(MessageLoop::RunHandler()+0x15) [0x1bcc149]  	out/Debug/chrome(MessageLoopForUI::Run(base::MessagePumpForUI::Dispatcher*)+0x39)   [0x1bcc185]  	out/Debug/chrome [0x1435f60]  	out/Debug/chrome(BrowserMain(MainFunctionParams const&amp;)+0x1cf3) [0x1437c5f]  	out/Debug/chrome(ChromeMain+0xfd3) [0x13e3357]  	out/Debug/chrome(main+0x25) [0x13e490d]  	/lib/libc.so.6(__libc_start_main+0xf4) [0x7fcff06071c4]  	out/Debug/chrome [0x13e1dc9]   </pre>