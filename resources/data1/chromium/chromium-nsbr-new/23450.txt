<title>Issue 23450 -   chromium -    InvalidRead at getArabicProperties in layout test drawBidiText - Project Hosting on Google Code</title> <pre> 11:30:29 memcheck_analyze.py [ERROR] FAIL! There were 1 errors:  11:30:29 memcheck_analyze.py [ERROR] InvalidRead  Command: /b/slave/webkit-rel-linux-valgrind-  layout/build/src/sconsbuild/Release/test_shell --layout-tests --pixel-  tests=/b/slave/webkit-rel-linux-valgrind-  layout/build/src/webkit/Release/layout-test-results/png_result0.png --time-  out-ms=200000 file:///b/slave/webkit-rel-linux-valgrind-  layout/build/src/third_party/WebKit/LayoutTests/fast/text/drawBidiText.html  Invalid read of size 2    getArabicProperties (third_party/harfbuzz/src/harfbuzz-arabic.c:394)    arabicSyriacOpenTypeShape (third_party/harfbuzz/src/harfbuzz-  arabic.c:1015)    HB_ArabicShape (third_party/harfbuzz/src/harfbuzz-arabic.c:1060)    HB_ShapeItem (third_party/harfbuzz/src/harfbuzz-shaper.cpp:1307)    WebCore::TextRunWalker::shapeGlyphs()   (third_party/WebKit/WebCore/platform/graphics/chromium/FontLinux.cpp:396)    WebCore::TextRunWalker::nextScriptRun()   (third_party/WebKit/WebCore/platform/graphics/chromium/FontLinux.cpp:225)    WebCore::TextRunWalker::widthOfFullRun()   (third_party/WebKit/WebCore/platform/graphics/chromium/FontLinux.cpp:286)    WebCore::Font::floatWidthForComplexText(WebCore::TextRun const&amp;    WTF::HashSet&lt;WebCore::SimpleFontData const*    WTF::PtrHash&lt;WebCore::SimpleFontData const*&gt;    WTF::HashTraits&lt;WebCore::SimpleFontData const*&gt; &gt;*) const   (third_party/WebKit/WebCore/platform/graphics/chromium/FontLinux.cpp:492)    WebCore::Font::floatWidth(WebCore::TextRun const&amp;    WTF::HashSet&lt;WebCore::SimpleFontData const*    WTF::PtrHash&lt;WebCore::SimpleFontData const*&gt;    WTF::HashTraits&lt;WebCore::SimpleFontData const*&gt; &gt;*) const   (third_party/WebKit/WebCore/platform/graphics/Font.cpp:202)    WebCore::RenderListBox::updateFromElement()   (third_party/WebKit/WebCore/rendering/RenderListBox.cpp:118)    WebCore::HTMLFormControlElement::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/html/HTMLFormControlElement.cpp:234)    WebCore::HTMLSelectElement::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/html/HTMLSelectElement.cpp:63)    WebCore::Element::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Element.cpp:866)    WebCore::Element::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Element.cpp:866)    WebCore::Document::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Document.cpp:1274)    WebCore::Document::updateStyleIfNeeded()   (third_party/WebKit/WebCore/dom/Document.cpp:1315)    WebCore::Document::updateStyleForAllDocuments()   (third_party/WebKit/WebCore/dom/Document.cpp:1332)    WebCore::Node::dispatchGenericEvent(WTF::PassRefPtr&lt;WebCore::Event&gt;)   (third_party/WebKit/WebCore/dom/Node.cpp:2566)    WebCore::Node::dispatchEvent(WTF::PassRefPtr&lt;WebCore::Event&gt;)   (third_party/WebKit/WebCore/dom/Node.cpp:2447)    WebCore::Document::finishedParsing()   (third_party/WebKit/WebCore/dom/Document.cpp:4018)    WebCore::HTMLParser::finished()   (third_party/WebKit/WebCore/html/HTMLParser.cpp:1635)    WebCore::HTMLTokenizer::end()   (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1859)    WebCore::HTMLTokenizer::finish()   (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1899)    WebCore::Document::finishParsing()   (third_party/WebKit/WebCore/dom/Document.cpp:1860)    WebCore::FrameLoader::endIfNotLoadingMainResource()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1079)    WebCore::FrameLoader::end()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1064)    WebCore::DocumentLoader::finishedLoading()   (third_party/WebKit/WebCore/loader/DocumentLoader.cpp:330)    WebCore::FrameLoader::finishedLoading()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:3210)    WebCore::MainResourceLoader::didFinishLoading()   (third_party/WebKit/WebCore/loader/MainResourceLoader.cpp:375)    WebCore::ResourceLoader::didFinishLoading(WebCore::ResourceHandle*)   (third_party/WebKit/WebCore/loader/ResourceLoader.cpp:403)  Address 0x7b50f0a is 0 bytes after a block of size 26 alloc'd    malloc (ome/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:195)    WTF::fastMalloc(unsigned int)   (third_party/WebKit/JavaScriptCore/wtf/FastMalloc.cpp:233)    WebCore::StringBuffer::StringBuffer(unsigned int)   (third_party/WebKit/WebCore/platform/text/StringBuffer.h:42)    WebCore::StringImpl::simplifyWhiteSpace()   (third_party/WebKit/WebCore/platform/text/StringImpl.cpp:414)    WebCore::String::simplifyWhiteSpace() const   (third_party/WebKit/WebCore/platform/text/String.cpp:298)    WebCore::OptionElement::normalizeText(WebCore::Document const*    WebCore::String const&amp;)   (third_party/WebKit/WebCore/dom/OptionElement.cpp:108)      WebCore::OptionElement::collectOptionLabelOrText(WebCore::OptionElementData   const&amp;  WebCore::Element const*)   (third_party/WebKit/WebCore/dom/OptionElement.cpp:80)      WebCore::OptionElement::collectOptionTextRespectingGroupLabel(WebCore::Opti  onElementData const&amp;  WebCore::Element const*)   (third_party/WebKit/WebCore/dom/OptionElement.cpp:118)    WebCore::HTMLOptionElement::textIndentedToRespectGroupLabel() const   (third_party/WebKit/WebCore/html/HTMLOptionElement.cpp:211)    WebCore::RenderListBox::updateFromElement()   (third_party/WebKit/WebCore/rendering/RenderListBox.cpp:108)    WebCore::HTMLFormControlElement::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/html/HTMLFormControlElement.cpp:234)    WebCore::HTMLSelectElement::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/html/HTMLSelectElement.cpp:63)    WebCore::Element::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Element.cpp:866)    WebCore::Element::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Element.cpp:866)    WebCore::Document::recalcStyle(WebCore::Node::StyleChange)   (third_party/WebKit/WebCore/dom/Document.cpp:1274)    WebCore::Document::updateStyleIfNeeded()   (third_party/WebKit/WebCore/dom/Document.cpp:1315)    WebCore::Document::updateStyleForAllDocuments()   (third_party/WebKit/WebCore/dom/Document.cpp:1332)    WebCore::Node::dispatchGenericEvent(WTF::PassRefPtr&lt;WebCore::Event&gt;)   (third_party/WebKit/WebCore/dom/Node.cpp:2566)    WebCore::Node::dispatchEvent(WTF::PassRefPtr&lt;WebCore::Event&gt;)   (third_party/WebKit/WebCore/dom/Node.cpp:2447)    WebCore::Document::finishedParsing()   (third_party/WebKit/WebCore/dom/Document.cpp:4018)    WebCore::HTMLParser::finished()   (third_party/WebKit/WebCore/html/HTMLParser.cpp:1635)    WebCore::HTMLTokenizer::end()   (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1859)    WebCore::HTMLTokenizer::finish()   (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1899)    WebCore::Document::finishParsing()   (third_party/WebKit/WebCore/dom/Document.cpp:1860)    WebCore::FrameLoader::endIfNotLoadingMainResource()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1079)    WebCore::FrameLoader::end()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1064)    WebCore::DocumentLoader::finishedLoading()   (third_party/WebKit/WebCore/loader/DocumentLoader.cpp:330)    WebCore::FrameLoader::finishedLoading()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:3210)    WebCore::MainResourceLoader::didFinishLoading()   (third_party/WebKit/WebCore/loader/MainResourceLoader.cpp:375)    WebCore::ResourceLoader::didFinishLoading(WebCore::ResourceHandle*)   (third_party/WebKit/WebCore/loader/ResourceLoader.cpp:403)   </pre>