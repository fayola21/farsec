<title>Issue 27538 -   chromium -    Browser crash: DownloadAnimationTabObserver::Observe() - Project Hosting on Google Code</title> <pre> This animation crash has been showing up on chromebot for a while now. I thought it was filed already but cannot find it now. Please dupe if you can find.  I can reliably repro this on a machine with the following simplified command (build the 'reliability_test' target first):  ./reliability_tests --list=f --nopagedown --continuousload --extra-chrome-flags='--enable-crash-reporter'    (where f is the attached file containing 2 urls)    The crash happens when you download stuff from a url  then very quickly navigate to another url while the animation is still in progress. The above command lets you do just that.      Thread 0 (crashed)   0 libobjc.A.dylib     0.227.0.0            0x909a3bfa _objc_error + 0x74   1 libobjc.A.dylib     0.227.0.0            0x909a3c2f __objc_error + 0x33   2 libobjc.A.dylib     0.227.0.0            0x909a2636 _freedHandler + 0x39   3 Google Chrome Framew0.244.0.0            0x023e58e0 -[DownloadStartedAnimationMac animationComplete] + 0x1c (download_started_animation_mac.mm:121)   4 Google Chrome Framew0.244.0.0            0x023e5ea1 DownloadAnimationTabObserver::Observe(NotificationType  NotificationSource const&amp;  NotificationDet  ails const&amp;) + 0x14 (download_started_animation_mac.mm:82)   5 Google Chrome Framew0.244.0.0            0x02300ddb NotificationService::Notify(NotificationType  NotificationSource const&amp;  NotificationDetails const  &amp;) + 0x24 (notification_service.cc:119)   6 Google Chrome Framew0.244.0.0            0x02689f76    7 Google Chrome Framew0.244.0.0            0x02691368 TabStripModel::InternalCloseTabs(std::vector&lt;int  std::allocator&lt;int&gt; &gt;  bool) + 0x15 (tab_strip_m  odel.cc:688)   8 Google Chrome Framew0.244.0.0            0x026915ce TabStripModel::CloseAllTabs() + 0x19 (tab_strip_model.cc:237)   9 Google Chrome Framew0.244.0.0            0x023d8026 -[BrowserWindowController windowShouldClose:] + 0xa (browser_window_controller.mm:302)  10 AppKit              0.949.54.0           0x96f05381 -[NSWindow _document:shouldClose:contextInfo:] + 0x91  11 AppKit              0.949.54.0           0x96f052e2 -[NSWindow __close] + 0xa0  12 AppKit              0.949.54.0           0x96f05224 -[NSWindow _close:] + 0xaa  13 AppKit              0.949.54.0           0x96e2ae8e -[NSApplication sendAction:to:from:] + 0x6f  14 Google Chrome Framew0.244.0.0            0x023bb813 -[BrowserCrApplication sendAction:to:from:] + 0x3b (chrome_browser_application_mac.mm:242)  15 AppKit              0.949.54.0           0x96e2adcb -[NSControl sendAction:to:] + 0x6b  16 AppKit              0.949.54.0           0x96e2ac51 -[NSCell _sendActionFrom:] + 0xa8  17 AppKit              0.949.54.0           0x96f04f96 -[NSButtonCell performClick:] + 0x2d4  18 Google Chrome Framew0.244.0.0            0x023d3097 BrowserWindowCocoa::Close() + 0x1b (browser_window_cocoa.mm:75)  19 Google Chrome Framew0.244.0.0            0x02386f8d Browser::ExecuteCommandWithDisposition(int  WindowOpenDisposition) + 0xd (browser.cc:830)  20 Google Chrome Framew0.244.0.0            0x0238745f Browser::ExecuteCommand(int) + 0x19 (browser.cc:1543)  21 Google Chrome Framew0.244.0.0            0x02351fce AutomationProvider::ExecuteBrowserCommandAsync(int  int  bool*) + 0xe (automation_provider.cc:782)  22 Google Chrome Framew0.244.0.0            0x0235b462 bool IPC::MessageWithReply&lt;Tuple2&lt;int  int&gt;  Tuple1&lt;bool&amp;&gt; &gt;::Dispatch&lt;AutomationProvider  void (A  utomationProvider::*)(int  int  bool*)&gt;(IPC::Message const*  AutomationProvider*  void (AutomationProvider::*)(int  int  bool*)) + 0x28 (tuple.h:593)  23 Google Chrome Framew0.244.0.0            0x0235657e AutomationProvider::OnMessageReceived(IPC::Message const&amp;) + 0x1e (automation_provider.cc:295)  24 Google Chrome Framew0.244.0.0            0x02c4c5bd IPC::SyncChannel::ReceivedSyncMsgQueue::DispatchMessagesTask() + 0xe (ipc_sync_channel.cc:103)  25 Google Chrome Framew0.244.0.0            0x02787c5a MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;) + 0x7 (message_loop.cc:320)  26 Google Chrome Framew0.244.0.0            0x0278800a MessageLoop::DoWork() + 0xb (message_loop.cc:435)  27 Google Chrome Framew0.244.0.0            0x0278bb93 base::MessagePumpCFRunLoopBase::RunWorkSource(void*) + 0xa (message_pump_mac.mm:291)  28 CoreFoundation      0.476.19.0           0x904fa40e CFRunLoopRunSpecific + 0xc8e  29 CoreFoundation      0.476.19.0           0x904faaa7 CFRunLoopRunInMode + 0x57  30 HIToolbox           0.353.0.0            0x90aaf2ab RunCurrentEventLoopInMode + 0x11a  31 HIToolbox           0.353.0.0            0x90aaeffd ReceiveNextEventCommon + 0xae  32 HIToolbox           0.353.0.0            0x90aaef38 BlockUntilNextEventMatchingListInMode + 0x69  33 AppKit              0.949.54.0           0x96d596d4 _DPSNextEvent + 0x290  34 AppKit              0.949.54.0           0x96d58f87 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 0x7f  35 AppKit              0.949.54.0           0x96d51f9e -[NSApplication run] + 0x31a  36 Google Chrome Framew0.244.0.0            0x0278b63c base::MessagePumpNSApplication::DoRun(base::MessagePump::Delegate*) + 0x19 (message_pump_mac.mm:67  7)  37 Google Chrome Framew0.244.0.0            0x0278adc5 base::MessagePumpCFRunLoopBase::Run(base::MessagePump::Delegate*) + 0xb (message_pump_mac.mm:213)  38 Google Chrome Framew0.244.0.0            0x02787ba3 MessageLoop::Run() + 0xb (message_loop.cc:205)  39 Google Chrome Framew0.244.0.0            0x023983f2 BrowserMain(MainFunctionParams const&amp;) + 0x7 (browser_main.cc:151)  40 Google Chrome Framew0.244.0.0            0x022cc583 ChromeMain + 0xd (chrome_dll_main.cc:635)  41 Google Chrome                            0x00001fc5   42         Product: Chrome_Mac  Stack Signature: objc_msgSend-8EF5E2  New Signature Label: objc_msgSend  New Signature Hash: 221a0015_57d98c83_ebe73960_313fc84d_37ec7cc6    Report link: http://go/crash/reportdetail?reportid=63dc63e16119c1a0    Meta information:  Product Name: Chrome_Mac  Product Version: 4.0.244.0  Report ID: 63dc63e16119c1a0  Client ID: 8BED9FED947B1412E5040EE4F8B9A1DA  Report Time: 2009/11/12 20:10:12  Thu  Uptime: 0 sec  Cumulative Uptime: 0 sec  User Comments:   OS Name: Mac OS X  OS Version: 10.5.8 9L31a  CPU Architecture: x86  CPU Info: GenuineIntel family 6 model 15 stepping 6  ptype: browser  plat: OS X  sendaction: _NSThemeCloseWidget tag 0 sending _close: to 0x158a20   </pre>