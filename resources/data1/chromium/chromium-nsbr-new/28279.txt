<title>Issue 28279 -   chromium -    UninitCondition in MessagePortDispatcher::Observe - Project Hosting on Google Code</title> <pre> I first spotted this on the mac valgrind ui test bot around <a href="/p/chromium/source/detail?r=32030">r32030</a>. It's  flaky and doesn't always show up.    13:21:44 memcheck_analyze.py [ERROR] FAIL! There were 1 errors:  13:22:39 memcheck_analyze.py [ERROR] UninitCondition  Command:  /b/slave/chromium-rel-mac-valgrind-ui-3/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium  --no-first-run --no-default-browser-check --enable-file-cookies  --testing-channel=ChromeTestingInterface:74404.33 --homepage=about:blank  --disable-web-resources  --user-data-dir=/private/var/folders/pA/pAFAklSwHlKv-nkZRJzCU++++TM/-Tmp-/org.chromium.7Jn92L/test_user_data  --metrics-recording-only --enable-logging  --test-name=WorkerTest.SharedWorkerFastLayoutTests  Conditional jump or move depends on uninitialised value(s)    MessagePortDispatcher::Observe(NotificationType  NotificationSource  const&amp;  NotificationDetails const&amp;) (message_port_dispatcher.cc:247)    NotificationService::Notify(NotificationType  NotificationSource const&amp;   NotificationDetails const&amp;) (notification_service.cc:112)    ResourceMessageFilter::~ResourceMessageFilter()  (resource_message_filter.cc:205)    void  ChromeThread::DeleteOnThread&lt;(ChromeThread::ID)4&gt;::Destruct&lt;ResourceMessageFilter&gt;(ResourceMessageFilter*)  (chrome_thread.h:134)    ResourceMessageFilter::OnDestruct() (resource_message_filter.cc:413)     IPC::ChannelProxy::MessageFilterTraits::Destruct(IPC::ChannelProxy::MessageFilter*)  (ipc_channel_proxy.h:97)    base::RefCountedThreadSafe&lt;IPC::ChannelProxy::MessageFilter   IPC::ChannelProxy::MessageFilterTraits&gt;::Release() (ref_counted.h:140)    scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;::~scoped_refptr()  (ref_counted.h:232)    scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;::~scoped_refptr()  (ref_counted.h:232)    __gnu_cxx::new_allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;  &gt;::destroy(scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*)  (ext/new_allocator.h:107)    void  std::_Destroy&lt;__gnu_cxx::__normal_iterator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*   std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt; &gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt;  &gt;(__gnu_cxx::__normal_iterator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*   std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt; &gt;   __gnu_cxx::__normal_iterator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*   std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt; &gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt;)  (stl_construct.h:174)    std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt;  &gt;::erase(__gnu_cxx::__normal_iterator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*   std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt; &gt;   __gnu_cxx::__normal_iterator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;*   std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt; &gt;)  (vector.tcc:125)    std::vector&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt;   std::allocator&lt;scoped_refptr&lt;IPC::ChannelProxy::MessageFilter&gt; &gt; &gt;::clear()  (stl_vector.h:749)    IPC::ChannelProxy::Context::OnChannelClosed() (ipc_channel_proxy.cc:144)    IPC::SyncChannel::SyncContext::OnChannelClosed() (ipc_sync_channel.cc:324)    void DispatchToMethod&lt;IPC::ChannelProxy::Context  void  (IPC::ChannelProxy::Context::*)()&gt;(IPC::ChannelProxy::Context*  void  (IPC::ChannelProxy::Context::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;IPC::ChannelProxy::Context  void  (IPC::ChannelProxy::Context::*)()  Tuple0&gt;::Run() (task.h:277)    MessageLoop::RunTask(Task*) (message_loop.cc:320)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (message_loop.cc:328)    MessageLoop::DoWork() (message_loop.cc:435)    base::MessagePumpLibevent::Run(base::MessagePump::Delegate*)  (message_pump_libevent.cc:238)    MessageLoop::RunInternal() (message_loop.cc:205)    MessageLoop::RunHandler() (message_loop.cc:177)    MessageLoop::Run() (message_loop.cc:155)    base::Thread::Run(MessageLoop*) (thread.cc:132)    base::Thread::ThreadMain() (thread.cc:153)    ThreadFunc(void*)  (/b/slave/chromium-rel-mac-valgrind-ui-3/build/src/base/platform_thread_posix.cc:26)    _pthread_start    thread_start  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Cond      fun:_ZN21MessagePortDispatcher7ObserveE16NotificationTypeRK18NotificationSourceRK19NotificationDetails      fun:_ZN19NotificationService6NotifyE16NotificationTypeRK18NotificationSourceRK19NotificationDetails     fun:_ZN21ResourceMessageFilterD0Ev      fun:_ZN12ChromeThread14DeleteOnThreadILNS_2IDE4EE8DestructI21ResourceMessageFilterEEvPT_     fun:_ZN21ResourceMessageFilter10OnDestructEv      fun:_ZN3IPC12ChannelProxy19MessageFilterTraits8DestructEPNS0_13MessageFilterE      fun:_ZN4base20RefCountedThreadSafeIN3IPC12ChannelProxy13MessageFilterENS2_19MessageFilterTraitsEE7ReleaseEv     fun:_ZN13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEED2Ev     fun:_ZN13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEED1Ev      fun:_ZN9__gnu_cxx13new_allocatorI13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEEE7destroyEPS5_      fun:_ZSt8_DestroyIN9__gnu_cxx17__normal_iteratorIP13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEESt6vectorIS6_SaIS6_EEEES9_EvT_SC_T0_      fun:_ZNSt6vectorI13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEESaIS4_EE5eraseEN9__gnu_cxx17__normal_iteratorIPS4_S6_EESA_      fun:_ZNSt6vectorI13scoped_refptrIN3IPC12ChannelProxy13MessageFilterEESaIS4_EE5clearEv     fun:_ZN3IPC12ChannelProxy7Context15OnChannelClosedEv     fun:_ZN3IPC11SyncChannel11SyncContext15OnChannelClosedEv      fun:_Z16DispatchToMethodIN3IPC12ChannelProxy7ContextEMS2_FvvEEvPT_T0_RK6Tuple0     fun:_ZN14RunnableMethodIN3IPC12ChannelProxy7ContextEMS2_FvvE6Tuple0E3RunEv     fun:_ZN11MessageLoop7RunTaskEP4Task     fun:_ZN11MessageLoop21DeferOrRunPendingTaskERKNS_11PendingTaskE     fun:_ZN11MessageLoop6DoWorkEv     fun:_ZN4base19MessagePumpLibevent3RunEPNS_11MessagePump8DelegateE     fun:_ZN11MessageLoop11RunInternalEv   </pre>