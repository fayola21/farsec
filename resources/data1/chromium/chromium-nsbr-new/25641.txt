<title>Issue 25641 -   chromium -    Tcmalloc's heap checker reports memory leaks from libevent - Project Hosting on Google Code</title> <pre> Running net_unittests on Linux with tcmalloc's heapchecker enabled and  HEAPCHECK=draconian the following report is printed at the end of the program:    The 20 largest leaks:  Leak of 9227088 bytes in 64077 objects allocated from:  	@ 0xd11028 event_base_once  	@ 0xd10d54 event_base_loopexit  	@ 0xc672b4 base::MessagePumpLibevent::Run  	@ 0xc5e911 MessageLoop::RunInternal  	@ 0xc5e931 MessageLoop::RunHandler  	@ 0xc5e9d6 MessageLoop::Run  	@ 0xb3111f URLRequestTest_FileTest_Test::TestBody  	@ 0xcb6931 testing::Test::Run  	@ 0xcba0a2 testing::internal::TestInfoImpl::Run  	@ 0xcba1d8 testing::TestCase::Run  	@ 0xcbac37 testing::internal::UnitTestImpl::RunAllTests  	@ 0xcbad87 testing::UnitTest::Run  	@ 0x9baf5d TestSuite::Run  	@ 0x9b9d59 main  	@ 0x2ba7a92f21c4 __libc_start_main    event_base_once() and event_loopexit() are the internals of libevent (see  third_party/libevent/event.h)  The same leaks have been seen under Valgrind but are currently suppressed.  Running Chrome itself with HEAPCHECK=draconian doesn't show these reports  (they're wiped out by libpango leaks)  but they still may be dangerous.    To reproduce the reports  you should set the 'linux_use_tcmalloc' variable  to 1 in your include.gypi and patch  third_party/tcmalloc/tcmalloc/src/heap-checker.cc with the attached patch  (suggested by Maxim Lifantsev)                 </pre>