<title>Issue 39706 -   chromium -    XSLT yields different same-origin policy - Project Hosting on Google Code</title> <pre> Chrome Version       : 5.0.360.0  WebKit Version       : 533.3  V8 Version           : 2.1.7         Safari 4: FAIL    Firefox 3.x: OK           IE 7: Unknown           IE 8: OK    Opera 10.51: OK    == Reproducing the problem ==  1. Visit <a href="http://www.dionyziz.com/xss/parent.xml">http://www.dionyziz.com/xss/parent.xml</a>  2. Click on the link entitled &quot;Click Me!&quot;  3. Notice the text within the iframe has a sad face.    == Detailed description of the testcase ==  I have created a very simple test cases that illustrate the problem. The   test suite consists of the following files:  (A) <a href="http://www.dionyziz.com/xss/parent.xml">http://www.dionyziz.com/xss/parent.xml</a>  (B) <a href="http://www.dionyziz.com/xss/parent.xsl">http://www.dionyziz.com/xss/parent.xsl</a>  (C) <a href="http://www.dionyziz.com/xss/parent.html">http://www.dionyziz.com/xss/parent.html</a>  (D) <a href="http://subdomain.dionyziz.com/iframe.html">http://subdomain.dionyziz.com/iframe.html</a>    (C) is an HTML file that will create iframe pointed to the (D) file when the   link &quot;Click Me&quot; is clicked. It also contains a Javascript function called   &quot;callback&quot; which displays a simple alert box  but this function is not   called from here. The iframe created contains a file that is on a different   subdomain than its parent; even though the two HTML files live on a   different subdomain  dionyziz.com and subdomain.dionyziz.com respectively    calling functions of the parent from the iframe is possible because of a   technique known as &quot;domain reduction&quot; which is used to get around same-  origin policies. This is a legitimate technique  and works perfectly in   Firefox and Internet Explorer as expected. This also works fine in Chrome    as expected. Notice that both the iframe and the parent reduce their   subdomains to &quot;dionyziz.com&quot;. The iframe then performs a call to the   &quot;callback&quot; function of the parent to display the alert. So far so good.    Now  in constrast  (A) is an empty XML file that is transformed using the   (B) XSL file and is expected to yield the exact same document as (C). This   seems to happen  and as far as I examine the source code of the result of   the XSL processor  it is in fact exactly the same as the HTML file. However    the same-origin &quot;reduction&quot; technique no longer works after clicking on the   &quot;Click Me&quot; link. The following error appears in the Javascript error   console:    &quot;Unsafe JavaScript attempt to access frame with URL   <a href="http://www.dionyziz.com/xss/parent.xml">http://www.dionyziz.com/xss/parent.xml</a> from frame with URL   <a href="http://subdomain.dionyziz.com/iframe.html">http://subdomain.dionyziz.com/iframe.html</a>. Domains  protocols and ports must   match.&quot;    When the Javascript console is used to issue an examination of the   &quot;document.domain&quot; attribute  it seems to have been modified accurately for   the parent. Even though it has been  the same-origin restrictions remain   unaffected  in contrast to what would have been expected.    This is an important issue for developers working with XSLT and Comet   technologies. It implies that XSLT and Comet cannot be used together in   Chrome without using a reverse proxy on the server-side  an architecture   often undesired due to decreased performance. Using an extra subdomain as in   my example is a required step when the comet server and the normal HTTP   server live on different IP addresses  an important architectural design   desicion for many  to allow for greater scalability.    This seems to be a general WebKit problem. Safari also exhibits this   undesired discrimination between XSLT-generated and pure HTML websites    appearing to apply different same-origin policies for each.    Thank you for reading and for looking into this! :-)    Dionysis Zindros   Lead Developer at www.zino.gr   </pre>