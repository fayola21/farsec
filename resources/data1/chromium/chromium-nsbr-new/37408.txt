<title>Issue 37408 -   chromium -    Data race on boole in chrome/browser/sync/engine/syncer.cc - Project Hosting on Google Code</title> <pre> This was detected by ThreadSanitizer ( <a href="http://www.chromium.org/developers/how-tos/using-valgrind/threadsanitizer">http://www.chromium.org/developers/how-tos/using-valgrind/threadsanitizer</a> ).    Here's the short version of the report I saw:    WARNING: Possible data race during read of size 1 at 0x47930D0: {{{     T25 (SyncEngine_SyncerThread) (locks held: {}):      #0  browser_sync::Syncer::ExitRequested() chrome/browser/sync/engine/syncer.h:81      #1  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*  browser_sync::SyncerStep  browser_sync::SyncerStep) chrome/browser/sync/engine/syncer.cc:112      #2  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession*) chrome/browser/sync/engine/syncer.cc:95      #3  browser_sync::Syncer::SyncShare(browser_sync::sessions::SyncSession::Delegate*) chrome/browser/sync/engine/syncer.cc:79      #4  browser_sync::SyncerThread::SyncMain(browser_sync::Syncer*) chrome/browser/sync/engine/syncer_thread.cc:377      ...    Concurrent write(s) happened at (OR AFTER) these points:     T0 (locks held: {L1370}):      #0  browser_sync::Syncer::RequestEarlyExit() chrome/browser/sync/engine/syncer.h:82      #1  browser_sync::SyncerThread::Stop(int) chrome/browser/sync/engine/syncer_thread.cc:149      #2  browser_sync::SyncerThreadWithSyncerTest_Polling_Test::TestBody() chrome/browser/sync/engine/syncer_thread_unittest.cc:596      #3  testing::Test::Run() testing/gtest/src/gtest.cc:2085     ...  }    As you can see  one thread spin-waits for another thread reading a boolean &quot;early_exit_requested_&quot;.  This is a data race described at <a href="http://code.google.com/p/data-race-test/wiki/PopularDataRaces#Notification">http://code.google.com/p/data-race-test/wiki/PopularDataRaces#Notification</a> </pre>