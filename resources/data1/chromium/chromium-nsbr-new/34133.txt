<title>Issue 34133 -   chromium -    Extensions with infinite loops can DCHECK browser - Project Hosting on Google Code</title> <pre>   1. Create an extension (or use the one attached) with a background page that has an infinite   loop  and has a browserAction with a popup.  2. Load the extension  3. Disable the extension  4. Uninstall the extension    What is the expected output? What do you see instead? It should uninstall just fine  instead It   crashes.    This can also be reproduced if you have a popup with an infinite while(true) loop.  If you open   the popup  then disable and uninstall you get the same crash. I also notice that popup.html is   still shown in the &quot;Inspect active pages&quot; list in the extensions page  though the bad   background.html is not.    #0  DebugUtil::BreakDebugger () at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/debug_util_posix.cc:240  #1  0x007f1d90 in logging::LogMessage::~LogMessage (this=0xbfffb608) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/logging.cc:565  #2  0x002250bc in -[BrowserActionsController removeActionButtonForExtension:]   (self=0x1260a0e0  _cmd=0x1c8c5b0  extension=0x1400c000) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/cocoa/extensions/browser  _actions_controller.mm:179  #3  0x0022687f in ExtensionsServiceObserverBridge::Observe (this=0x1260a240  type={value =   NotificationType::EXTENSION_UNLOADED_DISABLED}  source=@0xbfffbac8  details=@0xbfffbac4)   at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/cocoa/extensions/browser  _actions_controller.mm:64  #4  0x000b97f0 in NotificationService::Notify (this=0x8824200  type={value =   NotificationType::EXTENSION_UNLOADED_DISABLED}  source=@0xbfffbac8  details=@0xbfffbac4)   at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/common/notification_service.cc:119  #5  0x00372a1d in ExtensionsService::UnloadExtension (this=0x6c25b90    extension_id=@0x69e4198) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extensions_ser  vice.cc:565  #6  0x00374b21 in ExtensionsService::UninstallExtension (this=0x6c25b90    extension_id=@0x69e4198  external_uninstall=false) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extensions_ser  vice.cc:260  #7  0x00381fbe in ExtensionsDOMHandler::InstallUIProceed (this=0x69e4160    create_app_shortcut=false) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extensions_ui.c  c:429  #8  0x0021fd2c in ExtensionInstallUI::ShowExtensionInstallUIPromptImpl (profile=0x6c1cfa0    delegate=0x69e4174  extension=0x1400c000  icon=0x9e187d0  warning_text=@0xbfffbe58    is_uninstall=true) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/cocoa/extension_install_pr  ompt.mm:46  #9  0x003410ff in ExtensionInstallUI::ShowExtensionUninstallPrompt (profile=0x6c1cfa0    delegate=0x69e4174  extension=0x1400c000  icon=0x9e187d0  warning_text=@0xbfffbe58)   at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extension_inst  all_ui.cc:130  #10 0x0034120b in ExtensionInstallUI::ConfirmUninstall (this=0xbfffc0c4    delegate=0x69e4174  extension=0x1400c000  icon=0x9e187d0) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extension_inst  all_ui.cc:185  #11 0x003822b1 in ExtensionsDOMHandler::HandleUninstallMessage (this=0x69e4160    value=0x6831210) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/extensions/extensions_ui.c  c:422  #12 0x00386b74 in DispatchToMethod&lt;ExtensionsDOMHandler  void   (ExtensionsDOMHandler::*)(Value const*)  Value const*&gt; (obj=0x69e4160  method={__pfn =   0x381fe0 &lt;ExtensionsDOMHandler::HandleUninstallMessage(Value const*)&gt;  __delta = 0}    arg=@0xbfffc18c) at tuple.h:422  #13 0x00386ba2 in CallbackImpl&lt;ExtensionsDOMHandler  void   (ExtensionsDOMHandler::*)(Value const*)  Tuple1&lt;Value const*&gt; &gt;::RunWithParams   (this=0x6933100  params=@0xbfffc18c) at task.h:563  #14 0x002a8488 in CallbackRunner&lt;Tuple1&lt;Value const*&gt; &gt;::Run&lt;Value const*&gt;   (this=0x6933100  a=@0xbfffc1e8) at task.h:528  #15 0x002a7778 in DOMUI::ProcessDOMUIMessage (this=0x69e4440  message=@0xbfffc438    content=0x6831210  request_id=-1  has_callback=false) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/dom_ui/dom_ui.cc:48  #16 0x0063fd94 in TabContents::ProcessDOMUIMessage (this=0x7838a00    message=@0xbfffc438  content=0x6831210  request_id=-1  has_callback=false) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/tab_contents/tab_contents.  cc:2335  #17 0x0050c539 in RenderViewHost::OnMsgDOMUISend (this=0x125369b0    message=@0xbfffc438  content=@0xbfffc43c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/renderer_host/render_view  _host.cc:1242  #18 0x00513274 in DispatchToMethod&lt;RenderViewHost  void (RenderViewHost::*)(std::string   const&amp;  std::string const&amp;)  std::string  std::string&gt; (obj=0x125369b0  method={__pfn =   0x50c32c &lt;RenderViewHost::OnMsgDOMUISend(std::string const&amp;  std::string const&amp;)&gt;  __delta   = 0}  arg=@0xbfffc438) at tuple.h:429  #19 0x0051db38 in IPC::MessageWithTuple&lt;Tuple2&lt;std::string  std::string&gt;   &gt;::Dispatch&lt;RenderViewHost  void (RenderViewHost::*)(std::string const&amp;  std::string const&amp;)&gt;   (msg=0x16a0029c  obj=0x125369b0  func={__pfn = 0x50c32c   &lt;RenderViewHost::OnMsgDOMUISend(std::string const&amp;  std::string const&amp;)&gt;  __delta = 0}) at   ipc_message_utils.h:992  #20 0x00510cf9 in RenderViewHost::OnMessageReceived (this=0x125369b0    msg=@0x16a0029c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/renderer_host/render_view  _host.cc:754  #21 0x004f0696 in BrowserRenderProcessHost::OnMessageReceived (this=0x1252d540    msg=@0x16a0029c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/renderer_host/browser_ren  der_process_host.cc:788  #22 0x00e923fe in IPC::ChannelProxy::Context::OnDispatchMessage (this=0x69f8ba0    message=@0x16a0029c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/ipc/ipc_channel_proxy.cc:204  #23 0x00e934ac in DispatchToMethod&lt;IPC::ChannelProxy::Context  void   (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  IPC::Message&gt; (obj=0x69f8ba0    method={__pfn = 0xe9236e &lt;IPC::ChannelProxy::Context::OnDispatchMessage(IPC::Message   const&amp;)&gt;  __delta = 0}  arg=@0x16a0029c) at tuple.h:422  #24 0x00e934e7 in RunnableMethod&lt;IPC::ChannelProxy::Context  void   (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt; &gt;::Run   (this=0x16a00280) at task.h:289  #25 0x007f6312 in MessageLoop::RunTask (this=0xbfffeae8  task=0x16a00280) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:320  #26 0x007f69f1 in MessageLoop::DeferOrRunPendingTask (this=0xbfffeae8    pending_task=@0xbfffc9fc) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:328  #27 0x007f6c81 in MessageLoop::DoWork (this=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:435  #28 0x007c10d8 in base::MessagePumpCFRunLoopBase::RunWork (this=0x6c13210) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_pump_mac.mm:291  #29 0x007c111d in base::MessagePumpCFRunLoopBase::RunWorkSource (info=0x6c13210) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_pump_mac.mm:269  #30 0x97e678cb in __CFRunLoopDoSources0 ()  #31 0x97e6585f in __CFRunLoopRun ()  #32 0x97e64d34 in CFRunLoopRunSpecific ()  #33 0x97e64b61 in CFRunLoopRunInMode ()  #34 0x94717fec in RunCurrentEventLoopInMode ()  #35 0x94717da3 in ReceiveNextEventCommon ()  #36 0x94717c28 in BlockUntilNextEventMatchingListInMode ()  #37 0x90ee3b99 in _DPSNextEvent ()  #38 0x90ee340e in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()  #39 0x90ea55fb in -[NSApplication run] ()  #40 0x007c0c1a in base::MessagePumpNSApplication::DoRun (this=0x6c13210    delegate=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_pump_mac.mm:677  #41 0x007c1209 in base::MessagePumpCFRunLoopBase::Run (this=0x6c13210    delegate=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_pump_mac.mm:213  #42 0x007f7254 in MessageLoop::RunInternal (this=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:205  #43 0x007f726f in MessageLoop::RunHandler (this=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:177  #44 0x007f72d3 in MessageLoop::Run (this=0xbfffeae8) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/base/message_loop.cc:155  #45 0x0018a0f2 in (anonymous namespace)::RunUIMessageLoop (browser_process=0x6c12410)   at /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/browser_main.cc:165  #46 0x0018c30a in BrowserMain (parameters=@0xbffff3cc) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/browser/browser_main.cc:994  #47 0x000085bb in ChromeMain (argc=2  argv=0xbffff50c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/app/chrome_dll_main.cc:756  #48 0x00001f5e in main (argc=2  argv=0xbffff50c) at   /Users/michaelfeldstein/Projects/ChromiumGit/src/chrome/app/chrome_exe_main.mm:17  #49 0x00001f1a in start ()     </pre>