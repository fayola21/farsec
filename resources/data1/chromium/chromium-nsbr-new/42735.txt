<title>Issue 42735 -   chromium -    Cursor movement DOM events are slow in contentEditable divs - Project Hosting on Google Code</title> <pre> Chrome Version       : 5.0.342.7 (Official Build 42476) beta  URLs (if applicable) : <a href="http://marijn.haverbeke.nl/codemirror/jstest.html">http://marijn.haverbeke.nl/codemirror/jstest.html</a>           Safari 4: OK    Firefox 3.6: OK    Chrome 5.0.375.23 (Official Build 4554) dev: FAIL      1. Paste a long (~3000-line) code sample into the editable frame in the   above jstest.html link  2. Scroll to the end of the editable area and place the cursor inside  3. Hold down the up or down arrow      Cursor movement is relatively snappy.      Cursor movement is slooooow and consumes lots of CPU.    I ran tests with Speed Tracer and found that keydown DOM events are taking   in excess of 100ms each. Javascript execution takes less than 1% of the   total time  meaning that CodeMirror itself is not to blame. The remaining   99% of the time is Chrome itself firing the event. 100ms for each keydown   event is a noticeable lag for a single cursor movement and a painful   sluggishness when holding down the cursor key.    Cursor movement at the top of a long document is just fine  but it gets   worse and worse as you get closer to the end of the document.    A simplified html structure of the test page is as follows:  &lt;body&gt;   &lt;iframe&gt;    &lt;body contentEditable=&quot;true&quot;&gt;     Line 1&lt;br&gt;     Line 2&lt;br&gt;     Line 3&lt;br&gt;    &lt;/body&gt;   &lt;/iframe&gt;  &lt;/body&gt;    Google Docs (the old version) also uses contentEditable  but cursor   movement is not slow in a 3000-line document. Docs happens to use a   document structure like this:  &lt;body&gt;   &lt;iframe&gt;    &lt;body contentEditable=&quot;true&quot;&gt;     &lt;div&gt;Line 1&lt;/div&gt;     &lt;div&gt;Line 2&lt;/div&gt;     &lt;div&gt;Line 3&lt;/div&gt;    &lt;/body&gt;   &lt;/iframe&gt;  &lt;/body&gt;    If you paste some html that looks like the first sample (with &lt;br&gt;   separating the lines) into Docs  cursor movement in the resulting document   is slow as well.    I've attached three files:  - A long Javascript file that you can paste into the above link to trigger   the bug.  - A Speed Tracer report from moving the cursor around in CodeMirror  - A Speed Tracer report from moving the cursor around in Google Docs (with   the offending html pasted in)   </pre>