<title>Issue 31634 -   chromium -    Mac Valgrind UI regression between r35536 and r35540 - Project Hosting on Google Code</title> <pre> <a href="http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20UI%2">http://build.chromium.org/buildbot/waterfall/builders/Chromium%20Mac%20UI%2</a>  0(valgrind)(1)/builds/1151/      Build Properties:    Name	Value	Source  branch	src	Build  buildername	Chromium Mac UI (valgrind)(1)	Build  buildnumber	1151	Build  got_revision	35540	Source  <a href="/p/chromium/source/detail?r=35540">revision	35540</a>	Build  scheduler	chromium	Scheduler  slavename	chromemacbuild3	BuildSlave  Blamelist:    evan@chromium.org  johnnyg@chromium.org  phajdan.jr@chromium.org  pkasting@chromium.org  zork@google.com  Timing    Start	Tue Jan 5 10:52:35 2010  End	Tue Jan 5 12:06:46 2010  Elapsed	1 hrs  14 mins  11 secs      -----------------------------------------------------  Suppressions used:    count name        1 darwin-still-reachable-1        1 darwin-still-reachable-2        1   intentional_ChromeThreadTest_NotReleasedIfTargetThreadNonExistent_Test_leak        2 bug_16128_2        2 bug_17540        2 bug_31586b        2 logging::InitLogging never frees filename. It would be hard to free   properly.        2 static_theme_cache        3 bug_31586a        4 bug_17291        5 intentional_WebCore_XMLNames_init_leak        5 macos-__setenv-leak-see-our-bug-188572        8 bug_17297        8 bug_17385       11 bug_11270       11 bug_19191       14 bug_21479       23 bug_11333       35 bug_20653a       36 bug_27315      101 FIXME mac kevent libevent probably needs valgrind hooks      200 macos-vsyslog-hole      592 bug_17996      754 bug_16579      978 macos-futimes-1     1458 bug_30264     1611 Uninitialized value in deflate  -----------------------------------------------------  02:04:57 memcheck_analyze.py [ERROR] FAIL! There were 1 errors:   02:05:47 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  Command: src/xcodebuild/Debug/unit_tests --gtest_filter=-  VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTes  t.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest:IPCSyncChannelTe  st.*:WebDropTargetTest.URL:WebDropTargetTest.Data:AutocompleteTextFieldEdit  orTest.CutCopyTest:DownloadUtilTest.AddFileToPasteboardTest:FindPasteboardT  est.ReadingFromPboardUpdatesFindText:FindPasteboardTest.SendsNotificationWh  enTextChanges:RenderViewTest.MacTestCmdUp:ChromeBrowserWindowTest.DoesHideT  itle:ClearBrowsingDataControllerTest.*:NSMenuItemAdditionsTest.TestMOnDiffe  rentLayouts:PrefsControllerTest.GetPrefsViewForPage:PrefsControllerTest.Get  ToolbarItemForPage:PrefsControllerTest.ShowAndClose:PrefsControllerTest.Swi  tchToPage:RenderViewTest.OnPrintPages:RenderViewTest.Print*:TabStripControl  lerTest.AddRemoveTabs:TaskManagerWindowControllerTest.* --gtest_print_time  537 (24 direct  513 indirect) bytes in 1 blocks are definitely lost in loss   record 11 703 of 12 285    operator new(unsigned long) (sers/chrome-bot/valgrind-10880-  redzone/coregrind/m_replacemalloc/vg_replace_malloc.c:235)      __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;std::basic_string&lt;cha  r  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt; &gt;::allocate(unsigned long  void   const*) (ext/new_allocator.h:88)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt; &gt;::_M_get_node() (stl_tree.h:356)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt;   &gt;::_M_create_node(std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; const&amp;)   (stl_tree.h:365)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt;   &gt;::_M_insert(std::_Rb_tree_node_base*  std::_Rb_tree_node_base*    std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; const&amp;)   (stl_tree.h:789)    std::_Rb_tree&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt;    std::_Select1st&lt;std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; &gt;    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt;   &gt;::insert_equal(std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; const&amp;)   (stl_tree.h:816)    std::multimap&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt;  net::CookieMonster::CanonicalCookie*    std::less&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;  std::allocator&lt;std::pair&lt;std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const    net::CookieMonster::CanonicalCookie*&gt; &gt;   &gt;::insert(std::pair&lt;std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const  net::CookieMonster::CanonicalCookie*&gt; const&amp;)   (stl_multimap.h:348)    net::CookieMonster::InternalInsertCookie(std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;    net::CookieMonster::CanonicalCookie*  bool) (cookie_monster.cc:518)    net::CookieMonster::SetCookieWithCreationTimeWithOptions(GURL const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;  base::Time const&amp;  net::CookieOptions const&amp;)   (cookie_monster.cc:486)    net::CookieMonster::SetCookieWithOptions(GURL const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;  net::CookieOptions const&amp;) (cookie_monster.cc:412)    net::CookieMonster::SetCookie(GURL const&amp;  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)   (cookie_monster.cc:397)    (anonymous   namespace)::CookiesWindowControllerTest_TreeNodeChildrenReordered_Test::Tes  tBody() (cookies_window_controller_unittest.mm:295)    testing::Test::Run() (gtest.cc:2085)    testing::internal::TestInfoImpl::Run() (gtest.cc:2304)    testing::TestCase::Run() (gtest.cc:2412)    testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4013)    testing::UnitTest::Run() (gtest.cc:3680)    TestSuite::Run() (test/test_suite.h:124)    main (/b/slave/chromium-dbg-mac-  valgrind/build/src/chrome/test/unit/run_all_unittests.cc:8)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*       fun:_ZN9__gnu_cxx13new_allocatorISt13_Rb_tree_nodeISt4pairIKSsPN3net13Cooki  eMonster15CanonicalCookieEEEE8allocateEmPKv       fun:_ZNSt8_Rb_treeISsSt4pairIKSsPN3net13CookieMonster15CanonicalCookieEESt1  0_Select1stIS6_ESt4lessISsESaIS6_EE11_M_get_nodeEv       fun:_ZNSt8_Rb_treeISsSt4pairIKSsPN3net13CookieMonster15CanonicalCookieEESt1  0_Select1stIS6_ESt4lessISsESaIS6_EE14_M_create_nodeERKS6_       fun:_ZNSt8_Rb_treeISsSt4pairIKSsPN3net13CookieMonster15CanonicalCookieEESt1  0_Select1stIS6_ESt4lessISsESaIS6_EE9_M_insertEPSt18_Rb_tree_node_baseSE_RKS  6_       fun:_ZNSt8_Rb_treeISsSt4pairIKSsPN3net13CookieMonster15CanonicalCookieEESt1  0_Select1stIS6_ESt4lessISsESaIS6_EE12insert_equalERKS6_       fun:_ZNSt8multimapISsPN3net13CookieMonster15CanonicalCookieESt4lessISsESaIS  t4pairIKSsS3_EEE6insertERKS8_       fun:_ZN3net13CookieMonster20InternalInsertCookieERKSsPNS0_15CanonicalCookie  Eb       fun:_ZN3net13CookieMonster36SetCookieWithCreationTimeWithOptionsERK4GURLRKS  sRKN4base4TimeERKNS_13CookieOptionsE       fun:_ZN3net13CookieMonster20SetCookieWithOptionsERK4GURLRKSsRKNS_13CookieOp  tionsE     fun:_ZN3net13CookieMonster9SetCookieERK4GURLRKSs       fun:_ZN12_GLOBAL__N_158CookiesWindowControllerTest_TreeNodeChildrenReordere  d_Test8TestBodyEv     fun:_ZN7testing4Test3RunEv     fun:_ZN7testing8internal12TestInfoImpl3RunEv     fun:_ZN7testing8TestCase3RunEv     fun:_ZN7testing8internal12UnitTestImpl11RunAllTestsEv     fun:_ZN7testing8UnitTest3RunEv     fun:_ZN9TestSuite3RunEv     fun:main  }   </pre>