<title>Issue 35182 -   chromium -    Invalid read in SkCanvas::updateDeviceCMCache - Project Hosting on Google Code</title> <pre> This happened on the Webkit Linux (valgrind layout) bot on run 5674  which   covered <a href="/p/chromium/source/detail?r=38482">r38482</a> through <a href="/p/chromium/source/detail?r=38487">r38487</a>. Most likely cause is <a href="/p/chromium/source/detail?r=38482">r38482</a>.    Command: /b/slave/webkit-rel-linux-valgrind-  layout/build/src/sconsbuild/Release/test_shell --layout-tests --pixel-  tests=/b/slave/webkit-rel-linux-valgrind-  layout/build/src/webkit/Release/layout-test-results/png_result0.png --time-  out-ms=200000 file:///b/slave/webkit-rel-linux-valgrind-  layout/build/src/third_party/WebKit/LayoutTests/fast/repaint/box-shadow-  v.html  Invalid read of size 1    SkCanvas::updateDeviceCMCache()   (third_party/skia/src/core/SkCanvas.cpp:532)    SkDrawIter::SkDrawIter(SkCanvas*  bool)   (third_party/skia/src/core/SkCanvas.cpp:218)    SkCanvas::LayerIter::LayerIter(SkCanvas*  bool)   (third_party/skia/src/core/SkCanvas.cpp:1424)    skia::PlatformCanvas::getTopPlatformDevice() const   (skia/ext/platform_canvas.cc:17)    TestShell::DumpImage(skia::PlatformCanvas*  std::basic_string&lt;wchar_t    std::char_traits&lt;wchar_t&gt;  std::allocator&lt;wchar_t&gt; &gt; const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;) (webkit/tools/test_shell/test_shell.cc:301)    TestShell::Dump(TestShell*) (webkit/tools/test_shell/test_shell.cc:288)    TestShell::TestFinished() (webkit/tools/test_shell/test_shell_gtk.cc:406)    LayoutTestController::WorkQueue::ProcessWorkSoon()   (webkit/tools/test_shell/layout_test_controller.cc:181)    LayoutTestController::LocationChangeDone()   (webkit/tools/test_shell/layout_test_controller.cc:511)    TestWebViewDelegate::LocationChangeDone(WebKit::WebFrame*)   (webkit/tools/test_shell/test_webview_delegate.cc:1115)    TestWebViewDelegate::didFinishLoad(WebKit::WebFrame*)   (webkit/tools/test_shell/test_webview_delegate.cc:898)    WebKit::FrameLoaderClientImpl::dispatchDidFinishLoad()   (third_party/WebKit/WebKit/chromium/src/FrameLoaderClientImpl.cpp:753)    WebCore::FrameLoader::checkLoadCompleteForThisFrame()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:2998)    WebCore::FrameLoader::recursiveCheckLoadComplete()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:3110)    WebCore::FrameLoader::checkLoadComplete()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:3123)    WebCore::FrameLoader::finishedLoading()   (third_party/WebKit/WebCore/loader/FrameLoader.cpp:2757)    WebCore::MainResourceLoader::didFinishLoading()   (third_party/WebKit/WebCore/loader/MainResourceLoader.cpp:424)    WebCore::ResourceLoader::didFinishLoading(WebCore::ResourceHandle*)   (third_party/WebKit/WebCore/loader/ResourceLoader.cpp:403)    WebCore::ResourceHandleInternal::didFinishLoading(WebKit::WebURLLoader*)   (third_party/WebKit/WebKit/chromium/src/ResourceHandle.cpp:147)      webkit_glue::WebURLLoaderImpl::Context::OnCompletedRequest(URLRequestStatus   const&amp;  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; const&amp;) (webkit/glue/weburlloader_impl.cc:543)    (anonymous   namespace)::RequestProxy::NotifyCompletedRequest(URLRequestStatus const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;) (webkit/tools/test_shell/simple_resource_loader_bridge.cc:199)    void DispatchToMethod&lt;(anonymous namespace)::RequestProxy  void   ((anonymous namespace)::RequestProxy::*)(URLRequestStatus const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;)  URLRequestStatus  std::basic_string&lt;char  std::char_traits&lt;char&gt;    std::allocator&lt;char&gt; &gt; &gt;((anonymous namespace)::RequestProxy*  void   ((anonymous namespace)::RequestProxy::*)(URLRequestStatus const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;)  Tuple2&lt;URLRequestStatus  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; const&amp;) (base/tuple.h:429)    RunnableMethod&lt;(anonymous namespace)::RequestProxy  void ((anonymous   namespace)::RequestProxy::*)(URLRequestStatus const&amp;    std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;   const&amp;)  Tuple2&lt;URLRequestStatus  std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt; &gt;::Run() (base/task.h:289)    MessageLoop::RunTask(Task*) (base/message_loop.cc:320)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)   (base/message_loop.cc:328)    MessageLoop::DoWork() (base/message_loop.cc:435)    base::MessagePumpForUI::RunWithDispatcher(base::MessagePump::Delegate*    base::MessagePumpForUI::Dispatcher*) (base/message_pump_glib.cc:199)    base::MessagePumpForUI::Run(base::MessagePump::Delegate*)   (base/message_pump_glib.h:59)    MessageLoop::RunInternal() (base/message_loop.cc:205)    MessageLoop::RunHandler() (base/message_loop.cc:177)   </pre>