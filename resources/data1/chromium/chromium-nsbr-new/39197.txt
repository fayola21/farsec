<title>Issue 39197 -   chromium -    Renderer crash in WebCore::RenderBlock::addChild on Facebook in 5.0.356 - Project Hosting on Google Code</title> <pre> This is among the topcrashers in 5.0.356.2 on Mac and Windows.  I don��_��_��_t really see it on Linux    but the crash data seems fishy on Linux  so I don��_��_��_t know if that means it��_��_��_s not happening there.    The crash reports show that these occur on Facebook.  For obvious reasons  I can��_��_��_t verify.    Mac  http://crash/reportdetail?reportid=9eb2869600208bea:    Thread 0 *CRASHED* ( EXC_BAD_ACCESS / KERN_PROTECTION_FAILURE @ 0x0000000c )    0x010ef7f2  RenderObject.h:153           WebCore::RenderBlock::addChild(WebCore::RenderObject*    WebCore::RenderObject*)  0x00dc48f4  Node.cpp:1393                WebCore::Node::createRendererIfNeeded()  0x00db1e4c  Element.cpp:830              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8932a  ContainerNode.cpp:611        WebCore::ContainerNode::attach()  0x00db1e57  Element.cpp:831              WebCore::Element::attach()  0x00d8bafd  ContainerNode.cpp:515          WebCore::ContainerNode::appendChild(WTF::PassRefPtr&lt;WebCore::Node&gt;  int&amp;  bool)  0x00cca2b9  V8NodeCustom.cpp:122           WebCore::V8Node::appendChildCallback(v8::Arguments const&amp;)  0x00a0cb4f  builtins.cc:842              Builtin_HandleApiCall  0x02faa3ed  0x1a528d21  0x02fab25e  0x02fb1b4d  0x14e21cad  0x02fab25e  0x1a5294b0  0x1a51bcca  ...... (41 stack frames dropped.)  0x0065439a  message_loop.cc:329            MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  0x00654d6a  message_loop.cc:444          MessageLoop::DoWork()  0x0062f803  message_pump_mac.mm:291        base::MessagePumpCFRunLoopBase::RunWorkSource(void*)  0x995018ca  CoreFoundation + 0x0003e8ca  __CFRunLoopDoSources0  0x994ff38e  CoreFoundation + 0x0003c38e  __CFRunLoopRun  0x994fe863  CoreFoundation + 0x0003b863  CFRunLoopRunSpecific  0x994fe690  CoreFoundation + 0x0003b690  CFRunLoopRunInMode  0x9265af0b  HIToolbox + 0x00034f0b       RunCurrentEventLoopInMode  0x9265acc2  HIToolbox + 0x00034cc2       ReceiveNextEventCommon  0x9265ab47  HIToolbox + 0x00034b47       BlockUntilNextEventMatchingListInMode  0x92a4cac4  AppKit + 0x00048ac4          _DPSNextEvent  0x92a4c305  AppKit + 0x00048305          -[NSApplication   nextEventMatchingMask:untilDate:inMode:dequeue:]  0x92a0e49e  AppKit + 0x0000a49e          -[NSApplication run]  0x0062f2ac  message_pump_mac.mm:677        base::MessagePumpNSApplication::DoRun(base::MessagePump::Delegate*)  0x0062ea35  message_pump_mac.mm:213        base::MessagePumpCFRunLoopBase::Run(base::MessagePump::Delegate*)  0x006542e3  message_loop.cc:205          MessageLoop::Run()  0x005e78ed  renderer_main.cc:277         RendererMain(MainFunctionParams const&amp;)  0x000094fc  chrome_dll_main.cc:712       ChromeMain    Windows  http://crash/reportdetail?reportid=c9e4088a15a739a5:    Thread 0 *CRASHED* ( EXCEPTION_ACCESS_VIOLATION @ 0x0000000c )    0x68366630  renderblock.cpp:282          WebCore::RenderBlock::addChild(WebCore::RenderObject   * WebCore::RenderObject *)  0x6828cb49  node.cpp:1393                WebCore::Node::createRendererIfNeeded()  0x682cacb0  element.cpp:830              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ed153  containernode.cpp:611        WebCore::ContainerNode::attach()  0x682cacb7  element.cpp:831              WebCore::Element::attach()  0x682ece4a  containernode.cpp:515          WebCore::ContainerNode::appendChild(WTF::PassRefPtr&lt;WebCore::Node&gt; int &amp; bool)  0x68415998  v8nodecustom.cpp:122           WebCore::V8Node::appendChildCallback(v8::Arguments const &amp;)  0x688738d6  builtins.cc:842              v8::internal::HandleApiCallHelper&lt;0&gt;  0x68873bde  builtins.cc:859              v8::internal::Builtin_HandleApiCall  0x01c7040d  0x01c5012c    It looks like this is occurring at WebCore::RenderObject::parent()  from   third_party/WebKit/WebCore/rendering/RenderObject.h:153:        RenderObject* parent() const { return m_parent; }    called by WebCore::RenderBlock::addChild(WebCore::RenderObject*  WebCore::RenderObject*)    from third_party/WebKit/WebCore/rendering/RenderBlock.cpp:282:                if (newChild-&gt;isInline() || beforeChild-&gt;parent()-&gt;firstChild() != beforeChild)    Here��_��_��_s the source code for these topmost WebKit frames as used in 5.0.356.2:    <a href="http://trac.webkit.org/browser/trunk/WebCore/rendering/RenderObject.h?rev=56096#L153">http://trac.webkit.org/browser/trunk/WebCore/rendering/RenderObject.h?rev=56096#L153</a>  <a href="http://trac.webkit.org/browser/trunk/WebCore/rendering/RenderBlock.cpp?rev=56096#L282">http://trac.webkit.org/browser/trunk/WebCore/rendering/RenderBlock.cpp?rev=56096#L282</a>  <a href="http://trac.webkit.org/browser/trunk/WebCore/dom/Node.cpp?rev=56096#L1393">http://trac.webkit.org/browser/trunk/WebCore/dom/Node.cpp?rev=56096#L1393</a>  <a href="http://trac.webkit.org/browser/trunk/WebCore/dom/Element.cpp?rev=56096#L830">http://trac.webkit.org/browser/trunk/WebCore/dom/Element.cpp?rev=56096#L830</a>  <a href="http://trac.webkit.org/browser/trunk/WebCore/dom/ContainerNode.cpp?rev=56096#L611">http://trac.webkit.org/browser/trunk/WebCore/dom/ContainerNode.cpp?rev=56096#L611</a>  <a href="http://trac.webkit.org/browser/trunk/WebCore/dom/Element.cpp?rev=56096#L831">http://trac.webkit.org/browser/trunk/WebCore/dom/Element.cpp?rev=56096#L831</a> </pre>