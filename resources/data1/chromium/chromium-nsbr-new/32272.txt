<title>Issue 32272 -   chromium -    AutomationProxyTest5.TestLifetimeOfDomAutomationController (mac ui) triggers a valgrind 'crash' - Project Hosting on Google Code</title> <pre> http://chrome-buildbot:8010/builders/Chromium%20Mac%20UI%20%28valgrind%29%282%29/builds/1262/steps/valgrind%20test%3A%20ui/logs/stdio    The log starts with the following (I'll attach the full log):    [----------] 1 test from AutomationProxyTest5  [ RUN      ] AutomationProxyTest5.TestLifetimeOfDomAutomationController  [52843:267:0114/091527:314863791705676:INFO:/b/slave/chromium-rel-mac-valgrind-ui-2/build/src/chrome/test/ui/ui_test.cc(1163)]  BROWSER_WRAPPER was set  prefixing command_line with  /b/slave/chromium-rel-mac-valgrind-ui-2/build/valgrind.tmp/browser_wrapper.zyQJms  --53092--  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/MacOS/Chromium:  --53092-- dSYM directory is missing; consider using --dsymutil=yes  --53092--  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/Versions/4.0.299.0/Chromium  Framework.framework/Chromium Framework:  --53092-- dSYM directory is missing; consider using --dsymutil=yes  UNKNOWN task message [id 3413  to mach_task_self()  reply 0x903]  --53093--  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/Versions/4.0.299.0/Chromium  Helper.app/Contents/MacOS/Chromium Helper:  --53093-- dSYM directory is missing; consider using --dsymutil=yes  --53093--  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/Versions/4.0.299.0/Chromium  Framework.framework/Chromium Framework:  --53093-- dSYM directory is missing; consider using --dsymutil=yes  --53093--  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/xcodebuild/Debug/Chromium.app/Contents/Versions/4.0.299.0/Chromium  Framework.framework/Libraries/libffmpegsumo.dylib:  --53093-- dSYM directory is missing; consider using --dsymutil=yes  [53092:19715:314911698201233:WARNING:/b/slave/chromium-rel-mac-valgrind-ui-2/build/src/chrome/browser/renderer_host/resource_dispatcher_host.cc(1448)]  Request doesn't seem to have our data  --53092-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV)  - exiting  --53092-- si_code=1;  Faulting address: 0x89342BDE;  sp: 0xf6cb2ca0    valgrind: the 'impossible' happened:     Killed by fatal signal  ==53092==    at 0xF00B9EBB: ???  ==53092==    by 0xF0106C77: ???  ==53092==    by 0xF0083F28: ???  ==53092==    by 0xF00843F6: ???  ==53092==    by 0xF01081B7: ???  ==53092==    by 0xF01090B7: ???  ==53092==    by 0xF011AEBF: ???  ==53092==    by 0xF011B2A2: ???    sched status:    running_tid=2    Thread 1: status = VgTs_WaitSys  ==53092==    at 0x1F7286: mach_msg_trap (in /usr/lib/libSystem.B.dylib)  ==53092==    by 0x45EE7D: CFRunLoopRunSpecific (in  /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation)  ==53092==    by 0x45FAA7: CFRunLoopRunInMode (in  /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation)  ==53092==    by 0xE3E72AB: RunCurrentEventLoopInMode (in  /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox)  ==53092==    by 0xE3E70C4: ReceiveNextEventCommon (in  /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox)  ...... snip ...    Thread 2: status = VgTs_Runnable  ==53092==    at 0x14A46: malloc (vg_replace_malloc.c:195)  ==53092==    by 0x8FE1A9B5: _Znwm (in /usr/lib/dyld)  ==53092==    by 0x8FE1AA32: _Znam (in /usr/lib/dyld)  ==53092==    by 0x8FE0E370: _ZN11ImageLoader7setPathEPKc (in /usr/lib/dyld)  ==53092==    by 0x8FE14C9D:  _ZN16ImageLoaderMachOC2EPKciPKhyyRK4statRKN11ImageLoader11LinkContextE (in  /usr/lib/dyld)  ==53092==    by 0x8FE05BEB:  _ZN4dyld14loadPhase5openEPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE (in  /usr/lib/dyld)  ==53092==    by 0x8FE05F70:  _ZN4dyld10loadPhase4EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE (in  /usr/lib/dyld)  ==53092==    by 0x8FE06444:  _ZN4dyld10loadPhase3EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE (in  /usr/lib/dyld)  ==53092==    by 0x8FE069AB:  _ZN4dyld10loadPhase1EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE (in  /usr/lib/dyld)  ==53092==    by 0x8FE06A72:  _ZN4dyld10loadPhase0EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE (in  /usr/lib/dyld)  ==53092==    by 0x8FE06BD1: _ZN4dyld4loadEPKcRKNS_11LoadContextE (in  /usr/lib/dyld)  ==53092==    by 0x8FE06DF7:  _ZN4dyld14libraryLocatorEPKcbbS1_PKN11ImageLoader10RPathChainE (in  /usr/lib/dyld)  ==53092==    by 0x8FE0F22C:  _ZN11ImageLoader22recursiveLoadLibrariesERKNS_11LinkContextERKNS_10RPathChainE  (in /usr/lib/dyld)  ==53092==    by 0x8FE1057D:  _ZN11ImageLoader4linkERKNS_11LinkContextEbbRKNS_10RPathChainE (in  /usr/lib/dyld)  ==53092==    by 0x8FE032F9:  _ZN4dyld9preflightEP11ImageLoaderRKNS0_10RPathChainE (in /usr/lib/dyld)  ==53092==    by 0x8FE0B835: dlopen_preflight (in /usr/lib/dyld)  ==53092==    by 0x23BF6F: dlopen_preflight (in /usr/lib/libSystem.B.dylib)  ==53092==    by 0x40BE2F: _CFBundleDlfcnPreflight (in  /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation)    .... snip ...    Note: see also the FAQ in the source distribution.  It contains workarounds to several common problems.  In particular  if Valgrind aborted or crashed after  identifying problems in your program  there's a good chance  that fixing those problems will prevent Valgrind aborting or  crashing  especially if it happened in m_mallocfree.c.    If that doesn't help  please report this bug to: www.valgrind.org    In the bug report  send all the above text  the valgrind  version  and what OS and version you are using.  Thanks.    --53093:0:schedule VG_(sema_down): read returned -4  /b/slave/chromium-rel-mac-valgrind-ui-2/build/src/chrome/test/ui/ui_test.cc:229:  Failure  Value of: server_-&gt;WaitForInitialLoads()    Actual: false  Expected: true  [  FAILED  ] AutomationProxyTest5.TestLifetimeOfDomAutomationController  (137101 ms)  [----------] 1 test from AutomationProxyTest5 (137101 ms total)     </pre>