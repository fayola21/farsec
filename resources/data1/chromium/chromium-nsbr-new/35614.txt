<title>Issue 35614 -   chromium -    Leak in TranslateManager unit-tests - Project Hosting on Google Code</title> <pre> Valgrind reports the following:    Command: src/sconsbuild/Release/unit_tests  --gtest_filter=-VisitedLinkEventsTest.Coalescense:VisitedLinkRelayTest.Basics:RenderViewTest.ImeComposition:DnsMasterTest.MassiveConcurrentLookupTest  --gtest_print_time  1 116 (48 direct  1 068 indirect) bytes in 1 blocks are definitely lost in  loss record 18 649 of 19 083    operator new(unsigned int)  (mp/chromium-valgrind-binaries/scripts/valgrind-source/coregrind/m_replacemalloc/vg_replace_malloc.c:228)    TranslateManager::InitiateTranslation(TabContents*   std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt;  const&amp;) (chrome/browser/translate/translate_manager.cc:137)    TranslateManager::Observe(NotificationType  NotificationSource const&amp;   NotificationDetails const&amp;) (chrome/browser/translate/translate_manager.cc:37)    NotificationService::Notify(NotificationType  NotificationSource const&amp;   NotificationDetails const&amp;) (chrome/common/notification_service.cc:112)    TabContents::OnPageContents(GURL const&amp;  int  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)  (chrome/browser/tab_contents/tab_contents.cc:1874)    RenderViewHost::OnPageContents(GURL const&amp;  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)  (chrome/browser/renderer_host/render_view_host.cc:1788)    void DispatchToMethod&lt;RenderViewHost  void (RenderViewHost::*)(GURL  const&amp;  int  std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)  GURL  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt;  std::basic_string&lt;char  std::char_traits&lt;char&gt;   std::allocator&lt;char&gt; &gt; &gt;(RenderViewHost*  void (RenderViewHost::*)(GURL  const&amp;  int  std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)  Tuple4&lt;GURL  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt;  std::basic_string&lt;char  std::char_traits&lt;char&gt;   std::allocator&lt;char&gt; &gt; &gt; const&amp;) (base/tuple.h:441)    bool IPC::MessageWithTuple&lt;Tuple4&lt;GURL  int  std::basic_string&lt;wchar_t   std::char_traits&lt;wchar_t&gt;  std::allocator&lt;wchar_t&gt; &gt;   std::basic_string&lt;char  std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; &gt;  &gt;::Dispatch&lt;RenderViewHost  void (RenderViewHost::*)(GURL const&amp;  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)&gt;(IPC::Message  const*  RenderViewHost*  void (RenderViewHost::*)(GURL const&amp;  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;))  (ipc/ipc_message_utils.h:988)    RenderViewHost::OnMessageReceived(IPC::Message const&amp;)  (chrome/browser/renderer_host/render_view_host.cc:817)    TestRenderViewHost::TestOnMessageReceived(IPC::Message const&amp;)  (chrome/browser/renderer_host/test/test_render_view_host.cc:46)    TranslateManagerTest::SimulateNavigation(GURL const&amp;  int   std::basic_string&lt;wchar_t  std::char_traits&lt;wchar_t&gt;   std::allocator&lt;wchar_t&gt; &gt; const&amp;  std::basic_string&lt;char   std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;)  (chrome/browser/translate/translate_manager_unittest.cc:30)    TranslateManagerTest_AutoTranslateOnNavigate_Test::TestBody()  (chrome/browser/translate/translate_manager_unittest.cc:114)    testing::Test::Run() (testing/gtest/src/gtest.cc:2085)    testing::internal::TestInfoImpl::Run() (testing/gtest/src/gtest.cc:2304)    testing::TestCase::Run() (testing/gtest/src/gtest.cc:2412)    testing::internal::UnitTestImpl::RunAllTests()  (testing/gtest/src/gtest.cc:4013)    testing::UnitTest::Run() (testing/gtest/src/gtest.cc:3680)    TestSuite::Run() (base/test/test_suite.h:124)    main (chrome/test/unit/run_all_unittests.cc:8)  Suppression:  {     &lt;insert_a_suppression_name_here&gt;     Memcheck:Leak     fun:_Znw*     fun:_ZN16TranslateManager19InitiateTranslationEP11TabContentsRKSs      fun:_ZN16TranslateManager7ObserveE16NotificationTypeRK18NotificationSourceRK19NotificationDetails      fun:_ZN19NotificationService6NotifyE16NotificationTypeRK18NotificationSourceRK19NotificationDetails      fun:_ZN11TabContents14OnPageContentsERK4GURLiiRKSbIwSt11char_traitsIwESaIwEERKSs      fun:_ZN14RenderViewHost14OnPageContentsERK4GURLiRKSbIwSt11char_traitsIwESaIwEERKSs      fun:_Z16DispatchToMethodI14RenderViewHostMS0_FvRK4GURLiRKSbIwSt11char_traitsIwESaIwEERKSsES1_iS7_SsEvPT_T0_RK6Tuple4IT1_T2_T3_T4_E      fun:_ZN3IPC16MessageWithTupleI6Tuple4I4GURLiSbIwSt11char_traitsIwESaIwEESsEE8DispatchI14RenderViewHostMSA_FvRKS2_iRKS6_RKSsEEEbPKNS_7MessageEPT_T0_     fun:_ZN14RenderViewHost17OnMessageReceivedERKN3IPC7MessageE     fun:_ZN18TestRenderViewHost21TestOnMessageReceivedERKN3IPC7MessageE      fun:_ZN20TranslateManagerTest18SimulateNavigationERK4GURLiRKSbIwSt11char_traitsIwESaIwEERKSs     fun:_ZN49TranslateManagerTest_AutoTranslateOnNavigate_Test8TestBodyEv     fun:_ZN7testing4Test3RunEv     fun:_ZN7testing8internal12TestInfoImpl3RunEv     fun:_ZN7testing8TestCase3RunEv     fun:_ZN7testing8internal12UnitTestImpl11RunAllTestsEv     fun:_ZN7testing8UnitTest3RunEv     fun:_ZN9TestSuite3RunEv     fun:main  }   </pre>