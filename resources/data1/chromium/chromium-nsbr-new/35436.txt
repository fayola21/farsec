<title>Issue 35436 -   chromium -    valgrind invalid read after NSS roll - Project Hosting on Google Code</title> <pre> Invalid write of size 4    __pthread_mutex_unlock_usercnt (/lib/tls/i686/cmov/libpthread-2.7.so)    PR_Unlock (ild/buildd/nspr-  4.7.5/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:233)    nssSession_ExitMonitor (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/dev/devslot.c:288)    find_objects (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/dev/devtoken.c:347)    find_objects_by_template (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/dev/devtoken.c:463)    nssToken_FindCertificatesBySubject (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/dev/devtoken.c:657)    nssTrustDomain_FindCertificatesBySubject (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pki/trustdomain.c:646)    nssCertificate_BuildChain (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pki/certificate.c:441)    NSSCertificate_BuildChain (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pki/certificate.c:562)    CERT_FindCertIssuer (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/certhigh/certvfy.c:259)    ocsp_CreateCertID (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/certhigh/ocsp.c:1692)    CERT_CreateOCSPCertID (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/certhigh/ocsp.c:1760)    PKIX_PL_OcspCertID_Create (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix_pl_nss/pki/pkix_pl_ocspcerti  d.c:168)    pkix_OcspChecker_CheckLocal (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix/checker/pkix_ocspchecker.c:1  81)    PKIX_RevocationChecker_Check (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix/checker/pkix_revocationcheck  er.c:391)    pkix_BuildForwardDepthFirstSearch (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix/top/pkix_build.c:2429)    pkix_Build_InitiateBuildChain (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix/top/pkix_build.c:3531)    PKIX_BuildChain (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/libpkix/pkix/top/pkix_build.c:3711)    CERT_PKIXVerifyCert (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/certhigh/certvfypkix.c:2159)    net::(anonymous namespace)::PKIXVerifyCert(CERTCertificateStr*  bool    SECOidTag const*  int  CERTValOutParam*)   (net/base/x509_certificate_nss.cc:416)    net::X509Certificate::Verify(std::basic_string&lt;char    std::char_traits&lt;char&gt;  std::allocator&lt;char&gt; &gt; const&amp;  int    net::CertVerifyResult*) const (net/base/x509_certificate_nss.cc:543)    net::CertVerifier::Request::DoVerify() (net/base/cert_verifier.cc:40)    void DispatchToMethod&lt;net::CertVerifier::Request  void   (net::CertVerifier::Request::*)()&gt;(net::CertVerifier::Request*  void   (net::CertVerifier::Request::*)()  Tuple0 const&amp;) (base/tuple.h:412)    RunnableMethod&lt;net::CertVerifier::Request  void   (net::CertVerifier::Request::*)()  Tuple0&gt;::Run() (base/task.h:289)    (anonymous namespace)::WorkerThread::ThreadMain()   (base/worker_pool_linux.cc:77)    ThreadFunc(void*) (base/platform_thread_posix.cc:26)    start_thread (/lib/tls/i686/cmov/libpthread-2.7.so)  Address 0x745a268 is 8 bytes inside a block of size 88 free'd    free (mp/chromium-valgrind-binaries/scripts/valgrind-  source/coregrind/m_replacemalloc/vg_replace_malloc.c:348)    PR_Free (ild/buildd/nspr-4.7.5/mozilla/nsprpub/pr/src/malloc/prmem.c:490)    PR_DestroyLock (ild/buildd/nspr-  4.7.5/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:199)    PK11_DestroySlot (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11slot.c:441)    PK11_FreeSlot (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11slot.c:464)    SECMOD_DestroyModule (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11util.c:779)    SECMOD_DestroyModuleListElement (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11util.c:825)    SECMOD_DestroyModuleList (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11util.c:841)    SECMOD_Shutdown (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/pk11wrap/pk11util.c:99)    NSS_Shutdown (ild/buildd/nss-  3.12.3.1/mozilla/security/nss/lib/nss/nssinit.c:888)    (anonymous namespace)::NSSInitSingleton::~NSSInitSingleton()   (base/nss_util.cc:149)    DefaultSingletonTraits&lt;(anonymous   namespace)::NSSInitSingleton&gt;::Delete((anonymous   namespace)::NSSInitSingleton*) (base/singleton.h:27)    Singleton&lt;(anonymous namespace)::NSSInitSingleton    DefaultSingletonTraits&lt;(anonymous namespace)::NSSInitSingleton&gt;  (anonymous   namespace)::NSSInitSingleton&gt;::OnExit(void*) (base/singleton.h:182)    base::AtExitManager::ProcessCallbacksNow() (base/at_exit.cc:63)    base::AtExitManager::~AtExitManager() (base/at_exit.cc:33)    ChromeMain (chrome/app/chrome_dll_main.cc:779)    main (chrome/app/chrome_exe_main_gtk.cc:52) </pre>