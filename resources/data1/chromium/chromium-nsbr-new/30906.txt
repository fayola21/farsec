<title>Issue 30906 -   chromium -    Document how chrome's IDN logic works - Project Hosting on Google Code</title> <pre> IE  Firefox  and Safari all have documents that describe when they display   punycode for IDN document icons  see <a title="IDNs displayed as punycode in omnibox" class=closed_ref href="/p/chromium/issues/detail?id=30881"> issue 30881 </a>. It looks like we don't   have one  but we should have one  too. I would appreciate pointers to the   source code where this happens.    brettw said on the bug mentioned above: &quot;&quot;&quot;  Jungshik (on the I18N team) came up with most of the current rules. Blindly   displaying IDN in all cases is a really bad idea. We mostly match IE with a   few   tweaks.    The basic algorithm  if I recall  is to check each character in the decoded   name and   look up which writing script each character is in. If a character is in a script   not   included by any of the user's accept languages  it is rejected. This works   quite   well in practice protecting the user from homograph attacks since normally   the user   will have an accept language setting for languages they speak (normally   this is only   one).    Additionally  if the languages cross more than one script  they are rejected.   The   prevents Cryrillic characters from being used in the place of Latin-1 ones    when the   domain name otherwise looks ASCII.    There is a whitelist of exceptions to the above rules which ends up allowing   ASCII   to be combined with Asian languages  since there is little chance of   confusion.  &quot;&quot;&quot;    Jungshik  do you have anything to add to that? If not  just tell me which   source files this happens in and I'll prepare a wiki page draft. </pre>