<title>Issue 41713 -   chromium -    Crash: Check failed: !menu_shown_. (views linux) - Project Hosting on Google Code</title> <pre> On a ToT build  I was clicking the wrench menu and Chrome crashed.  I happened to be running   a views enabled linux build.  I was also using NX  could that make a difference?    Stack:    #0  0x00007f89267c534f in waitpid () from /lib/libpthread.so.0  #1  0x0000000000e11d01 in base::LaunchApp (argv=std::vector of length 2  capacity 2 = {...}        env_changes=std::vector of length 0  capacity 0  fds_to_remap=std::vector of length 0  capacity   0  wait=true        process_handle=0x0) at base/process_util_posix.cc:555  #2  0x0000000000e11e47 in base::LaunchApp (argv=std::vector of length 2  capacity 2 = {...}        fds_to_remap=std::vector of length 0  capacity 0  wait=true  process_handle=0x0) at   base/process_util_posix.cc:570  #3  0x0000000000df9436 in logging::DisplayDebugMessageInDialog (str=      &quot;[13354:13354:179039997452:FATAL:views/controls/menu/native_menu_gtk.cc(105)] Check   failed: !menu_shown_. nBacktrace:ntStackTrace::StackTrace()   [0xde6ac5]ntlogging::LogMessage::~LogMessage() [0xdf9561]&quot;...) at base/logging.cc:370  #4  0x0000000000df984e in ~LogMessage (this=0x7fff00168e10  __in_chrg=&lt;value optimized   out&gt;) at base/logging.cc:583  #5  0x0000000000d5d800 in views::NativeMenuGtk::RunMenuAt (this=0x525da20  point=...    alignment=1)      at views/controls/menu/native_menu_gtk.cc:105  #6  0x0000000000d596be in views::Menu2::RunMenuAt (this=0x52597f0  point=...    alignment=views::Menu2::ALIGN_TOPRIGHT)      at views/controls/menu/menu_2.cc:26  #7  0x00000000007c766b in ToolbarView::RunAppMenu (this=0x50a25f0  pt=...) at   chrome/browser/views/toolbar_view.cc:742  #8  0x00000000007c9d95 in ToolbarView::RunMenu (this=0x50a25f0  source=0x52594d0    pt=...)      at chrome/browser/views/toolbar_view.cc:236  #9  0x0000000000d4e49f in views::MenuButton::Activate (this=0x52594d0) at   views/controls/button/menu_button.cc:148  #10 0x0000000000d4e20c in views::MenuButton::OnMousePressed (this=0x52594d0  e=...) at   views/controls/button/menu_button.cc:179  #11 0x0000000000d81464 in views::View::ProcessMousePressed (this=0x52594d0  e=...    drag_info=0x5043598) at views/view.cc:473  #12 0x0000000000d8b703 in views::RootView::OnMousePressed (this=0x5043450  e=...) at   views/widget/root_view.cc:336  #13 0x0000000000d902b5 in views::WidgetGtk::ProcessMousePressed (this=0x7f891c027588    event=0x52a9f20)      at views/widget/widget_gtk.cc:1077  #14 0x0000000000d90323 in views::WidgetGtk::OnButtonPress (this=0x7f891c027588    widget=0x502d920  event=0x52a9f20)      at views/widget/widget_gtk.cc:920  #15 0x0000000000d9c15f in views::WindowGtk::OnButtonPress (this=0x7f891c027588    widget=0x502d920  event=0x52a9f20)      at views/window/window_gtk.cc:311  #16 0x0000000000d931ee in views::WidgetGtk::OnButtonPressThunk (sender=0x502d920    one=0x52a9f20  userdata=0x7f891c027588)      at ./views/widget/widget_gtk.h:228  #17 0x00007f8928f7687f in _gtk_marshal_BOOLEAN__BOXED (closure=0x4f94710    return_value=0x7fff001698f0        n_param_values=&lt;value optimized out&gt;  param_values=0x7fff001699d0    invocation_hint=&lt;value optimized out&gt;        marshal_data=0xd931bc) at /build/buildd/gtk+2.0-2.12.9/gtk/gtkmarshalers.c:84  #18 0x00007f8927e64c8c in IA__g_closure_invoke (closure=0x4f94710    return_value=0x7fff001698f0  n_param_values=2        param_values=0x7fff001699d0  invocation_hint=0x7fff001698b0) at   /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gclosure.c:490  #19 0x00007f8927e787e8 in signal_emit_unlocked_R (node=0x4ff0560  detail=0    instance=0x502d920  emission_return=0x7fff00169bf0        instance_and_params=0x7fff001699d0) at /tmp/glib2.0.f24606/glib2.0-  2.16.6/gobject/gsignal.c:2440  #20 0x00007f8927e79f6f in IA__g_signal_emit_valist (instance=0x502d920  signal_id=&lt;value   optimized out&gt;  detail=0        var_args=0x7fff00169c50) at /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gsignal.c:2209  #21 0x00007f8927e7a633 in IA__g_signal_emit (instance=0x3485  signal_id=0  detail=0)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gsignal.c:2243  #22 0x00007f892907de55 in gtk_widget_event_internal (widget=0x502d920  event=0x52a9f20)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkwidget.c:4678    #23 0x00007f8928f6fb92 in IA__gtk_propagate_event (widget=0x502d920  event=0x52a9f20)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkmain.c:2336  #24 0x00007f8928f70b35 in IA__gtk_main_do_event (event=0x52a9f20) at   /build/buildd/gtk+2.0-2.12.9/gtk/gtkmain.c:1556  #25 0x0000000000e48cdd in base::MessagePumpForUI::EventDispatcher (event=0x52a9f20    data=0x4fac3f0)      at base/message_pump_glib.cc:329  #26 0x00007f8928bda58c in gdk_event_dispatch (source=&lt;value optimized out&gt;    callback=&lt;value optimized out&gt;        user_data=&lt;value optimized out&gt;) at /build/buildd/gtk+2.0-2.12.9/gdk/x11/gdkevents-  x11.c:2351  #27 0x00007f89277c8384 in g_main_dispatch (context=0x4fab300) at   /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2012  #28 IA__g_main_context_dispatch (context=0x4fab300) at /tmp/glib2.0.f24606/glib2.0-  2.16.6/glib/gmain.c:2564  #29 0x00007f89277cb695 in g_main_context_iterate (context=0x4fab300  block=0  dispatch=1    self=&lt;value optimized out&gt;)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2645  #30 0x00007f89277cbb7b in IA__g_main_context_iteration (context=0x4fab300  may_block=0)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2708  #31 0x0000000000e48e9b in base::MessagePumpForUI::RunWithDispatcher (this=0x4fac3f0    delegate=0x7fff0016d220  dispatcher=0x0)      at base/message_pump_glib.cc:195  #32 0x0000000000e49ab1 in base::MessagePumpForUI::Run (this=0x4fac3f0    delegate=0x7fff0016d220) at ./base/message_pump_glib.h:59  #33 0x0000000000dfbcbb in MessageLoop::RunInternal (this=0x7fff0016d220) at   base/message_loop.cc:204  #34 0x0000000000dfbcdb in MessageLoop::RunHandler (this=0x7fff0016d220) at   base/message_loop.cc:176  #35 0x0000000000dfbd17 in MessageLoopForUI::Run (this=0x7fff0016d220  dispatcher=0x0) at   base/message_loop.cc:611  #36 0x0000000000d5d8c5 in views::NativeMenuGtk::RunMenuAt (this=0x525da20  point=...    alignment=1)      at views/controls/menu/native_menu_gtk.cc:122  #37 0x0000000000d596be in views::Menu2::RunMenuAt (this=0x52597f0  point=...    alignment=views::Menu2::ALIGN_TOPRIGHT)      at views/controls/menu/menu_2.cc:26  #38 0x00000000007c766b in ToolbarView::RunAppMenu (this=0x50a25f0  pt=...) at   chrome/browser/views/toolbar_view.cc:742  #39 0x00000000007c9d95 in ToolbarView::RunMenu (this=0x50a25f0  source=0x52594d0    pt=...)      at chrome/browser/views/toolbar_view.cc:236  #40 0x0000000000d4e49f in views::MenuButton::Activate (this=0x52594d0) at   views/controls/button/menu_button.cc:148  #41 0x0000000000d4e20c in views::MenuButton::OnMousePressed (this=0x52594d0  e=...) at   views/controls/button/menu_button.cc:179  #42 0x0000000000d81464 in views::View::ProcessMousePressed (this=0x52594d0  e=...    drag_info=0x5043598) at views/view.cc:473  #43 0x0000000000d8b703 in views::RootView::OnMousePressed (this=0x5043450  e=...) at   views/widget/root_view.cc:336  #44 0x0000000000d902b5 in views::WidgetGtk::ProcessMousePressed (this=0x7f891c027588    event=0x52b7880)      at views/widget/widget_gtk.cc:1077  #45 0x0000000000d90323 in views::WidgetGtk::OnButtonPress (this=0x7f891c027588    widget=0x502d920  event=0x52b7880)      at views/widget/widget_gtk.cc:920  #46 0x0000000000d9c15f in views::WindowGtk::OnButtonPress (this=0x7f891c027588    widget=0x502d920  event=0x52b7880)      at views/window/window_gtk.cc:311  #47 0x0000000000d931ee in views::WidgetGtk::OnButtonPressThunk (sender=0x502d920    one=0x52b7880  userdata=0x7f891c027588)      at ./views/widget/widget_gtk.h:228  #48 0x00007f8928f7687f in _gtk_marshal_BOOLEAN__BOXED (closure=0x4f94710    return_value=0x7fff0016ae70        n_param_values=&lt;value optimized out&gt;  param_values=0x7fff0016af50    invocation_hint=&lt;value optimized out&gt;        marshal_data=0xd931bc) at /build/buildd/gtk+2.0-2.12.9/gtk/gtkmarshalers.c:84  #49 0x00007f8927e64bbf in IA__g_closure_invoke (closure=0x4f94710    return_value=0x7fff0016ae70  n_param_values=2          param_values=0x7fff0016af50  invocation_hint=0x7fff0016ae30) at   /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gclosure.c:490  #50 0x00007f8927e787e8 in signal_emit_unlocked_R (node=0x4ff0560  detail=0    instance=0x502d920  emission_return=0x7fff0016b170        instance_and_params=0x7fff0016af50) at /tmp/glib2.0.f24606/glib2.0-  2.16.6/gobject/gsignal.c:2440  #51 0x00007f8927e79f6f in IA__g_signal_emit_valist (instance=0x502d920  signal_id=&lt;value   optimized out&gt;  detail=0        var_args=0x7fff0016b1d0) at /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gsignal.c:2209  #52 0x00007f8927e7a633 in IA__g_signal_emit (instance=0x3485  signal_id=0  detail=0)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/gobject/gsignal.c:2243  #53 0x00007f892907de55 in gtk_widget_event_internal (widget=0x502d920    event=0x52b7880)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkwidget.c:4678  #54 0x00007f8928f6fb92 in IA__gtk_propagate_event (widget=0x502d920  event=0x52b7880)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkmain.c:2336  #55 0x00007f8928f70b35 in IA__gtk_main_do_event (event=0x52b7880) at   /build/buildd/gtk+2.0-2.12.9/gtk/gtkmain.c:1556  #56 0x0000000000d6c1f6 in views::AcceleratorHandler::Dispatch (this=0x7fff0016bc40    event=0x52b7880)      at views/focus/accelerator_handler_gtk.cc:22  #57 0x0000000000e48cbf in base::MessagePumpForUI::EventDispatcher (event=0x52b7880    data=0x4fac3f0)      at base/message_pump_glib.cc:326  #58 0x00007f8928bda58c in gdk_event_dispatch (source=&lt;value optimized out&gt;    callback=&lt;value optimized out&gt;        user_data=&lt;value optimized out&gt;) at /build/buildd/gtk+2.0-2.12.9/gdk/x11/gdkevents-  x11.c:2351  #59 0x00007f89277c8384 in g_main_dispatch (context=0x4fab300) at   /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2012  #60 IA__g_main_context_dispatch (context=0x4fab300) at /tmp/glib2.0.f24606/glib2.0-  2.16.6/glib/gmain.c:2564  #61 0x00007f89277cb695 in g_main_context_iterate (context=0x4fab300  block=0  dispatch=1    self=&lt;value optimized out&gt;)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2645  #62 0x00007f89277cbb7b in IA__g_main_context_iteration (context=0x4fab300  may_block=0)      at /tmp/glib2.0.f24606/glib2.0-2.16.6/glib/gmain.c:2708  #63 0x0000000000e48e9b in base::MessagePumpForUI::RunWithDispatcher (this=0x4fac3f0    delegate=0x7fff0016d220        dispatcher=0x7fff0016bc40) at base/message_pump_glib.cc:195  #64 0x0000000000dfbc90 in MessageLoop::RunInternal (this=0x7fff0016d220) at   base/message_loop.cc:199  #65 0x0000000000dfbcdb in MessageLoop::RunHandler (this=0x7fff0016d220) at   base/message_loop.cc:176  #66 0x0000000000dfbd17 in MessageLoopForUI::Run (this=0x7fff0016d220    dispatcher=0x7fff0016bc40) at base/message_loop.cc:611  #67 0x000000000045b6aa in RunUIMessageLoop (browser_process=0x4facf80) at   chrome/browser/browser_main.cc:175  #68 0x000000000045d0ab in BrowserMain (parameters=...) at   chrome/browser/browser_main.cc:1172  #69 0x0000000000401a8b in ChromeMain (argc=2  argv=0x7fff0016e988) at   chrome/app/chrome_dll_main.cc:814  #70 0x0000000000403041 in main (argc=2  argv=0x7fff0016e988) at   chrome/app/chrome_exe_main_gtk.cc:47   </pre>