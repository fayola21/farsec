<title>Issue 30991 -   chromium -    arm: support armv7 without NEON - Project Hosting on Google Code</title> <pre> Chrome Version       : 4.0.274.0~svn20091217r34829-0ubuntu1    armv7 -&gt; babbage3 board        1. building chromium (fta packages) with native compiler on ubuntu lucid   with flags like:    target-arch=arm disable_nacl=1 v8_use_snapshot=false linux_use_tcmalloc=0    armv7=1 arm_thumb=1 no_strict_aliasing=1 gcc_version=44         -&gt; when running  the main process dies with SIGILL in skia + arm opts +   neon    (freescale babbage3 has neon support afaiui)    Program received signal SIGILL  Illegal instruction.  S32A_Opaque_BlitRow32_neon (dst=0x1b59cd4  src=0x1b5bd70  count=36    alpha=&lt;value optimized out&gt;) at   third_party/skia/src/opts/SkBlitRow_opts_arm.cpp:468  468	third_party/skia/src/opts/SkBlitRow_opts_arm.cpp: No such file or   directory.  	in third_party/skia/src/opts/SkBlitRow_opts_arm.cpp  (gdb) bt  #0  S32A_Opaque_BlitRow32_neon (dst=0x1b59cd4  src=0x1b5bd70  count=36    alpha=&lt;value optimized out&gt;) at   third_party/skia/src/opts/SkBlitRow_opts_arm.cpp:468  #1  0x0056ff76 in SkARGB32_Shader_Blitter::blitH (this=0xbedd60d0  x=&lt;value   optimized out&gt;  y=&lt;value optimized out&gt;  width=180)      at third_party/skia/src/core/SkBlitter_ARGB32.cpp:432  #2  0x0056b38e in SkBlitter::blitRect (this=0xbedd60d0  x=15  y=17    width=180  height=9) at third_party/skia/src/core/SkBlitter.cpp:63  #3  0x0055a1f8 in blitrect (blitter=0x1b59a94  r=&lt;value optimized out&gt;) at   third_party/skia/src/core/SkScan.cpp:23  #4  0x0055a2e0 in SkScan::FillIRect (r=&lt;value optimized out&gt;  clip=&lt;value   optimized out&gt;  blitter=0xbedd60d0) at   third_party/skia/src/core/SkScan.cpp:38  #5  0x0054cb1e in SkDraw::drawPaint (this=0xbedd6240  paint=...) at   third_party/skia/src/core/SkDraw.cpp:311  #6  0x0054bde6 in SkDevice::drawPaint (this=&lt;value optimized out&gt;    draw=&lt;value optimized out&gt;  paint=...) at   third_party/skia/src/core/SkDevice.cpp:49  #7  0x0054a7a2 in SkCanvas::drawPaint (this=0xbedd63a0  paint=...) at   third_party/skia/src/core/SkCanvas.cpp:1015  #8  0x0034f5f4 in gfx::Canvas::TileImageInt (this=0xbedd63a0  bitmap=&lt;value   optimized out&gt;  src_x=0  src_y=0  dest_x=15  dest_y=0  w=180  h=26) at   app/gfx/canvas.cc:247  #9  0x0034f634 in gfx::Canvas::TileImageInt (this=0x1b59a94  bitmap=...    x=&lt;value optimized out&gt;  y=&lt;value optimized out&gt;  w=180  h=26) at   app/gfx/canvas.cc:225  #10 0x001ee4be in TabRendererGtk::PaintActiveTabBackground (this=0x1a67da0    canvas=0xbedd63a0) at chrome/browser/gtk/tabs/tab_renderer_gtk.cc:905  #11 0x001ee6c2 in TabRendererGtk::PaintTabBackground (this=0x1a67da0    canvas=0xbedd63a0) at chrome/browser/gtk/tabs/tab_renderer_gtk.cc:823  #12 0x001ef8c2 in TabRendererGtk::Paint (this=0x1a67da0  canvas=0xbedd63a0)   at chrome/browser/gtk/tabs/tab_renderer_gtk.cc:589  #13 0x001efd2a in TabRendererGtk::PaintTab (this=0x1a67da0    event=0x1a69388) at chrome/browser/gtk/tabs/tab_renderer_gtk.cc:758  #14 0x001efdac in TabRendererGtk::OnExposeEvent (widget=&lt;value optimized   out&gt;  event=0x1b5bb30  tab=0xb4) at   chrome/browser/gtk/tabs/tab_renderer_gtk.cc:998  #15 0x4023721e in ?? () from /usr/lib/libgtk-x11-2.0.so.0  #16 0x4023721e in ?? () from /usr/lib/libgtk-x11-2.0.so.0  Backtrace stopped: previous frame identical to this frame (corrupt stack?)      (gdb) info registers  <a href="/p/chromium/source/detail?r=0">r0</a>             0x1b59a94	28678804  <a href="/p/chromium/source/detail?r=1">r1</a>             0x1b5bb30	28687152  <a href="/p/chromium/source/detail?r=2">r2</a>             0xb4	180  <a href="/p/chromium/source/detail?r=3">r3</a>             0x1b59cd4	28679380  <a href="/p/chromium/source/detail?r=4">r4</a>             0x24	36  <a href="/p/chromium/source/detail?r=5">r5</a>             0x1b5bd78	28687736  <a href="/p/chromium/source/detail?r=6">r6</a>             0x1b5bb30	28687152  <a href="/p/chromium/source/detail?r=7">r7</a>             0x1b59a94	28678804  <a href="/p/chromium/source/detail?r=8">r8</a>             0xb4	180  <a href="/p/chromium/source/detail?r=9">r9</a>             0x1a	26  <a href="/p/chromium/source/detail?r=10">r10</a>            0x1a	26  <a href="/p/chromium/source/detail?r=11">r11</a>            0xbedd6240	3202179648  <a href="/p/chromium/source/detail?r=12">r12</a>            0x1b5bd70	28687728  sp             0xbedd5ff0	0xbedd5ff0  lr             0x56ff77	5701495  pc             0x579224	0x579224 &lt;S32A_Opaque_BlitRow32_neon+60&gt;  fps            0x0	0  cpsr           0x20000030	536870960      (gdb) disassemble  Dump of assembler code for function S32A_Opaque_BlitRow32_neon:  0x005791e8 &lt;S32A_Opaque_BlitRow32_neon+0&gt;:	cmp	<a href="/p/chromium/source/detail?r=2">r2</a>  #0  0x005791ea &lt;S32A_Opaque_BlitRow32_neon+2&gt;:	stmdb	sp!  {<a href="/p/chromium/source/detail?r=4">r4</a>  <a href="/p/chromium/source/detail?r=5">r5</a>  <a href="/p/chromium/source/detail?r=6">r6</a>    <a href="/p/chromium/source/detail?r=7">r7</a>  <a href="/p/chromium/source/detail?r=8">r8</a>  <a href="/p/chromium/source/detail?r=10">r10</a>}  0x005791ee &lt;S32A_Opaque_BlitRow32_neon+6&gt;:	ble.n	0x5792d2   &lt;S32A_Opaque_BlitRow32_neon+234&gt;  0x005791f0 &lt;S32A_Opaque_BlitRow32_neon+8&gt;:	ldr	<a href="/p/chromium/source/detail?r=3">r3</a>  [pc  #228]	;   (0x5792d8 &lt;S32A_Opaque_BlitRow32_neon+240&gt;)  0x005791f2 &lt;S32A_Opaque_BlitRow32_neon+10&gt;:	cmp	<a href="/p/chromium/source/detail?r=2">r2</a>  #3  0x005791f4 &lt;S32A_Opaque_BlitRow32_neon+12&gt;:	vld1.8	{d22}  [<a href="/p/chromium/source/detail?r=3">r3</a>]  0x005791f8 &lt;S32A_Opaque_BlitRow32_neon+16&gt;:	ble.n	0x57928c   &lt;S32A_Opaque_BlitRow32_neon+164&gt;  0x005791fa &lt;S32A_Opaque_BlitRow32_neon+18&gt;:	mov.w	<a href="/p/chromium/source/detail?r=3">r3</a>  #255	;   0xff  0x005791fe &lt;S32A_Opaque_BlitRow32_neon+22&gt;:	mov	<a href="/p/chromium/source/detail?r=4">r4</a>  <a href="/p/chromium/source/detail?r=2">r2</a>  0x00579200 &lt;S32A_Opaque_BlitRow32_neon+24&gt;:	vdup.16	q12  <a href="/p/chromium/source/detail?r=3">r3</a>  0x00579204 &lt;S32A_Opaque_BlitRow32_neon+28&gt;:	mov	<a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=1">r1</a>  0x00579206 &lt;S32A_Opaque_BlitRow32_neon+30&gt;:	mov	<a href="/p/chromium/source/detail?r=3">r3</a>  <a href="/p/chromium/source/detail?r=0">r0</a>  0x00579208 &lt;S32A_Opaque_BlitRow32_neon+32&gt;:	vld1.32	{d17}  [<a href="/p/chromium/source/detail?r=12">r12</a>]  0x0057920c &lt;S32A_Opaque_BlitRow32_neon+36&gt;:	add.w	<a href="/p/chromium/source/detail?r=5">r5</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  #8  0x00579210 &lt;S32A_Opaque_BlitRow32_neon+40&gt;:	vtbl.8	d20  {d17}  d22  0x00579214 &lt;S32A_Opaque_BlitRow32_neon+44&gt;:	vld1.32	{d16}  [<a href="/p/chromium/source/detail?r=5">r5</a>]  0x00579218 &lt;S32A_Opaque_BlitRow32_neon+48&gt;:	vsubw.u8	q10  q12    d20  0x0057921c &lt;S32A_Opaque_BlitRow32_neon+52&gt;:	vld1.32	{d28}  [<a href="/p/chromium/source/detail?r=3">r3</a>]  0x00579220 &lt;S32A_Opaque_BlitRow32_neon+56&gt;:	vtbl.8	d18  {d16}  d22  0x00579224 &lt;S32A_Opaque_BlitRow32_neon+60&gt;:	vshr.u16	q3  q10  #7  0x00579228 &lt;S32A_Opaque_BlitRow32_neon+64&gt;:	add.w	<a href="/p/chromium/source/detail?r=5">r5</a>  <a href="/p/chromium/source/detail?r=3">r3</a>  #8  0x0057922c &lt;S32A_Opaque_BlitRow32_neon+68&gt;:	vsubw.u8	q9  q12    d18  0x00579230 &lt;S32A_Opaque_BlitRow32_neon+72&gt;:	vadd.i16	q10  q10    q3  0x00579234 &lt;S32A_Opaque_BlitRow32_neon+76&gt;:	vmovl.u8	q14  d28  0x00579238 &lt;S32A_Opaque_BlitRow32_neon+80&gt;:	vld1.32	{d26}  [<a href="/p/chromium/source/detail?r=5">r5</a>]  0x0057923c &lt;S32A_Opaque_BlitRow32_neon+84&gt;:	vshr.u16	q15  q9  #7  0x00579240 &lt;S32A_Opaque_BlitRow32_neon+88&gt;:	vmul.i16	q10  q14    q10  0x00579244 &lt;S32A_Opaque_BlitRow32_neon+92&gt;:	vadd.i16	q9  q9  q15  0x00579248 &lt;S32A_Opaque_BlitRow32_neon+96&gt;:	vmovl.u8	q13  d26  0x0057924c &lt;S32A_Opaque_BlitRow32_neon+100&gt;:	vshrn.i16	d20  q10    #8  0x00579250 &lt;S32A_Opaque_BlitRow32_neon+104&gt;:	vmul.i16	q9  q13  q9  0x00579254 &lt;S32A_Opaque_BlitRow32_neon+108&gt;:	vadd.i8	d17  d17  d20  0x00579258 &lt;S32A_Opaque_BlitRow32_neon+112&gt;:	subs	<a href="/p/chromium/source/detail?r=4">r4</a>  #4  0x0057925a &lt;S32A_Opaque_BlitRow32_neon+114&gt;:	vst1.32	{d17}  [<a href="/p/chromium/source/detail?r=3">r3</a>]  0x0057925e &lt;S32A_Opaque_BlitRow32_neon+118&gt;:	vshrn.i16	d18  q9  #8  0x00579262 &lt;S32A_Opaque_BlitRow32_neon+122&gt;:	adds	<a href="/p/chromium/source/detail?r=3">r3</a>  #16  0x00579264 &lt;S32A_Opaque_BlitRow32_neon+124&gt;:	cmp	<a href="/p/chromium/source/detail?r=4">r4</a>  #3  0x00579266 &lt;S32A_Opaque_BlitRow32_neon+126&gt;:	vadd.i8	d16  d16  d18  0x0057926a &lt;S32A_Opaque_BlitRow32_neon+130&gt;:	vst1.32	{d16}  [<a href="/p/chromium/source/detail?r=5">r5</a>]  0x0057926e &lt;S32A_Opaque_BlitRow32_neon+134&gt;:	add.w	<a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  #16  0x00579272 &lt;S32A_Opaque_BlitRow32_neon+138&gt;:	bgt.n	0x579208   &lt;S32A_Opaque_BlitRow32_neon+32&gt;  0x00579274 &lt;S32A_Opaque_BlitRow32_neon+140&gt;:	subs	<a href="/p/chromium/source/detail?r=2">r2</a>  #4  0x00579276 &lt;S32A_Opaque_BlitRow32_neon+142&gt;:	mov.w	<a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=2">r2</a>  lsr #2  0x0057927a &lt;S32A_Opaque_BlitRow32_neon+146&gt;:	add.w	<a href="/p/chromium/source/detail?r=3">r3</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  #1  0x0057927e &lt;S32A_Opaque_BlitRow32_neon+150&gt;:	mov.w	<a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  lsl #2  0x00579282 &lt;S32A_Opaque_BlitRow32_neon+154&gt;:	lsls	<a href="/p/chromium/source/detail?r=3">r3</a>  <a href="/p/chromium/source/detail?r=3">r3</a>  #4  0x00579284 &lt;S32A_Opaque_BlitRow32_neon+156&gt;:	rsb	<a href="/p/chromium/source/detail?r=2">r2</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=2">r2</a>  0x00579288 &lt;S32A_Opaque_BlitRow32_neon+160&gt;:	adds	<a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=3">r3</a>  0x0057928a &lt;S32A_Opaque_BlitRow32_neon+162&gt;:	adds	<a href="/p/chromium/source/detail?r=1">r1</a>  <a href="/p/chromium/source/detail?r=1">r1</a>  <a href="/p/chromium/source/detail?r=3">r3</a>  0x0057928c &lt;S32A_Opaque_BlitRow32_neon+164&gt;:	cmp	<a href="/p/chromium/source/detail?r=2">r2</a>  #0  0x0057928e &lt;S32A_Opaque_BlitRow32_neon+166&gt;:	ble.n	0x5792d2   &lt;S32A_Opaque_BlitRow32_neon+234&gt;  0x00579290 &lt;S32A_Opaque_BlitRow32_neon+168&gt;:	ldr.w	<a href="/p/chromium/source/detail?r=12">r12</a>  [pc  #72]	;   0x5792dc &lt;S32A_Opaque_BlitRow32_neon+244&gt;  0x00579294 &lt;S32A_Opaque_BlitRow32_neon+172&gt;:	movs	<a href="/p/chromium/source/detail?r=3">r3</a>  #0  0x00579296 &lt;S32A_Opaque_BlitRow32_neon+174&gt;:	mov	<a href="/p/chromium/source/detail?r=4">r4</a>  <a href="/p/chromium/source/detail?r=3">r3</a>  0x00579298 &lt;S32A_Opaque_BlitRow32_neon+176&gt;:	ldr.w	<a href="/p/chromium/source/detail?r=12">r12</a>  [<a href="/p/chromium/source/detail?r=12">r12</a>]  0x0057929c &lt;S32A_Opaque_BlitRow32_neon+180&gt;:	mvn.w	<a href="/p/chromium/source/detail?r=8">r8</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  0x005792a0 &lt;S32A_Opaque_BlitRow32_neon+184&gt;:	ldr	<a href="/p/chromium/source/detail?r=5">r5</a>  [<a href="/p/chromium/source/detail?r=1">r1</a>  <a href="/p/chromium/source/detail?r=3">r3</a>]  0x005792a2 &lt;S32A_Opaque_BlitRow32_neon+186&gt;:	adds	<a href="/p/chromium/source/detail?r=4">r4</a>  #1  0x005792a4 &lt;S32A_Opaque_BlitRow32_neon+188&gt;:	ldr	<a href="/p/chromium/source/detail?r=7">r7</a>  [<a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=3">r3</a>]  0x005792a6 &lt;S32A_Opaque_BlitRow32_neon+190&gt;:	lsrs	<a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=5">r5</a>  #24  0x005792a8 &lt;S32A_Opaque_BlitRow32_neon+192&gt;:	and.w	<a href="/p/chromium/source/detail?r=10">r10</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=7">r7</a>  0x005792ac &lt;S32A_Opaque_BlitRow32_neon+196&gt;:	rsb	<a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  #256	;   0x100  0x005792b0 &lt;S32A_Opaque_BlitRow32_neon+200&gt;:	and.w	<a href="/p/chromium/source/detail?r=7">r7</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=7">r7</a>  lsr #8  0x005792b4 &lt;S32A_Opaque_BlitRow32_neon+204&gt;:	mul.w	<a href="/p/chromium/source/detail?r=10">r10</a>  <a href="/p/chromium/source/detail?r=10">r10</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  0x005792b8 &lt;S32A_Opaque_BlitRow32_neon+208&gt;:	mul.w	<a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=7">r7</a>  0x005792bc &lt;S32A_Opaque_BlitRow32_neon+212&gt;:	and.w	<a href="/p/chromium/source/detail?r=10">r10</a>  <a href="/p/chromium/source/detail?r=12">r12</a>  <a href="/p/chromium/source/detail?r=10">r10</a>  lsr   #8  0x005792c0 &lt;S32A_Opaque_BlitRow32_neon+216&gt;:	and.w	<a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=8">r8</a>  0x005792c4 &lt;S32A_Opaque_BlitRow32_neon+220&gt;:	orr.w	<a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=10">r10</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  0x005792c8 &lt;S32A_Opaque_BlitRow32_neon+224&gt;:	adds	<a href="/p/chromium/source/detail?r=5">r5</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  <a href="/p/chromium/source/detail?r=5">r5</a>  0x005792ca &lt;S32A_Opaque_BlitRow32_neon+226&gt;:	str	<a href="/p/chromium/source/detail?r=5">r5</a>  [<a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=3">r3</a>]  0x005792cc &lt;S32A_Opaque_BlitRow32_neon+228&gt;:	adds	<a href="/p/chromium/source/detail?r=3">r3</a>  #4  0x005792ce &lt;S32A_Opaque_BlitRow32_neon+230&gt;:	cmp	<a href="/p/chromium/source/detail?r=4">r4</a>  <a href="/p/chromium/source/detail?r=2">r2</a>  0x005792d0 &lt;S32A_Opaque_BlitRow32_neon+232&gt;:	bne.n	0x5792a0   &lt;S32A_Opaque_BlitRow32_neon+184&gt;  0x005792d2 &lt;S32A_Opaque_BlitRow32_neon+234&gt;:	ldmia.w	sp!  {<a href="/p/chromium/source/detail?r=4">r4</a>  <a href="/p/chromium/source/detail?r=5">r5</a>  <a href="/p/chromium/source/detail?r=6">r6</a>    <a href="/p/chromium/source/detail?r=7">r7</a>  <a href="/p/chromium/source/detail?r=8">r8</a>  <a href="/p/chromium/source/detail?r=10">r10</a>}  0x005792d6 &lt;S32A_Opaque_BlitRow32_neon+238&gt;:	bx	lr  0x005792d8 &lt;S32A_Opaque_BlitRow32_neon+240&gt;:	lsls	<a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  #17  0x005792da &lt;S32A_Opaque_BlitRow32_neon+242&gt;:	lsls	<a href="/p/chromium/source/detail?r=0">r0</a>  <a href="/p/chromium/source/detail?r=6">r6</a>  #5  0x005792dc &lt;S32A_Opaque_BlitRow32_neon+244&gt;:	ldc2l	1  cr0  [<a href="/p/chromium/source/detail?r=8">r8</a>]  #444	  ; 0x1bc  End of assembler dump.   </pre>