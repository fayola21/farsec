<title>Issue 3383 -   chromium -    HANG [winqual] BaseShellDialogImpl::EndRun - Project Hosting on Google Code</title> <pre> Got a hung application dump from Microsoft WinQual  not present on   go/crash:    version 2.149.30    Windows XP Version 2600 (Service Pack 3) MP (2 procs) Free x86 compatible  Product: WinNt  suite: SingleUserTS  Debug session time: Thu Sep 25 01:53:13.000 2008 (GMT-7)  System Uptime: not available  Process Uptime: 0 days 1:04:22.000        FAULTING_IP:   ntdll+e4f4  7c90e4f4 c3              ret    EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)  ExceptionAddress: 7c90e4f4 (ntdll+0x0000e4f4)     ExceptionCode: cfffffff (Application hang)    ExceptionFlags: 00000000  NumberParameters: 0    BUGCHECK_STR:  HANG    PROCESS_NAME:  chrome.exe    MODULE_NAME: ntdll    FAULTING_MODULE: 7c900000 ntdll    DEBUG_FLR_IMAGE_TIMESTAMP:  4802a12c    ERROR_CODE: (NTSTATUS) 0xcfffffff - &lt;Unable to get error code text&gt;    DEFAULT_BUCKET_ID:  WRONG_SYMBOLS    DERIVED_WAIT_CHAIN:      Dl Eid Cid     WaitType  -- --- ------- --------------------------     0   ad4.ae0 Unknown                    WAIT_CHAIN_COMMAND:  ~0s;k;;    UNRESPONSIVE_UI_THREAD:  00000ae0    UNRESPONSIVE_UI_PROBLEM_CLASS:  UI_HANG_WRONG_SYMBOLS    BLOCKING_THREAD:  00000ae0    PRIMARY_PROBLEM_CLASS:  APPLICATION_HANG_WRONG_SYMBOLS    LAST_CONTROL_TRANSFER:  from 7c802542 to 7c90e4f4    UNRESPONSIVE_UI_SYMBOL_NAME:  ntdll    UNRESPONSIVE_UI_FOLLOWUP_NAME:  MachineOwner    FAULTING_THREAD:  00000ae0    STACK_TEXT:    WARNING: Stack unwind information not available. Following frames may be   wrong.  0012f144 7c802542 000009a0 ffffffff 00000000 ntdll+0xe4f4  0012f158 014f5318 000009a0 ffffffff 0294a1e0 kernel32+0x2542  0012f214 014f515c 0294a1e0 00000000 014f4fee   chrome_1000000!Thread::InternalStop+0x1b9 [c:bslavechrome-  officialbuildsrcbasethread.cc @ 210]  0012f220 014f4fee 0294a1e0 0294a1e0 014f4fcb   chrome_1000000!Thread::Stop+0xb [c:bslavechrome-  officialbuildsrcbasethread.cc @ 181]  0012f22c 014f4fcb 0115a151 01159867 00000001   chrome_1000000!Thread::~Thread+0xf [c:bslavechrome-  officialbuildsrcbasethread.cc @ 92]  0012f234 01159867 00000001 0012f718 0115a151 chrome_1000000!Thread::`scalar   deleting destructor'+0x8  0012f2e8 0115a173 0001047c 0294a1e0 00000000   chrome_1000000!BaseShellDialogImpl::EndRun+0x14d [c:bslavechrome-  officialbuildsrcchromebrowserviewsshell_dialogs.cc @ 185]  0012f2fc 0115abd6 00000000 0001047c 0294a1e0   chrome_1000000!SelectFileDialogImpl::FileNotSelected+0x22   [c:bslavechrome-officialbuildsrcchromebrowserviewsshell_dialogs.cc   @ 546]  0012f310 01009815 0012f758 0012f73c 00000000   chrome_1000000!RunnableMethod&lt;SelectFileDialogImpl void (__thiscall   SelectFileDialogImpl::*)(void * BaseShellDialogImpl::RunState) Tuple2&lt;void   * BaseShellDialogImpl::RunState&gt; &gt;::Run+0x1c [c:bslavechrome-  officialbuildsrcbasetask.h @ 409]  0012f320 010097e2 0012f814 0012f718 0012f718   chrome_1000000!MessageLoop::RunTask+0x2c [c:bslavechrome-  officialbuildsrcbasemessage_loop.cc @ 709]  0012f34c 01008778 0012f718 0012f718 0012f718   chrome_1000000!MessageLoop::QueueOrRunTask+0x137 [c:bslavechrome-  officialbuildsrcbasemessage_loop.cc @ 690]  0012f384 010086aa 00000000 0012f718 00000000   chrome_1000000!MessageLoop::RunTraditional+0x4a [c:bslavechrome-  officialbuildsrcbasemessage_loop.cc @ 246]  0012f438 010085e6 00be8318 00000000 29b51376   chrome_1000000!MessageLoop::RunInternal+0xbc [c:bslavechrome-  officialbuildsrcbasemessage_loop.cc @ 228]  0012f478 0112f245 00be8318 00000000 016fb2dc   chrome_1000000!MessageLoop::RunHandler+0x5a [c:bslavechrome-  officialbuildsrcbasemessage_loop.cc @ 198]  0012f5dc 01003733 0012f608 00000001 003a4b30   chrome_1000000!BrowserMain+0xb05 [c:bslavechrome-  officialbuildsrcchromebrowserbrowser_main.cc @ 503]  0012f84c 004027d6 00400000 0012fcb4 00020888   chrome_1000000!ChromeMain+0x618 [c:bslavechrome-  officialbuildsrcchromeappchrome_main.cc @ 280]  0012fc84 00402b7a 00400000 0012fcb4 00020888   chrome!google_update::GoogleUpdateClient::Launch+0x11a [c:bslavechrome-  officialbuildsrcchromeappgoogle_update_client.cc @ 197]  0012ff28 00422982 00400000 00000000 00020888 chrome!wWinMain+0x158   [c:bslavechrome-officialbuildsrcchromeappmain.cc @ 96]  0012ffc0 7c817067 00f5d0b8 00000018 7ffdf000 chrome!__tmainCRTStartup+0x176   [f:spvctoolscrt_bldself_x86crtsrccrt0.c @ 324]  0012fff0 00000000 004229eb 00000000 00000000 kernel32+0x17067    FOLLOWUP_IP:   ntdll+e4f4  7c90e4f4 c3              ret    The module list shows some unusual visitors:    05300000 0551d000   GrooveShellExtensions   057c0000 057e6000   AudibleExt  05830000 05978000   AudioShellExt  68ef0000 68fe1000   GrooveUtil  68ff0000 68ff7000   GrooveNew    The actual hang is here:    014f52b9 e8c232b1ff      call    chrome_1000000!MessageLoop::Run (01008580)  014f52be 8b1d902a7e01    mov     ebx dword ptr   [chrome_1000000!MessageLoop::tls_index_ (017e2a90)]  014f52c4 e83085b1ff      call    chrome_1000000!ThreadLocalStorage::Get   (0100d7f9)  014f52c9 8a4c2413        mov     cl byte ptr [esp+13h]  014f52cd 84c9            test    cl cl  014f52cf 8888ac000000    mov     byte ptr [eax+0ACh] cl  014f52d5 7407            je      chrome_1000000!Thread::InternalStop+0x17f   (014f52de)  014f52d7 8bf8            mov     edi eax  014f52d9 e8b545b1ff      call      chrome_1000000!MessageLoop::EnsurePumpATaskWasPosted (01009893)  014f52de 8b7d08          mov     edi dword ptr [ebp+8]  014f52e1 33db            xor     ebx ebx  014f52e3 ff7704          push    dword ptr [edi+4]  014f52e6 ff1518556101    call    dword ptr   [chrome_1000000!_imp__CloseHandle (01615518)]  014f52ec 895f04          mov     dword ptr [edi+4] ebx  014f52ef 895f0c          mov     dword ptr [edi+0Ch] ebx  014f52f2 5f              pop     edi  014f52f3 5e              pop     esi  014f52f4 5b              pop     ebx  014f52f5 8be5            mov     esp ebp  014f52f7 5d              pop     ebp  014f52f8 c20800          ret     8  014f52fb 8bc6            mov     eax esi  014f52fd e81835b2ff      call    chrome_1000000!Task::Task (0101881a)  014f5302 c706e8977901    mov     dword ptr [esi] offset   chrome_1000000!ThreadQuitTask::`vftable' (017997e8)  014f5308 e936ffffff      jmp     chrome_1000000!Thread::InternalStop+0xe4   (014f5243)  014f530d 6aff            push    0FFFFFFFFh  014f530f ff7704          push    dword ptr [edi+4]  014f5312 ff1534556101    call    dword ptr   [chrome_100000!_imp__WaitForSingleObject (01615534)]   &lt;&lt;&lt; ==== here  014f5318 ebc9            jmp     chrome_1000000!Thread::InternalStop+0x184   (014f52e3)                 </pre>