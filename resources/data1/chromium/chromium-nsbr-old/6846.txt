<title>Issue 6846 -   chromium -    Un-hose omnibox anti-flicker code in OnMouseActivate - Project Hosting on Google Code</title> <pre> Right now OnMouseActivate() does a ScopedFreeze to prevent flicker  but   because of Devin's changes recently  it doesn't necessarily prevent flicker   here  because it lets DefWindowProc() run outside the freeze  which could   redraw anything.  Also  this code isn't very robust -- it's easy for other   code to cause black omnibox problems.    I'm hoping to both fix this issue  and perhaps add an OnActivate() handler   that will either get called when we're really getting activation  or else   get called if someone else changes activation in response to their own   OnActivate() call; either way I can probably make the omnibox robust   against blackness  although in the first case I won't be able to make it   completely flicker-proof. </pre>