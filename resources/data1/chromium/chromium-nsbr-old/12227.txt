<title>Issue 12227 -   chromium -    Official build fails in staging if revision is less than prior build - Project Hosting on Google Code</title> <pre> The official build stage_build.py script fails to stage anything if the   previous build had a higher revision number than the current build.    This bit me when I tried to do a 172.29 build at rev 16265 after 181.0 had   been built at 16298.    The script writes the current revision to chrome_stagingLAST_CHANGE.    stage_build.py relevant lines:      self._last_change_file = os.path.join(self._staging_dir  'LAST_CHANGE')  ...    def _LastBuildRevision(self):      if os.path.exists(self._last_change_file):        return int(open(self._last_change_file).read())      return -1  ...    def StageBuild(self):      result = 0      print 'Staging in %s' % self._staging_dir        # Check files and revision numbers.      not_found = self._VerifyFiles()      print 'last change: %d' % self._build_revision      previous_revision = self._LastBuildRevision()   &lt;===       print 'version: %s' % self._build_version      if self._build_revision &lt;= previous_revision:        # If there have been no changes  report it but don't raise an   exception.        # Someone might have pushed the &quot;force build&quot; button.        print 'No changes since last build (r%d &lt;= r%d)' %   (self._build_revision                                                               previous_revision)        return 0    ------------------------------------------------------  For official builds  I recommend that we just delete the chrome_staging   directory when we clobber the build directory.     There should probably still be a safety check  but we should check whether   the directory we want to write to already exists rather than look at the   revision of the prior build. </pre>