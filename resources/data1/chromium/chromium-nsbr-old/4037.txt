<title>Issue 4037 -   chromium -    HistoryURLProvider scoring adjustments - Project Hosting on Google Code</title> <pre> The HistoryURLProvider currently ensures that the What You Typed match is   either first or second.  I think this is counterproductive  but doing   something better without breaking the ability of people to visit intranet   sites  or screwing up inline autocomplete/synchronous behavior is tricky.    I think the best we can do is:  * For all input types  inline autocompletions are best (as they are now)  * If we have an inline autocompletion  don't make a What You Typed entry at   all (unless one appears organically from the async pass; but don't do any   special score boosting)  * Otherwise   ** If the input is of type URL or REQUESTED_URL  create a What You Typed   entry as the best match.  ** Otherwise (the input is of type UNKNOWN)  create a low-scoring What You   Typed match and flag it as &quot;must appear in result&quot;.  The controller will   then be responsible for bumping the lowest entry to ensure this has a slot.    Make sure any later de-duping transfers this flag to a higher-scoring   entry.    I debated with sky on that last point; this is his sense of what the best   route is  but another alternative would be to simply not create a What You   Typed match at all (like we do when there is an inline autocompletion)    which saves a slot in the popup at the cost of confusing users who want to   use the popup to navigate to intranet URLs they haven't previously visited. </pre>