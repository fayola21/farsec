<title>Issue 17185 -   chromium -    Memory leak in WebCore::StringImpl::createUninitialized() in WebCore::Pasteboard::writeSelection() - Project Hosting on Google Code</title> <pre> The second of four leaks found by running    sh tools/valgrind/valgrind_webkit_tests.sh LayoutTests/editing/pasteboard &amp;  (see the very similar <a title="Memory leaks in WebCore::Pasteboard::writeSelection()" class=closed_ref href="/p/chromium/issues/detail?id=17184"> bug 17184 </a>)    This one happens in e.g.  WebKit/LayoutTests/editing/pasteboard/19644-1.html  though you have to run all the tests in  WebKit/LayoutTests/editing/pasteboard  to reproduce it (valgrind bug?).    Valgrind complains:    2 214 (580 direct  1 634 indirect) bytes in 2 blocks are definitely lost in loss record 730 of  797     at malloc (vg_replace_malloc.c:193)     by WTF::fastMalloc(unsigned int) (FastMalloc.cpp:225)     by WebCore::StringImpl::createUninitialized(unsigned int  unsigned short*&amp;)  (StringImpl.cpp:999)     by WebCore::StringImpl::create(unsigned short const*  unsigned int) (StringImpl.cpp:1012)     by WebCore::String::String(unsigned short const*  unsigned int) (String.cpp:51)     by WebCore::plainText(WebCore::Range const*) (TextIterator.cpp:1858)     by WebCore::Frame::selectedText() const (Frame.cpp:280)     by WebCore::Pasteboard::writeSelection(WebCore::Range*  bool  WebCore::Frame*)  (PasteboardChromium.cpp:79)     by WebCore::Editor::cut() (Editor.cpp:1023)     by WebCore::executeCut(WebCore::Frame*  WebCore::Event*   WebCore::EditorCommandSource  WebCore::String const&amp;) (EditorCommand.cpp:276)     by WebCore::Editor::Command::execute(WebCore::String const&amp;  WebCore::Event*) const  (EditorCommand.cpp:1480)     by WebCore::Document::execCommand(WebCore::String const&amp;  bool  WebCore::String  const&amp;) (Document.cpp:3217)     by WebCore::DocumentInternal::execCommandCallback(v8::Arguments const&amp;)  (V8Document.cpp:653)     by v8::internal::Builtin_HandleApiCall(int  v8::internal::Object**) (builtins.cc:381)   </pre>