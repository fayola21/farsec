<title>Issue 17493 -   chromium -    Http cache key from URL doesn't strip embedded # in the reference section - Project Hosting on Google Code</title> <pre> I am reading through http_cache.cc  and I don't believe the construction of   cache keys is quite right  with respect to reference sections:    // Generate a key that can be used inside the cache.  std::string HttpCache::GenerateCacheKey(const HttpRequestInfo* request) {    std::string url = request-&gt;url.spec();    if (request-&gt;url.has_ref())      url.erase(url.find_last_of('#'));    The problem here is that a URL hash section may itself contain hashes  so the   last &quot;#&quot; isn't necessarily the start of the reference section.   </pre>