<title>Issue 12560 -   chromium -    OffTheRecordObserver should be a Singleton  not a static - Project Hosting on Google Code</title> <pre>   1. Set the registry to install external extension by modifying:  HKEY_LOCAL_MACHINESOFTWAREGoogleChromeExtensions(id of extension you   choose to use)    - Add &quot;path&quot; = C:PathTofile.crx   (see id within file)    - Add &quot;version&quot; = &quot;1.0&quot;  2. If you run this under a debugger and attach to the utility process that is   created as a result (in StartExtensionUnpacker)  you'll see that the utility   process crashes in the destruction of the NotificationRegistrar (in the   destructor for the OffTheRecordObserver).  3. This also causes some DCHECKs in the browser process that Matt is looking   at (double delete because we send both status/fail msg and process crash msg   back to the browser).    &gt;	chrome.dll!DebugUtil::BreakDebugger()  Line 251	C++   	chrome.dll!logging::LogMessage::~LogMessage()  Line 522	C++   	chrome.dll!base::AtExitManager::RegisterCallback(void (void *)*   func=0x67bc9370  void * param=0x6a267a74)  Line 41	C++   	chrome.dll!base::LazyInstanceHelper::EnsureInstance(void *   instance=0x6a267a74  void (void *)* ctor=0x67bc9320  void (void *)*   dtor=0x67bc9370)  Line 26 + 0xd bytes	C++   	  chrome.dll!base::LazyInstance&lt;base::ThreadLocalPointer&lt;NotificationService&gt; ba  se::DefaultLazyInstanceTraits&lt;base::ThreadLocalPointer&lt;NotificationService&gt; &gt;   &gt;::Pointer()  Line 99	C++   	chrome.dll!NotificationService::current()  Line 15 + 0xa bytes	C++   	chrome.dll!NotificationRegistrar::RemoveAll()  Line 70 + 0x5 bytes	  C++   	chrome.dll!NotificationRegistrar::~NotificationRegistrar()  Line 31	  C++   	  chrome.dll!chrome_browser_net::OffTheRecordObserver::~OffTheRecordObserver()    Line 286 + 0x2d bytes	C++   	chrome.dll!chrome_browser_net::`dynamic atexit destructor for   'off_the_record_observer''()  + 0xd bytes	C++   	chrome.dll!doexit(int code=0  int quick=0  int retcaller=1)  Line 553	  C   	chrome.dll!_cexit()  Line 413 + 0xb bytes	C   	chrome.dll!_CRT_INIT(void * hDllHandle=0x66f20000  unsigned long   dwReason=0  void * lpreserved=0x00000001)  Line 225	C   	chrome.dll!__DllMainCRTStartup(void * hDllHandle=0x66f20000  unsigned   long dwReason=0  void * lpreserved=0x00000000)  Line 387 + 0x8 bytes	C   	chrome.dll!_DllMainCRTStartup(void * hDllHandle=0x66f20000  unsigned   long dwReason=0  void * lpreserved=0x00000001)  Line 328 + 0x11 bytes	C   	ntdll.dll!77ebfcc0() 	   	[Frames below may be incorrect and/or missing  no symbols loaded for   ntdll.dll]	   	ntdll.dll!77ed9e5b() 	   	ntdll.dll!77ec238b() 	   	ntdll.dll!77ed9e3c() 	   	ntdll.dll!77ed9e7f() 	   	kernel32.dll!764f87e4() 	   	chrome.exe!__crtExitProcess(int status=0)  Line 684	C   	chrome.exe!doexit(int code=0  int quick=0  int retcaller=0)  Line 596   + 0x9 bytes	C   	chrome.exe!exit(int code=0)  Line 398 + 0xd bytes	C   	chrome.exe!__tmainCRTStartup()  Line 333	C   	chrome.exe!wWinMainCRTStartup()  Line 196	C   	kernel32.dll!7656e4a5() 	   	ntdll.dll!77f0cfed() 	   	ntdll.dll!77f0d1ff() 	   </pre>