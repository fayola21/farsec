<title>Issue 3273 -   chromium -    TextInputController::firstRectForCharacterRange not implemented - Project Hosting on Google Code</title> <pre> The implementation of TextInputController::firstRectForCharacterRange in   the test shell does not return an array as expected by the layout test      LayoutTestseditingselectionmove-left-right.html    TextInputController::firstRectForCharacterRange calls WebTextInputImpl::FirstRectForCharacterRange which does nothing.    Also TextInputController::selectedRange returns a string but it looks like   it should return an array as well.    This is the Objective-C implementation from <a href="http://trac.webkit.org/browser/trunk/WebKitTools/DumpRenderTree/mac/TextInp">http://trac.webkit.org/browser/trunk/WebKitTools/DumpRenderTree/mac/TextInp</a>  utController.m    - (NSArray *)selectedRange  {      NSObject &lt;NSTextInput&gt; *textInput = [self textInput];        if (textInput) {          NSRange range = [textInput selectedRange];          return [NSArray arrayWithObjects:[NSNumber   numberWithUnsignedInt:range.location]  [NSNumber   numberWithUnsignedInt:range.length]  nil];      }        return nil;  }       - (NSArray *)firstRectForCharactersFrom:(int)from length:(int)length  {      NSObject &lt;NSTextInput&gt; *textInput = [self textInput];        if (textInput) {          NSRect rect = [textInput   firstRectForCharacterRange:NSMakeRange(from  length)];          if (rect.origin.x || rect.origin.y || rect.size.width ||   rect.size.height) {              rect.origin = [[webView window]   convertScreenToBase:rect.origin];              rect = [webView convertRect:rect fromView:nil];          }          return [NSArray arrayWithObjects:                      [NSNumber numberWithFloat:rect.origin.x]                       [NSNumber numberWithFloat:rect.origin.y]                       [NSNumber numberWithFloat:rect.size.width]                       [NSNumber numberWithFloat:rect.size.height]                       nil];      }        return nil;  }   </pre>