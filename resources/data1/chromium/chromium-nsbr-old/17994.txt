<title>Issue 17994 -   chromium -    sqlite failures are contributing to test flakiness - Project Hosting on Google Code</title> <pre> C:bslavechromium-dbg-builderbuildsrcchrometestuiui_test.cc(161):   error: Value of: assertions.size()    Actual: 2  Expected: expected_errors_  Which is: 0  The following error(s) occurred in the application during this test:    [FATAL:archived_database.cc(76)] Check failed: rv == SQLITE_OK. Failed to   begin transaction    [FATAL:archived_database.cc(87)] Check failed: rv == SQLITE_OK. Failed to   commit transaction  C:bslavechromium-dbg-builderbuildsrcchrometestuiui_test.cc(175):   error: Value of: actual_crashes    Actual: 1  Expected: expected_crashes_  Which is: 0  Encountered an unexpected crash in the program during this test.    The code:    void ArchivedDatabase::BeginTransaction() {    DCHECK(db_);    if (transaction_nesting_ == 0) {      int rv = sqlite3_exec(db_  &quot;BEGIN TRANSACTION&quot;  NULL  NULL  NULL);      DCHECK(rv == SQLITE_OK) &lt;&lt; &quot;Failed to begin transaction&quot;;    }    transaction_nesting_++;  }    void ArchivedDatabase::CommitTransaction() {    DCHECK(db_);    DCHECK(transaction_nesting_ &gt; 0) &lt;&lt; &quot;Committing too many transactions&quot;;    transaction_nesting_--;    if (transaction_nesting_ == 0) {      int rv = sqlite3_exec(db_  &quot;COMMIT&quot;  NULL  NULL  NULL);      DCHECK(rv == SQLITE_OK) &lt;&lt; &quot;Failed to commit transaction&quot;;    }  } </pre>