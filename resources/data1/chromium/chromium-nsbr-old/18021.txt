<title>Issue 18021 -   chromium -    Crash related to navigating around when carpet bombing protection dialog is open - Project Hosting on Google Code</title> <pre> Chrome Version       : 3.0.196.0browser&gt;      1. Go to google.com  2. Go to   <a href="http://skypher.com/SkyLined/Repro/Chrome/carpet%20bombing/repro.ht">http://skypher.com/SkyLined/Repro/Chrome/carpet%20bombing/repro.ht</a>  ml (dialog opens)  3. Hit &quot;back&quot; button  4. Hit &quot;forward&quot; button (note the dialog is missing this time around  not   sure if that's right)  5. Focus url bar  hit enter        The page should reload  potentially showing the dialog again.        Crash:    Program received signal SIGSEGV  Segmentation fault.  [Switching to Thread 0xf7187720 (LWP 24270)]  0x09558e49 in DownloadRequestManager::TabDownloadState::Observe   (this=0xbd79728  type={value = NotificationType::NAV_ENTRY_PENDING}    source=@0xffffb2c4        details=@0xffffb2c0) at   /usr/local/google/chrwme/src/chrome/browser/download/download_requ  est_manager.cc:115  115	        dialog_delegate_-&gt;CloseWindow();  (gdb) bt  #0  0x09558e49 in DownloadRequestManager::TabDownloadState::Observe   (this=0xbd79728  type={value = NotificationType::NAV_ENTRY_PENDING}    source=@0xffffb2c4        details=@0xffffb2c0) at   /usr/local/google/chrwme/src/chrome/browser/download/download_requ  est_manager.cc:115  #1  0x0a7b8429 in NotificationService::Notify (this=0xb797b00    type={value = NotificationType::NAV_ENTRY_PENDING}    source=@0xffffb2c4  details=@0xffffb2c0)      at   /usr/local/google/chrwme/src/chrome/common/notification_service.cc:11  2  #2  0x094992b2 in NavigationController::LoadEntry (this=0xb9dac2c    entry=0xbe69780)      at   /usr/local/google/chrwme/src/chrome/browser/tab_contents/navigation_  controller.cc:214  #3  0x09499320 in NavigationController::LoadURL (this=0xb9dac2c    url=@0xffffb54c  referrer=@0xffffb504  transition=8)      at   /usr/local/google/chrwme/src/chrome/browser/tab_contents/navigation_  controller.cc:395  #4  0x0951aefa in Browser::OpenURLAtIndex (this=0xf57016c8    source=0x0  url=@0xffffb54c  referrer=@0xffffb504    disposition=CURRENT_TAB  transition=8  index=-1        force_index=true) at   /usr/local/google/chrwme/src/chrome/browser/browser.cc:2668  #5  0x0951b115 in Browser::OpenCurrentURL (this=0xf57016c8) at   /usr/local/google/chrwme/src/chrome/browser/browser.cc:754  #6  0x0951b797 in Browser::ExecuteCommandWithDisposition   (this=0xf57016c8  id=33004  disposition=CURRENT_TAB)      at /usr/local/google/chrwme/src/chrome/browser/browser.cc:1257  #7  0x0951bb64 in Browser::ExecuteCommand (this=0xf57016c8    id=33004) at   /usr/local/google/chrwme/src/chrome/browser/browser.cc:1406  #8  0x0954427c in CommandUpdater::ExecuteCommand   (this=0xf5701744  id=33004) at   /usr/local/google/chrwme/src/chrome/browser/command_updater.cc:42  #9  0x096f0bdc in LocationBarViewGtk::OnAutocompleteAccept   (this=0xb845348  url=@0xffffb81c  disposition=CURRENT_TAB    transition=8  alternate_nav_url=@0xffffb864)      at   /usr/local/google/chrwme/src/chrome/browser/gtk/location_bar_view_gt  k.cc:270  #10 0x0972a986 in AutocompleteEditViewGtk::OpenURL (this=0xb870c30    url=@0xffffb81c  disposition=CURRENT_TAB  transition=8    alternate_nav_url=@0xffffb864        selected_line=4294967295  keyword=@0xffffb8b4) at   /usr/local/google/chrwme/src/chrome/browser/autocomplete/autocompl  ete_edit_view_gtk.cc:277  #11 0x09728021 in AutocompleteEditModel::AcceptInput   (this=0xb872b88  disposition=CURRENT_TAB  for_drop=false)      at   /usr/local/google/chrwme/src/chrome/browser/autocomplete/autocompl  ete_edit.cc:260  #12 0x09729d72 in AutocompleteEditViewGtk::HandleKeyPress   (this=0xb870c30  widget=0xb893860  event=0xbdb0b20)      at   /usr/local/google/chrwme/src/chrome/browser/autocomplete/autocompl  ete_edit_view_gtk.cc:493  #13 0x0972bd8d in AutocompleteEditViewGtk::HandleKeyPressThunk   (widget=0xb893860  event=0xbdb0b20  self=0xb870c30)      at   /usr/local/google/chrwme/src/chrome/browser/autocomplete/autocompl  ete_edit_view_gtk.h:117  #14 0xf7d918d4 in ?? () from /usr/lib32/libgtk-x11-2.0.so.0  #15 0x0b893860 in ?? ()  #16 0x0bdb0b20 in ?? ()  #17 0x0b870c30 in ?? ()  #18 0xf7ae4680 in ?? () from /usr/lib32/libgobject-2.0.so.0  #19 0xf7d91870 in ?? () from /usr/lib32/libgtk-x11-2.0.so.0  #20 0x0b896950 in ?? ()  #21 0xffffba08 in ?? ()  #22 0xf7ab3759 in g_closure_invoke () from /usr/lib32/libgobject-  2.0.so.0  Backtrace stopped: frame did not save the PC  (gdb) list  110	      }  111	  112	      if (is_showing_prompt()) {  113	        // We're prompting the user and they navigated away. Close the   popup and  114	        // cancel the downloads.  115	        dialog_delegate_-&gt;CloseWindow();  116	        // After switch we'll notify callbacks and get deleted.  117	      } else if (status_ ==   DownloadRequestManager::ALLOW_ALL_DOWNLOADS ||  118	                 status_ ==   DownloadRequestManager::DOWNLOADS_NOT_ALLOWED) {  119	        // User has either allowed all downloads or canceled all   downloads. Only  (gdb) p dialog_delegate_  $1 = (DownloadRequestDialogDelegate *) 0xbc08dc0  (gdb) p *dialog_delegate_           $2 = {_vptr.DownloadRequestDialogDelegate = 0x1  host_ = 0xf7d91870}  (gdb) p ((DownloadRequestDialogDelegateGtk*)dialog_delegate_)-  &gt;window_  $3 = (class ConstrainedWindow *) 0x0  (gdb)       The cause of this is not obvious to me. I don't have time to fix this in the   near future either :-/   </pre>