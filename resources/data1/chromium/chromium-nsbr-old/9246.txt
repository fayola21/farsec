<title>Issue 9246 -   chromium -    Memory leak in WebKit font code? - Project Hosting on Google Code</title> <pre> This came up while running test_shell_tests.  A similar bug shows up (though in FontConfig rather than Skia) in   <a href="https://bugs.webkit.org/show_bug.cgi?id=22970">https://bugs.webkit.org/show_bug.cgi?id=22970</a>    1 360 bytes in 85 blocks are definitely lost in loss record 348 of 406     at operator new(unsigned int)   valgrind/trunk/coregrind/m_replacemalloc/vg_replace_malloc.c:230     by SkFontHost::ResolveTypeface(unsigned int)   src/skia/ports/SkFontHost_fontconfig.cpp:299     by SkScalerContext_FreeType::setupSize()   src/skia/ports/SkFontHost_FreeType.cpp:390     by SkScalerContext_FreeType::generateMetrics(SkGlyph*)   src/skia/ports/SkFontHost_FreeType.cpp:480     by SkScalerContext_FreeType::generateAdvance(SkGlyph*)   src/skia/ports/SkFontHost_FreeType.cpp:468     by SkScalerContext::getAdvance(SkGlyph*)   src/skia/sgl/SkScalerContext.cpp:202     by SkGlyphCache::lookupMetrics(unsigned int    SkGlyphCache::MetricsType) src/skia/sgl/SkGlyphCache.cpp:293     by SkGlyphCache::getGlyphIDAdvance(unsigned short)   src/skia/sgl/SkGlyphCache.cpp:155     by sk_getAdvance_glyph_next(SkGlyphCache*  char const**)   src/skia/sgl/SkPaint.cpp:489     by SkPaint::measure_text(SkGlyphCache*  char const*  unsigned int    int*  SkRect*) const src/skia/sgl/SkPaint.cpp:679     by SkPaint::measureText(void const*  unsigned int  SkRect*  float)   const src/skia/sgl/SkPaint.cpp:763     by SkPaint::measureText(void const*  unsigned int) const   src/skia/include/SkPaint.h:686     by WebCore::SimpleFontData::platformWidthForGlyph(unsigned short)   const   src/third_party/WebKit/WebCore/platform/graphics/chromium/SimpleFontDataLinux.cpp:157     by WebCore::SimpleFontData::widthForGlyph(unsigned short) const   src/third_party/WebKit/WebCore/platform/graphics/SimpleFontData.h:223     by WebCore::WidthIterator::advance(int  WebCore::GlyphBuffer*)   src/third_party/WebKit/WebCore/platform/graphics/WidthIterator.cpp:124     by WebCore::Font::floatWidthForSimpleText(WebCore::TextRun const&amp;    WebCore::GlyphBuffer*) const   src/third_party/WebKit/WebCore/platform/graphics/FontFastPath.cpp:302     by WebCore::Font::floatWidth(WebCore::TextRun const&amp;) const   src/third_party/WebKit/WebCore/platform/graphics/Font.cpp:210     by WebCore::Font::width(WebCore::TextRun const&amp;) const   src/third_party/WebKit/WebCore/platform/graphics/Font.h:81     by WebCore::RenderText::widthFromCache(WebCore::Font const&amp;  int  int    int) const src/third_party/WebKit/WebCore/rendering/RenderText.cpp:437     by WebCore::RenderText::calcPrefWidths(int)   src/third_party/WebKit/WebCore/rendering/RenderText.cpp:645     by WebCore::RenderText::maxPrefWidth() const   src/third_party/WebKit/WebCore/rendering/RenderText.cpp:543     by WebCore::RenderText::width(unsigned int  unsigned int    WebCore::Font const&amp;  int) const   src/third_party/WebKit/WebCore/rendering/RenderText.cpp:1035     by WebCore::textWidth(WebCore::RenderText*  unsigned int  unsigned   int  WebCore::Font const&amp;  int  bool  bool)   src/third_party/WebKit/WebCore/rendering/bidi.cpp:1561     by   WebCore::RenderBlock::findNextLineBreak(WebCore::BidiResolver&lt;WebCore::InlineIterator    WebCore::BidiRun&gt;&amp;  bool  WebCore::EClear*)   src/third_party/WebKit/WebCore/rendering/bidi.cpp:2011     by WebCore::RenderBlock::layoutInlineChildren(bool  int&amp;  int&amp;)   src/third_party/WebKit/WebCore/rendering/bidi.cpp:943     by WebCore::RenderBlock::layoutBlock(bool)   src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:777     by WebCore::RenderBlock::layout()   src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:696   </pre>