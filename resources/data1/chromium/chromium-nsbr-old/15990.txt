<title>Issue 15990 -   chromium -    memory leak in jpeg_codec.cc on encoder error - Project Hosting on Google Code</title> <pre> There is memory leak in the module jpeg_codec.cc  member function     bool JPEGCodec::Encode(const unsigned char* input  ColorFormat format                           int w  int h  int row_byte_width                           int quality  std::vector&lt;unsigned char&gt;*   output);     code         // output row after converting       unsigned char* row = new unsigned char[w * 3];         while (cinfo.next_scanline &lt; cinfo.image_height) {         converter(&amp;input[cinfo.next_scanline * row_byte_width]  w  row);         jpeg_write_scanlines(&amp;cinfo  &amp;row  1);       }       delete[] row;     The allocated in row pointer memory will not be released if error   happens in libjpeg. </pre>