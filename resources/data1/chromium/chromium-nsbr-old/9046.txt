<title>Issue 9046 -   chromium -    InvalidRead error from Valgrind in RenderViewTest.OnNavStateChanged - Project Hosting on Google Code</title> <pre> See <a href="http://build.chromium.org/buildbot/waterfall.fyi/builders/Modules">http://build.chromium.org/buildbot/waterfall.fyi/builders/Modules</a> Linux  (valgrind)/builds/2079/steps/valgrind test%3A unit/logs/stdio    [ RUN      ] RenderViewTest.OnNavStateChanged  ...  ERROR:root:InvalidRead    WebCore::Font::cachePrimaryFont() const  (third_party/WebKit/WebCore/platform/graphics/Font.cpp:142)    WebCore::Font::primaryFont() const  (third_party/WebKit/WebCore/platform/graphics/Font.h:120)    WebCore::Font::lineSpacing() const  (third_party/WebKit/WebCore/platform/graphics/Font.h:111)    WebCore::RenderTextControlSingleLine::createInnerTextStyle(WebCore::RenderStyle const*)  const (third_party/WebKit/WebCore/rendering/RenderTextControlSingleLine.cpp:520)    WebCore::RenderTextControl::createSubtreeIfNeeded(WebCore::TextControlInnerElement*)  (third_party/WebKit/WebCore/rendering/RenderTextControl.cpp:142)    WebCore::RenderTextControlSingleLine::createSubtreeIfNeeded()  (third_party/WebKit/WebCore/rendering/RenderTextControlSingleLine.cpp:448)    WebCore::RenderTextControlSingleLine::updateFromElement()  (third_party/WebKit/WebCore/rendering/RenderTextControlSingleLine.cpp:476)    WebCore::HTMLFormControlElement::attach()  (third_party/WebKit/WebCore/html/HTMLFormControlElement.cpp:97)    WebCore::HTMLInputElement::attach()  (third_party/WebKit/WebCore/html/HTMLInputElement.cpp:688)    WebCore::HTMLParser::insertNode(WebCore::Node*  bool)  (third_party/WebKit/WebCore/html/HTMLParser.cpp:352)    WebCore::HTMLParser::handleError(WebCore::Node*  bool  WebCore::AtomicString const&amp;   int) (third_party/WebKit/WebCore/html/HTMLParser.cpp:655)    WebCore::HTMLParser::insertNode(WebCore::Node*  bool)  (third_party/WebKit/WebCore/html/HTMLParser.cpp:327)    WebCore::HTMLParser::handleError(WebCore::Node*  bool  WebCore::AtomicString const&amp;   int) (third_party/WebKit/WebCore/html/HTMLParser.cpp:655)    WebCore::HTMLParser::insertNode(WebCore::Node*  bool)  (third_party/WebKit/WebCore/html/HTMLParser.cpp:327)    WebCore::HTMLParser::parseToken(WebCore::Token*)  (third_party/WebKit/WebCore/html/HTMLParser.cpp:258)    WebCore::HTMLTokenizer::processToken()  (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1886)    WebCore::HTMLTokenizer::parseTag(WebCore::SegmentedString&amp;   WebCore::HTMLTokenizer::State) (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1471)    WebCore::HTMLTokenizer::write(WebCore::SegmentedString const&amp;  bool)  (third_party/WebKit/WebCore/html/HTMLTokenizer.cpp:1717)    WebCore::FrameLoader::write(char const*  int  bool)  (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1039)    WebCore::FrameLoader::addData(char const*  int)  (third_party/WebKit/WebCore/loader/FrameLoader.cpp:1838)    WebFrameImpl::DidReceiveData(WebCore::DocumentLoader*  char const*  int)  (webkit/glue/webframe_impl.cc:1643)    WebFrameLoaderClient::committedLoad(WebCore::DocumentLoader*  char const*  int)  (webkit/glue/webframeloaderclient_impl.cc:1135)    WebCore::FrameLoader::committedLoad(WebCore::DocumentLoader*  char const*  int)  (third_party/WebKit/WebCore/loader/FrameLoader.cpp:3641)    WebCore::DocumentLoader::commitLoad(char const*  int)  (third_party/WebKit/WebCore/loader/DocumentLoader.cpp:361)    WebCore::DocumentLoader::receivedData(char const*  int)  (third_party/WebKit/WebCore/loader/DocumentLoader.cpp:373)    WebCore::FrameLoader::receivedData(char const*  int)  (third_party/WebKit/WebCore/loader/FrameLoader.cpp:2449)    WebCore::MainResourceLoader::addData(char const*  int  bool)  (third_party/WebKit/WebCore/loader/MainResourceLoader.cpp:146)    WebCore::ResourceLoader::didReceiveData(char const*  int  long long  bool)  (third_party/WebKit/WebCore/loader/ResourceLoader.cpp:257)    WebCore::MainResourceLoader::didReceiveData(char const*  int  long long  bool)  (third_party/WebKit/WebCore/loader/MainResourceLoader.cpp:347)    WebCore::ResourceLoader::didReceiveData(WebCore::ResourceHandle*  char const*  int   int) (third_party/WebKit/WebCore/loader/ResourceLoader.cpp:411)    And  for what it's worth  chrome crashes under valgrind when you  do the slightly wider test  $ valgrind Hammer/unit_tests --gtest_filter=RenderViewTest.*  The error it crashes with is    [ RUN      ] RenderViewTest.OnImeStateChanged    Invalid read of size 4      at 0xD991FE6: ???     by 0xD97497E: ???     by 0xD9805D0: ???     by 0xD97F539: ???     by 0xD97497E: ???     by 0xD974C11: ???     by 0xD974673: ???     by 0x8E66F30: v8::internal::Invoke(bool  v8::internal::Handle&lt;v8::internal::JSFunction&gt;   v8::internal::Handle&lt;v8::internal::Object&gt;  int  v8::internal::Object***  bool*)  src/v8/src/execution.cc:89     by 0x8E674C6: v8::internal::Execution::Call(v8::internal::Handle&lt;v8::internal::JSFunction&gt;   v8::internal::Handle&lt;v8::internal::Object&gt;  int  v8::internal::Object***  bool*)  src/v8/src/execution.cc:116     by 0x8E6767A:  v8::internal::Execution::InstantiateFunction(v8::internal::Handle&lt;v8::internal::FunctionTempl     by 0x8E3E888: v8::FunctionTemplate::GetFunction() src/v8/src/api.cc:2358     by 0x8641547:  WebCore::V8Proxy::GetConstructor(WebCore::V8ClassIndex::V8WrapperType)  src/webkit/port/bindings/v8/v8_proxy.cpp:1542   Address 0xbeeddead is not stack'd  malloc'd or (recently) free'd    Process terminating with default action of signal 11 (SIGSEGV)    Access not within mapped region at address 0xBEEDDEAD   </pre>