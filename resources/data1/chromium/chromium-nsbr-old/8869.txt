<title>Issue 8869 -   chromium -    RenderViewTest.ImeComposition ERROR: unable to open font '200' - Project Hosting on Google Code</title> <pre> 1. Launch Hammer/unit_tests on system which is missing something.  2. See the failure    [----------] 4 tests from RenderViewTest  [ RUN      ] RenderViewTest.OnLoadAlternateHTMLText  [       OK ] RenderViewTest.OnLoadAlternateHTMLText  [ RUN      ] RenderViewTest.OnNavStateChanged  [       OK ] RenderViewTest.OnNavStateChanged  [ RUN      ] RenderViewTest.OnImeStateChanged  [       OK ] RenderViewTest.OnImeStateChanged  [ RUN      ] RenderViewTest.ImeComposition  ERROR: unable to open font '200'  Aborted    I would expect the test to fail if I don't have something installed  but  abort is not very nice.    gdb backtrace:    #0  0xffffe430 in __kernel_vsyscall ()  #1  0xb74a3101 in raise () from /lib/libc.so.6  #2  0xb74a48e8 in abort () from /lib/libc.so.6  #3  0x09324217 in sk_throw ()      at /home/ph/chromium-git/src/skia/corecg/SkMemory_stdlib.cpp:172  #4  0x09365365 in ref_ft_face (fontID=512)      at /home/ph/chromium-git/src/skia/ports/SkFontHost_FreeType.cpp:200  #5  0x0936540c in SkScalerContext_FreeType (this=0x9dcf0e8  desc=0xbffbdb6c)      at /home/ph/chromium-git/src/skia/ports/SkFontHost_FreeType.cpp:251  #6  0x09365820 in SkFontHost::CreateScalerContext (desc=0xbffbdb6c)      at /home/ph/chromium-git/src/skia/ports/SkFontHost_FreeType.cpp:870  #7  0x09344265 in SkScalerContext::Create (desc=0xbffbdb6c)      at /home/ph/chromium-git/src/skia/sgl/SkScalerContext.cpp:539  #8  0x093377aa in SkGlyphCache (this=0x9f2cf60  desc=0xbffbdb6c)      at /home/ph/chromium-git/src/skia/sgl/SkGlyphCache.cpp:64  #9  0x09337905 in SkGlyphCache::VisitCache (desc=0xbffbdb6c       proc=0x93394ac &lt;FontMetricsCacheProc&gt;  context=0xbffbdda0)      at /home/ph/chromium-git/src/skia/sgl/SkGlyphCache.cpp:515  #10 0x0933a3a2 in FontMetricsDescProc (desc=0xbffbdb6c  context=0xbffbdda0)      at /home/ph/chromium-git/src/skia/sgl/SkPaint.cpp:899  #11 0x0933a861 in SkPaint::descriptorProc (this=0xbffbdd64  deviceMatrix=0x0       proc=0x933a382 &lt;FontMetricsDescProc&gt;  context=0xbffbdda0)      at /home/ph/chromium-git/src/skia/sgl/SkPaint.cpp:1282  #12 0x0933ac40 in SkPaint::getFontMetrics (this=0xbffbdd64  metrics=0xbffbdda0       zoom=0) at /home/ph/chromium-git/src/skia/sgl/SkPaint.cpp:930  #13 0x08db9a40 in WebCore::SimpleFontData::platformInit (this=0x9e51400)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/chromium/SimpleFontDataLinux.cpp:56  #14 0x08d661f4 in SimpleFontData (this=0x9e51400  f=@0x9dcf038   customFont=false       loading=false  svgFontData=0x0)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/SimpleFontData.cpp:85  #15 0x08b99208 in WebCore::FontCache::getFontDataForCharacters (this=0x9e2b838       font=@0x9e36918  characters=0xbffbdea8  length=1)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/chromium/FontCacheLinux.cpp:84  #16 0x08d78c80 in WebCore::Font::glyphDataForCharacter (this=0x9e36918   c=20320       mirror=false  forceSmallCaps=false)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/FontFastPath.cpp:147  #17 0x08db78a0 in WebCore::WidthIterator::advance (this=0xbffbdfe8  offset=1       glyphBuffer=0x0)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/WidthIterator.cpp:112  #18 0x08d78030 in WebCore::Font::floatWidthForSimpleText (this=0x9e36918       run=@0xbffbe090  glyphBuffer=0x0)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/FontFastPath.cpp:302  #19 0x08a29256 in WebCore::Font::floatWidth (this=0x9e36918  run=@0xbffbe090)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/Font.cpp:210  #20 0x088dafb6 in WebCore::Font::width (this=0x9e36918  run=@0xbffbe090)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/platform/graphics/Font.h:81  #21 0x08d67d42 in textWidth (text=0x9e30acc  from=0  len=1   font=@0x9e36918  xPos=0       isFixedPitch=false  collapseWhiteSpace=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/bidi.cpp:1562  #22 0x08d6c07b in WebCore::RenderBlock::findNextLineBreak (this=0x9eaacdc       resolver=@0xbffbe390  firstLine=true  clear=0xbffbe44c)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/bidi.cpp:1848  #23 0x08d6eb9e in WebCore::RenderBlock::layoutInlineChildren (this=0x9eaacdc       relayoutChildren=false  repaintTop=@0xbffbe654  repaintBottom=@0xbffbe650)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/bidi.cpp:943  #24 0x08bf9e29 in WebCore::RenderBlock::layoutBlock (this=0x9eaacdc       relayoutChildren=false)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:777  #25 0x08be8214 in WebCore::RenderBlock::layout (this=0x9eaacdc)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:696  #26 0x08bf8a6a in WebCore::RenderBlock::layoutBlockChildren (this=0x9e3091c       relayoutChildren=false  maxFloatBottom=@0xbffbe8bc)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:1380  #27 0x08bf9e4b in WebCore::RenderBlock::layoutBlock (this=0x9e3091c       relayoutChildren=false)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:779  #28 0x08be8214 in WebCore::RenderBlock::layout (this=0x9e3091c)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:696  #29 0x08bf8a6a in WebCore::RenderBlock::layoutBlockChildren (this=0x9e356c4       relayoutChildren=false  maxFloatBottom=@0xbffbeb2c)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:1380  #30 0x08bf9e4b in WebCore::RenderBlock::layoutBlock (this=0x9e356c4       relayoutChildren=false)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:779  #31 0x08be8214 in WebCore::RenderBlock::layout (this=0x9e356c4)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:696  #32 0x08bf8a6a in WebCore::RenderBlock::layoutBlockChildren (this=0x9e35c24       relayoutChildren=false  maxFloatBottom=@0xbffbed9c)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:1380  #33 0x08bf9e4b in WebCore::RenderBlock::layoutBlock (this=0x9e35c24       relayoutChildren=false)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:779  #34 0x08be8214 in WebCore::RenderBlock::layout (this=0x9e35c24)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderBlock.cpp:696  #35 0x08c8fc21 in WebCore::RenderView::layout (this=0x9e35c24)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/rendering/RenderView.cpp:122  #36 0x08bbec66 in WebCore::FrameView::layout (this=0x9e2c060   allowSubtree=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/page/FrameView.cpp:577  #37 0x08b75fe1 in WebCore::Document::updateLayout (this=0x9e52708)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/dom/Document.cpp:1329  #38 0x089a54fe in WebCore::VisibleSelection::toNormalizedRange (this=0x9e2afd0)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/VisibleSelection.cpp:144  #39 0x08bde38b in enclosingDeletableElement (selection=@0x9e2afd0)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/DeleteButtonController.cpp:109  #40 0x08bde5e9 in WebCore::DeleteButtonController::enable (this=0x9e19388)  #41 0x08af77da in WebCore::EditCommand::apply (this=0x9e15498)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/EditCommand.cpp:93  #42 0x089c7ca9 in WebCore::CompositeEditCommand::applyCommandToComposite (      this=0x9e69290  cmd=@0xbffbf0ec)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/CompositeEditCommand.cpp:98  #43 0x089c830b in WebCore::CompositeEditCommand::replaceTextInNode  (this=0x9e69290       node=@0xbffbf16c  offset=0  count=5  replacementText=@0xbffbf23c)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/CompositeEditCommand.cpp:320  #44 0x08c7f5ff in WebCore::InsertTextCommand::performTrivialReplace  (this=0x9e69290       text=@0xbffbf23c  selectInsertedText=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/InsertTextCommand.cpp:92  #45 0x08c7faf1 in WebCore::InsertTextCommand::input (this=0x9e69290       originalText=@0xbffbf404  selectInsertedText=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/InsertTextCommand.cpp:128  #46 0x08cbfe2a in WebCore::TypingCommand::insertTextRunWithoutNewlines (      this=0x9e18f90  text=@0xbffbf404  selectInsertedText=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/TypingCommand.cpp:343  #47 0x08cbff11 in WebCore::TypingCommand::insertText (this=0x9e18f90       text=@0xbffbf404  selectInsertedText=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/TypingCommand.cpp:322  #48 0x08cc0848 in WebCore::TypingCommand::insertText (document=0x9e52708       text=@0xbffbf540  selectionForInsertion=@0x9e2afd0   selectInsertedText=true       insertedTextIsComposition=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/TypingCommand.cpp:162  #49 0x08cc0b33 in WebCore::TypingCommand::insertText (document=0x9e52708       text=@0xbffbf540  selectInsertedText=true  insertedTextIsComposition=true)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/TypingCommand.cpp:125  #50 0x088cce4a in WebCore::Editor::setComposition (this=0x9e2b07c   text=@0xbffbf540       underlines=@0xbffbf534  selectionStart=2  selectionEnd=2)      at  /home/ph/chromium-git/src/third_party/WebKit/WebCore/editing/Editor.cpp:1290  #51 0x088423b4 in WebViewImpl::ImeSetComposition (this=0x9e363a8   string_type=0       cursor_position=2  target_start=0  target_end=2  ime_string=@0xbffbf5c4)      at /home/ph/chromium-git/src/webkit/glue/webview_impl.cc:1152  #52 0x085c3485 in RenderWidget::OnImeSetComposition (this=0x9e21a88   string_type=0       cursor_position=2  target_start=-1  target_end=-1  ime_string=@0xbffbf5c4)      at renderer/render_widget.cc:623  #53 0x08249bf0 in RenderViewTest_ImeComposition_Test::TestBody (this=0x9e35570)      at renderer/render_view_unittest.cc:300  #54 0x08fc441a in testing::Test::Run (this=0x9e35570)      at /home/ph/chromium-git/src/testing/gtest/src/gtest.cc:2035  #55 0x08fc809d in testing::internal::TestInfoImpl::Run (this=0x9dd1d48)      at /home/ph/chromium-git/src/testing/gtest/src/gtest.cc:2257  #56 0x08fcc5d7 in testing::internal::TestInfoImpl::RunTest  (test_info=0x9dd1d38)      at /home/ph/chromium-git/src/testing/gtest/src/gtest-internal-inl.h:611  #57 0x08fc8973 in testing::internal::List&lt;testing::TestInfo*&gt;::ForEach&lt;void  (*)(testing::TestInfo*)&gt; (this=0x9dd1ad8       functor=0x8fcc5be  &lt;testing::internal::TestInfoImpl::RunTest(testing::TestInfo*)&gt;)      at /home/ph/chromium-git/src/testing/gtest/src/gtest-internal-inl.h:365  #58 0x08fc7f88 in testing::TestCase::Run (this=0x9dd1af0)      at /home/ph/chromium-git/src/testing/gtest/src/gtest.cc:2353  #59 0x08fcc5bb in testing::TestCase::RunTestCase (test_case=0x9dd1af0)      at /home/ph/chromium-git/src/testing/gtest/src/gtest-internal-inl.h:730  #60 0x08fc87e7 in testing::internal::List&lt;testing::TestCase*&gt;::ForEach&lt;void  (*)(testing::TestCase*)&gt; (this=0x9dd1520       functor=0x8fcc5aa &lt;testing::TestCase::RunTestCase(testing::TestCase*)&gt;)      at /home/ph/chromium-git/src/testing/gtest/src/gtest-internal-inl.h:365  #61 0x08fc7df9 in testing::internal::UnitTestImpl::RunAllTests (this=0x9dd14d8)      at /home/ph/chromium-git/src/testing/gtest/src/gtest.cc:3550  #62 0x08fc7eec in testing::UnitTest::Run (this=0x9796da8)      at /home/ph/chromium-git/src/testing/gtest/src/gtest.cc:3299  #63 0x08250a92 in TestSuite::Run (this=0xbffbf790)      at /home/ph/chromium-git/src/base/test_suite.h:60  #64 0x0824fd21 in main (argc=Cannot access memory at address 0x25ec  ) at test/unit/run_all_unittests.cc:8 </pre>