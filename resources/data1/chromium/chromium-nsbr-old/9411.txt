<title>Issue 9411 -   chromium -    Mem leak in unit_tests - RenderWidgetHostTest.Resize - Project Hosting on Google Code</title> <pre> Valgrind on Mac thinks that unit_tests leaks memory.  We want to enable auto-analysis on valgrind output  before which the detected leaks need to   be fixed (or suppressed).    I'm marking it to you since you were the last person to have touched this. If this is an error    please feel free to reassign to someone more appropriate (or bounce back to me).    The leaking test is: RenderWidgetHostTest.Resize    The following is valgrind's output. (Refer waterfall for latest).    ==57496== 2 368 (32 direct  2 336 indirect) bytes in 2 blocks are definitely lost in loss record   114 of 336  ==57496==    at 0x5963D63: malloc (vg_replace_malloc.c:193)  ==57496==    by 0x8698BDC: stdSmartNewPtr (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0x8698B3F: stdSmartNewHandle (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0x8698AE6: IOCreateAndOpen (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0x86986CF: ScratchInit (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0x8697960: CMOpenOrNewAccess (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0x86975DB: CMOpenProfile (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync  .framework/Versions/A/ColorSync)  ==57496==    by 0xBF6F808: createProfileBySpaceFromShmem (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libCSync.A.dylib)  ==57496==    by 0xBF6FA1B: CMSGetSystemDefaultProfile (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libCSync.A.dylib)  ==57496==    by 0xBF71DB5: deviceSet (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libCSync.A.dylib)  ==57496==    by 0xBF6F53B: cmsDataProviderGetBytes (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libCSync.A.dylib)  ==57496==    by 0xBF7655A: CMSValidateProfile (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libCSync.A.dylib)  ==57496==    by 0x885622E: CGCMSInterfaceValidateProfile (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==57496==    by 0x885620E: CGCMSUtilsValidateProfile (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==57496==    by 0x8856138: CGColorSpaceCreateICCBased (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==57496==    by 0x88050A5: create_generic_color_space (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==57496==    by 0x87AA3A5: CGColorSpaceCreateWithIndex (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==57496==    by 0x6A181A: skia::BitmapPlatformDeviceMac::Create(CGContext*  int  int  bool)   (in src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x6A91B8: skia::PlatformCanvasMac::createPlatformDevice(int  int  bool    CGContext*) (in src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x6A93CD: skia::PlatformCanvasMac::initialize(int  int  bool) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x45962C: BackingStore::BackingStore(gfx::Size const&amp;) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x109C91: TestView::AllocBackingStore(gfx::Size const&amp;) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x48D3FF: RenderWidgetHost::AllocBackingStore(gfx::Size const&amp;) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x456A1B: (anonymous namespace)::CreateBackingStore(RenderWidgetHost*    gfx::Size const&amp;) (in src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x456BF7: BackingStoreManager::PrepareBackingStore(RenderWidgetHost*    gfx::Size const&amp;  int  TransportDIB*  gfx::Rect const&amp;  bool*) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x48D9F5: RenderWidgetHost::PaintBackingStoreRect(TransportDIB*  gfx::Rect   const&amp;  gfx::Size const&amp;) (in src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x48FF15:   RenderWidgetHost::OnMsgPaintRect(ViewHostMsg_PaintRect_Params const&amp;) (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x10821B: RenderWidgetHostTest_Resize_Test::TestBody() (in   src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x70E813: testing::Test::Run() (in src/xcodebuild/Debug/unit_tests)  ==57496==    by 0x713302: testing::internal::TestInfoImpl::Run() (in   src/xcodebuild/Debug/unit_tests)   </pre>