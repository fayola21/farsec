<title>Issue 20005 -   chromium -    Eliminate &quot;please close Firefox&quot; during firstrun via cleverness - Project Hosting on Google Code</title> <pre> Wan-Teh and I may have come up with a way to avoid prompting Firefox users   to close Firefox during Chrome firstrun.    According to Wan-Teh  we cannot possibly corrupt Firefox by reading its   files in read-only mode.  So  to import  we check the Last Modified   timestamps on all the files  open them read-only  and import.  If something   is being written while we're reading and the file is inconsistent  we   shouldn't crash  because presumably we already have the ability to read   anything off disk without crashing.    When we're done importing  we check the timestamps again.  For any files   that have been updated  we retry reading them _once_.  If we still can't   import successfully*  we fail**.    *The naive way to check &quot;import successfully&quot; is &quot;check the last modified   time yet again after reading  and claim failure if it's been updated   again&quot;.  A slightly more clever way would be to import into a second   instance in memory  and if the last modified time was updated again  then   instead of failing immediately  compare the old data with the new; if they   match  the writes aren't affecting us and we can still proceed.    **&quot;Fail&quot; here could mean one of several things:  . We silently don't import that particular chunk of data  . We tell the user we aren't importing that data and continue  . We tell the user to close Firefox before we can import  as we do today </pre>