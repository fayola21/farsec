<title>Issue 20810 -   chromium -    Browser crash @ DownloadShelfContextMenu::ExecuteItemCommand() - Project Hosting on Google Code</title> <pre> ToT(<a href="/p/chromium/source/detail?r=25032">r25032</a>)    This is tricky to reproduce.    -Make your browser busy.  -Click on a 'Apply theme' button on themes gallery page.  -Click on the drop-down button in download shelf and say 'cancel'  immediately after the theme is downloaded [and before it is applied].    Browser window crashes.  I can easily reproduce this.     Crash Analysis  ###############  FAULTING_IP:   +db  00000000 ??              ???    EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)  ExceptionAddress: 00000000     ExceptionCode: c0000005 (Access violation)    ExceptionFlags: 00000000  NumberParameters: 2     Parameter[0]: 00000000     Parameter[1]: 00000000  Attempt to read from address 00000000    DEFAULT_BUCKET_ID:  NULL_INSTRUCTION_PTR    PROCESS_NAME:  chrome.exe    ERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at &quot;0x%08lx&quot; referenced  memory at &quot;0x%08lx&quot;. The memory could not be &quot;%s&quot;.    EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at &quot;0x%08lx&quot;  referenced memory at &quot;0x%08lx&quot;. The memory could not be &quot;%s&quot;.    EXCEPTION_PARAMETER1:  00000000    EXCEPTION_PARAMETER2:  00000000    READ_ADDRESS:  00000000     FOLLOWUP_IP:   chrome_1c30000!DownloadShelfContextMenu::ExecuteItemCommand+db  [c:bslavechromium-rel-xpbuildsrcchromebrowserdownloaddownload_shelf.cc  @ 107]  01ebe57b 5e              pop     esi    FAILED_INSTRUCTION_ADDRESS:   +152952f0092df74  00000000 ??              ???    FAULTING_THREAD:  00001a18    PRIMARY_PROBLEM_CLASS:  NULL_INSTRUCTION_PTR    BUGCHECK_STR:  APPLICATION_FAULT_NULL_INSTRUCTION_PTR_NULL_POINTER_READ    LAST_CONTROL_TRANSFER:  from 01ebe57b to 00000000    STACK_TEXT:    WARNING: Frame IP not in any known module. Following frames may be wrong.  0013ef5c 01ebe57b 07517e60 00000001 0013efc0 0x0  0013f038 01fa236e 00000004 00000008 07517e60  chrome_1c30000!DownloadShelfContextMenu::ExecuteItemCommand+0xdb  [c:bslavechromium-rel-xpbuildsrcchromebrowserdownloaddownload_shelf.cc  @ 107]  0013f0e0 01e78684 000000e4 00000378 06c83800  chrome_1c30000!views::MenuWin::RunMenuAt+0xfe  [c:bslavechromium-rel-xpbuildsrcviewscontrolsmenumenu_win.cc @ 379]  0013f1ac 01e7929e 03d331b8 007004ee 0013f1dc  chrome_1c30000!DownloadShelfContextMenuWin::DownloadShelfContextMenuWin+0x264  [c:bslavechromium-rel-xpbuildsrcchromebrowserviewsdownload_item_view.cc  @ 106]  0013f1e4 01f81a63 0013f2a8 00a83858 00a83780  chrome_1c30000!DownloadItemView::OnMousePressed+0x10e  [c:bslavechromium-rel-xpbuildsrcchromebrowserviewsdownload_item_view.cc  @ 819]  0013f200 01f91319 00000000 00a83858 0013f2ec  chrome_1c30000!views::View::ProcessMousePressed+0x73  [c:bslavechromium-rel-xpbuildsrcviewsview.cc @ 465]  0013f2c0 01f8d5f9 0013f2d8 0000037c 00a86124  chrome_1c30000!views::RootView::OnMousePressed+0x149  [c:bslavechromium-rel-xpbuildsrcviewswidgetroot_view.cc @ 344]  0013f2fc 01d68886 00000001 00000008 666f5374  chrome_1c30000!views::WidgetWin::OnLButtonDown+0x69  [c:bslavechromium-rel-xpbuildsrcviewswidgetwidget_win.cc @ 508]  0013f3d0 01d69209 007004ee 00000201 00000001  chrome_1c30000!views::WidgetWin::_ProcessWindowMessage+0x516  [c:bslavechromium-rel-xpbuildsrcviewswidgetwidget_win.h @ 140]  0013f3f8 01f8de57 007004ee 00000201 00000001  chrome_1c30000!views::WidgetWin::ProcessWindowMessage+0x29  [c:bslavechromium-rel-xpbuildsrcviewswidgetwidget_win.h @ 95]  0013f428 01ff7600 00000201 00000001 037c00ca  chrome_1c30000!views::WidgetWin::OnWndProc+0x47  [c:bslavechromium-rel-xpbuildsrcviewswidgetwidget_win.cc @ 917]  0013f4d4 7e418734 007004ee 00000201 00000001  chrome_1c30000!base::WindowImpl::WndProc+0xb0  [c:bslavechromium-rel-xpbuildsrcbasewindow_impl.cc @ 182]  0013f500 7e418816 01ff7550 007004ee 00000201 user32!InternalCallWinProc+0x28  0013f568 7e4189cd 00000000 01ff7550 007004ee  user32!UserCallWinProcCheckWow+0x150  0013f5c8 7e418a10 0013f634 00000000 0013f604 user32!DispatchMessageWorker+0x306  0013f5d8 01f80e16 0013f634 0013f634 00a68040 user32!DispatchMessageW+0xf  0013f604 01ff89ac 0013f634 00a68060 00a68040  chrome_1c30000!views::AcceleratorHandler::Dispatch+0x76  [c:bslavechromium-rel-xpbuildsrcviewsfocusaccelerator_handler_win.cc @  38]  0013f61c 01ff94c4 0013f634 00000000 00a68040  chrome_1c30000!base::MessagePumpForUI::ProcessMessageHelper+0x6c  [c:bslavechromium-rel-xpbuildsrcbasemessage_pump_win.cc @ 357]  0013f650 01ff86d2 0013f8a8 0013f8a8 0013f8a8  chrome_1c30000!base::MessagePumpForUI::DoRunLoop+0x44  [c:bslavechromium-rel-xpbuildsrcbasemessage_pump_win.cc @ 205]  0013f670 01fcbf6f 0013f8a8 0013f774 00a85000  chrome_1c30000!base::MessagePumpWin::RunWithDispatcher+0x42  [c:bslavechromium-rel-xpbuildsrcbasemessage_pump_win.cc @ 54]  0013f718 01fcc3b0 bab5810b 00a81000 00a85000  chrome_1c30000!MessageLoop::RunInternal+0xaf  [c:bslavechromium-rel-xpbuildsrcbasemessage_loop.cc @ 194]  0013f74c 01fcc419 00000001 0013fa00 0013f774  chrome_1c30000!MessageLoop::RunHandler+0xa0  [c:bslavechromium-rel-xpbuildsrcbasemessage_loop.cc @ 182]  0013f768 01c4a86c 0013f774 028251f4 0013fae8  chrome_1c30000!MessageLoopForUI::Run+0x49  [c:bslavechromium-rel-xpbuildsrcbasemessage_loop.cc @ 600]  0013f778 01c4caf2 00a70000 00000008 ffffffff chrome_1c30000!`anonymous  namespace'::RunUIMessageLoop+0x1c  [c:bslavechromium-rel-xpbuildsrcchromebrowserbrowser_main.cc @ 209]  0013fae8 01c35a6e 0013fbc8 00000008 01c30000  chrome_1c30000!BrowserMain+0x1a42  [c:bslavechromium-rel-xpbuildsrcchromebrowserbrowser_main.cc @ 833]  0013fc64 00403bcd 00400000 0013fcdc 0002127e  chrome_1c30000!ChromeMain+0x71e  [c:bslavechromium-rel-xpbuildsrcchromeappchrome_dll_main.cc @ 599]  0013ff28 0042a581 00400000 00000000 0002127e chrome!wWinMain+0x2fd  [c:bslavechromium-rel-xpbuildsrcchromeappchrome_exe_main.cc @ 102]  0013ffc0 7c817077 0adcb1a4 01ca2b2e 7ffd7000 chrome!__tmainCRTStartup+0x176  [f:spvctoolscrt_bldself_x86crtsrccrt0.c @ 324]  0013fff0 00000000 0042a5ea 00000000 00000000 kernel32!BaseProcessStart+0x23      STACK_COMMAND:  ~0s; .ecxr ; kb    FAULTING_SOURCE_CODE:    No source found for  'c:bslavechromium-rel-xpbuildsrcchromebrowserdownloaddownload_shelf.cc'      SYMBOL_STACK_INDEX:  1    SYMBOL_NAME:  chrome_1c30000!DownloadShelfContextMenu::ExecuteItemCommand+db    FOLLOWUP_NAME:  MachineOwner    MODULE_NAME: chrome_1c30000    IMAGE_NAME:  chrome.dll    DEBUG_FLR_IMAGE_TIMESTAMP:  4a9d45af    FAILURE_BUCKET_ID:   NULL_INSTRUCTION_PTR_c0000005_chrome.dll!DownloadShelfContextMenu::ExecuteItemCommand    BUCKET_ID:   APPLICATION_FAULT_NULL_INSTRUCTION_PTR_NULL_POINTER_READ_NULL_IP_chrome_1c30000!DownloadShelfContextMenu::ExecuteItemCommand+db    WATSON_STAGEONE_URL:   <a href="http://watson.microsoft.com/StageOne/chrome_exe/0_0_0_0/4a9d45f8/unknown/0_0_0_0/bbbbbbb4/c0000005/00000000.htm?Retriage=1">http://watson.microsoft.com/StageOne/chrome_exe/0_0_0_0/4a9d45f8/unknown/0_0_0_0/bbbbbbb4/c0000005/00000000.htm?Retriage=1</a>   </pre>