<title>Issue 19751 -   chromium -    &quot;Options&quot; menu item crashes under Valgrind due to gtk assertion on 64 bit machine - Project Hosting on Google Code</title> <pre> sh tools/valgrind/valgrind.sh out/Debug/chrome    Then pick Options from the wrench menu.    It crashes with    tools/valgrind/valgrind.sh: line 109:  9678 Killed                   G_SLICE=always-malloc NSS_DISABLE_ARENA_FREE_LIST=1 G_DEBUG=fatal_warnings  valgrind --tool=$TOOL_NAME --trace-children=yes  --suppressions=&quot;$SUPPRESSIONS&quot; --smc-check=all &quot;${DEFAULT_TOOL_FLAGS[@]}&quot; &quot;$@&quot;    and if you accept valgrind's offer to run gdb  it shows you the stack trace    (gdb) bt  #0  0x044007f2 in ?? () from /lib/ld-linux.so.2  #1  0x0e6a9335 in raise () from /lib32/libc.so.6  #2  0x0e6aacb1 in abort () from /lib32/libc.so.6  #3  0x0e15611a in g_logv () from /usr/lib32/libglib-2.0.so.0  #4  0x0e156159 in g_log () from /usr/lib32/libglib-2.0.so.0  #5  0x0ddbbfa2 in gtk_file_system_module_load (module=0x18a22d18)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkfilesystem.c:1273  #6  0x0e105608 in g_type_module_use () from /usr/lib32/libgobject-2.0.so.0  #7  0x0ddbbba6 in _gtk_file_system_module_create (      fs_module=&lt;value optimized out&gt;)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkfilesystem.c:1349  #8  0x0ddbbdf3 in IA__gtk_file_system_create (      file_system_name=0x12b91250 &quot;gio&quot;)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkfilesystem.c:1390  #9  0x0ddaa49f in gtk_file_chooser_default_set_property (object=0x1329c730        prop_id=4097  value=0xfeb329d8  pspec=0x12da3220)      at /build/buildd/gtk+2.0-2.12.9/gtk/gtkfilechooserdefault.c:5451    Removing the G_DEBUG=fatalwarnings from valgrind.sh lets the  options menu work.    Running it without valgrind yields a warning at that point:    [11114:11114:791991177530:ERROR:chrome/app/chrome_dll_main.cc(181)] <a title="Issues loading IMEs on 64-bit" class=closed_ref href="/p/chromium/issues/detail?id=9643"> Bug  9643 </a>: Gtk: /usr/lib/gtk-2.0/2.10.0/filesystems/libgio.so: wrong ELF class:  ELFCLASS64    So the crash is just a dup of <a title="Issues loading IMEs on 64-bit" class=closed_ref href="/p/chromium/issues/detail?id=9643"> bug 9643 </a>.   It's annoying that no useful message was printed when running  in valgrind.  Filing bug in case it helps somebody else find the workaround. </pre>