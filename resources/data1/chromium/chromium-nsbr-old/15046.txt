<title>Issue 15046 -   chromium -    IPCSyncChannelTest.NoHang sometimes does not complete due to SIGPIPE - Project Hosting on Google Code</title> <pre> I'm using Chrome as my primary browser  so chances are  it'll be running   when I want to run a test such as unit_tests.  Currently  as long as Chrome   is running  IPCSyncChannelTest.NoHang does not complete.      1. Launch Google Chrome  2. Run unit_tests      Expected: All tests complete and pass.  Observed: IPCSyncChannelTest.NoHang begins but does not complete  and   the test process exits.    mark@anodizer bash$ ./unit_tests --gtest_filter=IPCSync*  [32055:267:0623/095831:75929069366707:WARNING:/chrome/trunk/src  /app/resource_bundle_mac.mm(55)] ignoring requested locale in favor of   NSBundle's selection  Note: Google Test filter = IPCSync*  [==========] Running 15 tests from 2 test cases.  [----------] Global test environment set-up.  [----------] 14 tests from IPCSyncChannelTest  [ RUN      ] IPCSyncChannelTest.Simple  [       OK ] IPCSyncChannelTest.Simple (3 ms)  [ RUN      ] IPCSyncChannelTest.DelayReply  [       OK ] IPCSyncChannelTest.DelayReply (3 ms)  [ RUN      ] IPCSyncChannelTest.NoHang  mark@anodizer bash$    When I run the test in the debugger  this doesn't always happen.  Here's a   backtrace from when it does happen.    (gdb) run --gtest_filter=IPCSyncChannelTest.NoHang  Starting program: /chrome/trunk/src/xcodebuild/Debug/unit_tests --  gtest_filter=IPCSyncChannelTest.NoHang  Reading symbols for shared libraries . done  [32080:2067:0623/100358:76255460946413:WARNING:/chrome/trunk/sr  c/app/resource_bundle_mac.mm(55)] ignoring requested locale in favor of   NSBundle's selection  Note: Google Test filter = IPCSyncChannelTest.NoHang  [==========] Running 1 test from 1 test case.  [----------] Global test environment set-up.  [----------] 1 test from IPCSyncChannelTest  [ RUN      ] IPCSyncChannelTest.NoHang  [       OK ] IPCSyncChannelTest.NoHang (4 ms)  [----------] 1 test from IPCSyncChannelTest (4 ms total)    [----------] Global test environment tear-down  [==========] 1 test from 1 test case ran. (4 ms total)  [  PASSED  ] 1 test.      YOU HAVE 19 DISABLED TESTS      Program exited normally.  (gdb) run --gtest_filter=IPCSyncChannelTest.NoHang  Starting program: /chrome/trunk/src/xcodebuild/Debug/unit_tests --  gtest_filter=IPCSyncChannelTest.NoHang  Reading symbols for shared libraries . done  [32081:2067:0623/100400:76257986194375:WARNING:/chrome/trunk/sr  c/app/resource_bundle_mac.mm(55)] ignoring requested locale in favor of   NSBundle's selection  Note: Google Test filter = IPCSyncChannelTest.NoHang  [==========] Running 1 test from 1 test case.  [----------] Global test environment set-up.  [----------] 1 test from IPCSyncChannelTest  [ RUN      ] IPCSyncChannelTest.NoHang    Program received signal SIGPIPE  Broken pipe.  0x92b6246e in __semwait_signal ()  (gdb) bt  #0  0x92b6246e in __semwait_signal ()  #1  0x92b8d3e6 in _pthread_cond_wait ()  #2  0x92b8cdcd in pthread_cond_wait$UNIX2003 ()  #3  0x00c0b7f4 in ConditionVariable::Wait (this=0xbffff358) at   condition_variable_posix.cc:30  #4  0x00c885f8 in base::WaitableEvent::TimedWait (this=0x6647dd0    max_time=@0xbffff3d8) at   /chrome/trunk/src/base/waitable_event_posix.cc:195  #5  0x00c8869c in base::WaitableEvent::Wait (this=0x6647dd0) at   /chrome/trunk/src/base/waitable_event_posix.cc:201  #6  0x002fc2e3 in (anonymous namespace)::RunTest   (workers=@0xbffff464) at ipc_sync_channel_unittest.cc:225  #7  0x002fd938 in (anonymous namespace)::NoHang   (pump_during_send=true) at ipc_sync_channel_unittest.cc:355  #8  0x002fd9ba in IPCSyncChannelTest_NoHang_Test::TestBody   (this=0x6643e60) at ipc_sync_channel_unittest.cc:363  #9  0x00969682 in testing::Test::Run (this=0x6643e60) at gtest.cc:2055  #10 0x0096e3f3 in testing::internal::TestInfoImpl::Run (this=0x6631260)   at gtest.cc:2286  #11 0x009740fd in testing::internal::TestInfoImpl::RunTest   (test_info=0x6631250) at gtest-internal-inl.h:655  #12 0x0096ee2f in   testing::internal::List&lt;testing::TestInfo*&gt;::ForEach&lt;void   (*)(testing::TestInfo*)&gt; (this=0x66310f0  functor=0x9740e4   &lt;testing::internal::TestInfoImpl::RunTest(testing::TestInfo*)&gt;) at gtest-  internal-inl.h:397  #13 0x0096e2d8 in testing::TestCase::Run (this=0x6631100) at   gtest.cc:2382  #14 0x009740e1 in testing::TestCase::RunTestCase   (test_case=0x6631100) at gtest-internal-inl.h:776  #15 0x0096ec65 in   testing::internal::List&lt;testing::TestCase*&gt;::ForEach&lt;void   (*)(testing::TestCase*)&gt; (this=0x6609e08  functor=0x9740d0   &lt;testing::TestCase::RunTestCase(testing::TestCase*)&gt;) at gtest-internal-  inl.h:397  #16 0x0096e137 in testing::internal::UnitTestImpl::RunAllTests   (this=0x6609dc0) at gtest.cc:3653  #17 0x0096e230 in testing::UnitTest::Run (this=0x34bd3a8) at   gtest.cc:3387  #18 0x008cb54e in TestSuite::Run (this=0xbffff6d0) at test_suite.h:63  #19 0x008c98da in main (argc=2  argv=0xbffff768) at   /chrome/trunk/src/chrome/test/unit/run_all_unittests.cc:8  (gdb)  </pre>