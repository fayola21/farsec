<title>Issue 14194 -   chromium -    Worker process crash. - Project Hosting on Google Code</title> <pre> The worker process is in the sandbox  and needs special webkit/glue capabilities to be able to load font. These capabilities don't seem to be implemented for the worker process  so the   worker process cannot load font.    Here is a stack that shows an example of when the working process loads a font and crash :    chrome_1c30000!DebugUtil::BreakDebugger+0x3 (FPO: [Non-Fpo]) (CONV: cdecl) [c:bslavewinbuildsrcbasedebug_util_win.cc @ 253]  chrome_1c30000!logging::LogMessage::~LogMessage+0x2d4 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbaselogging.cc @ 532]  chrome_1c30000!WorkerWebKitClientImpl::sandboxSupport+0x8e (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromeworkerworker_webkitclient_im  chrome_1c30000!WebCore::ChromiumBridge::ensureFontLoaded+0x2c (FPO: [Non-Fpo]) (CONV: cdecl) [c:bslavewinbuildsrcwebkitapisrcchromiumbridge.cpp @  chrome_1c30000!WebCore::SimpleFontData::platformInit+0x9b (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatformg  chrome_1c30000!WebCore::SimpleFontData::SimpleFontData+0x33f (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatfor  chrome_1c30000!WebCore::FontCache::getCachedFontData+0x114 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatform  chrome_1c30000!WebCore::FontCache::getFontData+0x1bc (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatformgraphi  chrome_1c30000!WebCore::FontFallbackList::fontDataAt+0xdd (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatformg  chrome_1c30000!WebCore::FontFallbackList::primaryFontData+0x1c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatf  chrome_1c30000!WebCore::FontFallbackList::determinePitch+0x27 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatfo  chrome_1c30000!WebCore::FontFallbackList::isFixedPitch+0x23 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatform  chrome_1c30000!WebCore::Font::isFixedPitch+0x57 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreplatformgraphicsfo  chrome_1c30000!WebCore::RenderBlock::findNextLineBreak+0xb29 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderi  chrome_1c30000!WebCore::RenderBlock::layoutInlineChildren+0x8c6 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerend  chrome_1c30000!WebCore::RenderBlock::layoutBlock+0x347 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingren  chrome_1c30000!WebCore::RenderBlock::layout+0x3c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingrenderblo  chrome_1c30000!WebCore::RenderBlock::layoutBlockChildren+0x5d4 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerende  chrome_1c30000!WebCore::RenderBlock::layoutBlock+0x359 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingren  chrome_1c30000!WebCore::RenderBlock::layout+0x3c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingrenderblo  chrome_1c30000!WebCore::RenderBlock::layoutBlockChildren+0x5d4 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerende  chrome_1c30000!WebCore::RenderBlock::layoutBlock+0x359 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingren  chrome_1c30000!WebCore::RenderBlock::layout+0x3c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingrenderblo  chrome_1c30000!WebCore::RenderView::layout+0x1a5 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorerenderingrendervie  chrome_1c30000!WebCore::FrameView::layout+0x673 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorepageframeview.cpp @  chrome_1c30000!WebCore::Document::implicitClose+0x45d (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoredomdocument.c  chrome_1c30000!WebCore::FrameLoader::checkCallImplicitClose+0xa9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloa  chrome_1c30000!WebCore::FrameLoader::checkCompleted+0xed (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderfram  chrome_1c30000!WebCore::FrameLoader::finishedParsing+0x85 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderfra  chrome_1c30000!WebCore::Document::finishedParsing+0x7e (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoredomdocument.  chrome_1c30000!WebCore::HTMLParser::finished+0xc1 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorehtmlhtmlparser.cp  chrome_1c30000!WebCore::HTMLTokenizer::end+0x108 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorehtmlhtmltokenizer.  chrome_1c30000!WebCore::HTMLTokenizer::finish+0x2c6 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorehtmlhtmltokeniz  chrome_1c30000!WebCore::Document::finishParsing+0x36 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoredomdocument.cp  chrome_1c30000!WebCore::FrameLoader::endIfNotLoadingMainResource+0x73 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcor  chrome_1c30000!WebCore::FrameLoader::end+0x20 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderframeloader.cpp  chrome_1c30000!WebCore::DocumentLoader::finishedLoading+0x4e (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloader  chrome_1c30000!WebCore::FrameLoader::finishedLoading+0x52 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderfra  chrome_1c30000!WebCore::MainResourceLoader::didFinishLoading+0x8b (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorelo  chrome_1c30000!WebCore::MainResourceLoader::continueAfterContentPolicy+0x3b8 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkit  chrome_1c30000!WebCore::MainResourceLoader::continueAfterContentPolicy+0x7c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkit  chrome_1c30000!WebCore::MainResourceLoader::callContinueAfterContentPolicy+0xf (FPO: [Non-Fpo]) (CONV: cdecl) [c:bslavewinbuildsrcthird_partywebkit  chrome_1c30000!WebCore::FrameLoader::checkContentPolicy+0x6d (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloader  chrome_1c30000!WebCore::MainResourceLoader::didReceiveResponse+0x205 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcore  chrome_1c30000!WebCore::MainResourceLoader::handleDataLoadNow+0xe9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorel  chrome_1c30000!WebCore::MainResourceLoader::handleDataLoadSoon+0x4d (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcore  chrome_1c30000!WebCore::MainResourceLoader::loadNow+0x188 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloadermai  chrome_1c30000!WebCore::MainResourceLoader::load+0xd1 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloadermainres  chrome_1c30000!WebCore::DocumentLoader::startLoadingMainResource+0xda (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcor  chrome_1c30000!WebCore::FrameLoader::continueLoadAfterWillSubmitForm+0x100 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitw  chrome_1c30000!WebCore::FrameLoader::continueLoadAfterNavigationPolicy+0x2a9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkit  chrome_1c30000!WebCore::FrameLoader::callContinueLoadAfterNavigationPolicy+0x36 (FPO: [Non-Fpo]) (CONV: cdecl) [c:bslavewinbuildsrcthird_partywebkit  chrome_1c30000!WebCore::PolicyCheck::call+0x5e (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderframeloader.cp  chrome_1c30000!WebCore::FrameLoader::continueAfterNavigationPolicy+0x17f (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitweb  chrome_1c30000!WebFrameLoaderClient::dispatchDecidePolicyForNavigationAction+0x2d9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcwebkitglue  chrome_1c30000!WebCore::FrameLoader::checkNavigationPolicy+0x1e2 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloa  chrome_1c30000!WebCore::FrameLoader::loadWithDocumentLoader+0x23e (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcorelo  chrome_1c30000!WebCore::FrameLoader::load+0xf0 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderframeloader.cp  chrome_1c30000!WebCore::FrameLoader::load+0x14c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcthird_partywebkitwebcoreloaderframeloader.c  chrome_1c30000!WebWorkerImpl::startWorkerContext+0x22f (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcwebkitgluewebworker_impl.cc @ 171]  chrome_1c30000!DispatchToMethod&lt;WebKit::WebWorker void (__thiscall WebKit::WebWorker::*)(WebKit::WebURL const &amp; WebKit::WebString const &amp; WebKit::WebString  chrome_1c30000!IPC::MessageWithTuple&lt;Tuple3&lt;GURL std::basic_string&lt;wchar_t std::char_traits&lt;wchar_t&gt; std::allocator&lt;wchar_t&gt; &gt; std::basic_string&lt;wchar_t st  chrome_1c30000!WebWorkerClientProxy::OnMessageReceived+0x94 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromeworkerwebworkerclient_proxy  chrome_1c30000!MessageRouter::RouteMessage+0x4c (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromecommonmessage_router.cc @ 41]  chrome_1c30000!MessageRouter::OnMessageReceived+0x4d (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromecommonmessage_router.cc @ 32]  chrome_1c30000!ChildThread::OnMessageReceived+0x10a (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromecommonchild_thread.cc @ 86]  chrome_1c30000!IPC::ChannelProxy::Context::OnDispatchMessage+0x8d (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcchromecommonipc_channel_pro  chrome_1c30000!DispatchToMethod&lt;IPC::ChannelProxy::Context void (__thiscall IPC::ChannelProxy::Context::*)(IPC::Message const &amp;) IPC::Message&gt;+0x13 (FPO: [  chrome_1c30000!RunnableMethod&lt;IPC::ChannelProxy::Context void (__thiscall IPC::ChannelProxy::Context::*)(IPC::Message const &amp;) Tuple1&lt;IPC::Message&gt; &gt;::Run+  chrome_1c30000!MessageLoop::RunTask+0xb9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 309]  chrome_1c30000!MessageLoop::DeferOrRunPendingTask+0x35 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 320]  chrome_1c30000!MessageLoop::DoWork+0xe9 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 423]  chrome_1c30000!base::MessagePumpDefault::Run+0xbc (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_pump_default.cc @ 23]  chrome_1c30000!MessageLoop::RunInternal+0xfb (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 198]  chrome_1c30000!MessageLoop::RunHandler+0x90 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 182]  chrome_1c30000!MessageLoop::Run+0x3a (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasemessage_loop.cc @ 156]  chrome_1c30000!base::Thread::ThreadMain+0xb8 (FPO: [Non-Fpo]) (CONV: thiscall) [c:bslavewinbuildsrcbasethread.cc @ 159]  chrome_1c30000!`anonymous namespace'::ThreadFunc+0x21 (FPO: [Non-Fpo]) (CONV: stdcall) [c:bslavewinbuildsrcbaseplatform_thread_win.cc @ 26]  kernel32!BaseThreadStart+0x37 (FPO: [Non-Fpo])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 </pre>