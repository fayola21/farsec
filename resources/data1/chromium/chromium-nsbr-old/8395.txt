<title>Issue 8395 -   chromium -    Allow users to edit encodings of search engines  perhaps also Suggest/NavSuggest URLs - Project Hosting on Google Code</title> <pre> Moved from internal bug b/1282415.    Users need a way to edit the inputEncoding for a search engine entry    presumably through a pulldown.      Comments from Jungshik:  ----------------------------    When I brought up this issue earlier this year  it was 'shot down' ;-)  So    I thought we don't want a pull-down menu for this. Rather  we want to do   something 'smart'.    Firefox offers two ways to set the encoding of a query for 'search engines'   (actually  'keyword bookmark').    1. If 'keyword' is made out of an existing bookmark entry  the encoding of   that bookmark is used.    2. A user can add 'mozcharset=&lt;ENCODING&gt;' to the URL for 'keyword'.    <a href="http://www.foo.com/q=%s&amp;mozcharset=Shift_JIS">http://www.foo.com/q=%s&amp;mozcharset=Shift_JIS</a>    The last time I checked  #1 is not possible because we keep bookmark and   search engine lists separately.  #2 is not that hard to implement  but it's kinda dirty hack.    However  we can do something similar to #1 if we record &quot;the encoding of a   site&quot; (or a url) in history db and use that encoding for 'search engine'   (assuming that we can associate a site (or a url patten) with a single   encoding).    If it's a new url/site   we may fetch the page with '%s' replaced by 'foo'   (an ASCII string) in the background(?  invisible tab?) and figure out the   encoding...      Alternatively  instead of having the full list of encodings (supported by   Chrome)  we can just list UTF-8  user-default encoding  locale-dependent   encodings (1 - 3) and a couple of recently selected encodings (basically    what's listed in the second segment of Page - Encoding menu.    Comments from Sky:  ----------------------------    For auto-generated keywords we record the encoding at the time the  keyword is created. For user created keywords we don't do anything  special. It would be nice if we could check the history db  but our db  currently doesn't store site encodings and this wouldn't help first  run import.    Perhaps for user created keywords we could set the encoding the first  time they use the keyword. This would mean we might get the encoding  wrong the first time  but subsequently it should be correct.    We could certainly provide a dialog that lets users change the  encoding  but are users really going to know how to specify encodings?    Comments from Peter:  ----------------------------    Obviously we want to use smart heuristics to guess the right encoding to   use.  I am still not sure we shouldn't give users a way to edit this   encoding  though.  Perhaps if there are several such options we could have   a &quot;More...&quot; type of plus box at the bottom of the edit dialog that could be   used to see advanced options like this.    Comments from Sky:  ----------------------------    It would be nice to show the suggest URL too. So  if we do have a  'more' dialog  there is more (HA!) to add than just the encoding.    Comments from Jungshik:  ----------------------------    &gt;  are users really going to know how to specify encodings?      In CJK and some other countries  yes  many users would know :-)  Limiting   the selection to ~5 (the last paragraph in the previous comment) would   help  too.        - Show quoted text -  &gt; Perhaps for user created keywords we could set the encoding the first  &gt; time they use the keyword. This would mean we might get the encoding  &gt; wrong the first time  but subsequently it should be correct.      Could we hide that first try from a user somehow? (the 2nd last paragraph   in my previous comment)   If not  perhaps  we can set the encoding to the   default encoding (that way  we have a higher chance of getting it right in   the 1st try) in the 1st try.    Still  as Peter is pondering  we may have to provide a pull-down menu (in   'More ...').    Comments from Sky:  ----------------------------    - Hide quoted text -  &gt;&gt; Perhaps for user created keywords we could set the encoding the first  &gt;&gt; time they use the keyword. This would mean we might get the encoding  &gt;&gt; wrong the first time  but subsequently it should be correct.  &gt;  &gt; Could we hide that first try from a user somehow? (the 2nd last paragraph   in  &gt; my previous comment)      Yes  although this is likely a fair amount of code.      - Hide quoted text -  &gt;  If not  perhaps  we can set the encoding to the  &gt; default encoding (that way  we have a higher chance of getting it right   in  &gt; the 1st try) in the 1st try.      We could definitely set the encoding for newly created keywords.      - Hide quoted text -  &gt; Still  as Peter is pondering  we may have to provide a pull-down menu (in  &gt; 'More ...').      Yep  we could do that too.    If we want the most user friendly way they trying to fetch the  encoding seems best.     </pre>