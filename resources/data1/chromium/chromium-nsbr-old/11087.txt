<title>Issue 11087 -   chromium -    browser crash in ExtensionMessageService when ExtensionView process crashes - Project Hosting on Google Code</title> <pre> I had a crash in an ExtensionView process.  I then tried to open up a new   browser window  and I got the following crash:    void ExtensionMessageService::RegisterExtension(      const std::string&amp; extension_id  int render_process_id) {    AutoLock lock(process_ids_lock_);  &gt;&gt;DCHECK(process_ids_.find(extension_id) == process_ids_.end() ||           process_ids_[extension_id] == render_process_id);    process_ids_[extension_id] = render_process_id;  }    The problem is that there's an old process_id in the map that didn't get   cleaned up.      &gt;	chrome.dll!ExtensionMessageService::RegisterExtension(const   std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt; &gt; &amp;   extension_id=&quot;0000000000000000000000000000000000000000&quot;  int   render_process_id=196528)  Line 69 + 0xb2 bytes	C++   	chrome.dll!ExtensionView::RenderViewCreated(RenderViewHost *   rvh=0x05d923c0)  Line 98	C++   	chrome.dll!RenderViewHost::CreateRenderView()  Line 184 + 0x1f   bytes	C++   	chrome.dll!HWNDHtmlView::Init(HWND__ * parent_hwnd=0x00250c10)    Line 73 + 0xf bytes	C++   	chrome.dll!HWNDHtmlView::ViewHierarchyChanged(bool is_add=true    views::View * parent=0x05d7ea98  views::View * child=0x01ad5a80)  Line 86	  C++   	chrome.dll!views::View::ViewHierarchyChangedImpl(bool   register_accelerators=true  bool is_add=true  views::View *   parent=0x05d7ea98  views::View * child=0x01ad5a80)  Line 680 + 0x1e bytes	  C++   	chrome.dll!views::View::PropagateAddNotifications(views::View *   parent=0x05d7ea98  views::View * child=0x01ad5a80)  Line 630	C++   	chrome.dll!views::View::PropagateAddNotifications(views::View *   parent=0x05d7ea98  views::View * child=0x01ad5a80)  Line 628	C++   	chrome.dll!views::View::PropagateAddNotifications(views::View *   parent=0x05d7ea98  views::View * child=0x01ad5a80)  Line 628	C++   	chrome.dll!views::View::AddChildView(int index=4  views::View *   v=0x01ad5a80  bool floating_view=false)  Line 540	C++   	chrome.dll!views::View::AddChildView(views::View * v=0x01ad5a80)    Line 516	C++   	chrome.dll!BrowserView::UpdateChildViewAndLayout(views::View *   new_view=0x01ad5a80  views::View * * old_view=0x05d7eb4c)  Line 1424	C++   	chrome.dll!BrowserView::MaybeShowBookmarkBar(TabContents *   contents=0x01a75400)  Line 1369	C++     </pre>