<title>Issue 11327 -   chromium -    Uninitialized memory reference in Mac CoreAudio and AudioToolbox during MacAudioTest.PCMWaveStreamPlay200HzTone44KssMono  - Project Hosting on Google Code</title> <pre> valgrind --num-callers=30 --track-origins=yes   xcodebuild/Debug/media_unittests --  gtest_filter=MacAudioTest.PCMWaveStreamPlay200HzTone44KssMono     shows two stacks which appear to be upstream MacOSX problems:    Conditional jump or move depends on uninitialised value(s)     at AudioConverterChain::Reset()   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioConverterReset   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUGenericOutputEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUGenericOutputEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUHALEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by CallComponentDispatch   (in /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore)     by AudioOutputUnitStart   (in /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit)     by AQMEDevice::StartIO()   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQMEDevice::AddRunningClient(AQIONodeClient*  bool)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueObject::_Start(AQTimeStamp const&amp;)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueObject::Start(AQTimeStamp const&amp;)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQServer_Start   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueStart   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by   PCMQueueOutAudioOutputStream::Start(AudioOutputStream::AudioSourceCallback*)   (audio_output_mac.cc:192)     by MacAudioTest_PCMWaveStreamPlay200HzTone44KssMono_Test::TestBody()   (audio_output_mac_unittest.cc:77)     by testing::Test::Run() (gtest.cc:2055)     by testing::internal::TestInfoImpl::Run() (gtest.cc:2286)     by testing::internal::TestInfoImpl::RunTest(testing::TestInfo*)   (gtest-internal-inl.h:655)     by void testing::internal::List&lt;testing::TestInfo*&gt;::ForEach&lt;void (*)  (testing::TestInfo*)&gt;(void (*)(testing::TestInfo*)) const   (gtest-internal-inl.h:397)     by testing::TestCase::Run() (gtest.cc:2382)     by testing::TestCase::RunTestCase(testing::TestCase*)   (gtest-internal-inl.h:776)     by void testing::internal::List&lt;testing::TestCase*&gt;::ForEach&lt;void (*)  (testing::TestCase*)&gt;(void (*)(testing::TestCase*)) const   (gtest-internal-inl.h:397)     by testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:3653)     by testing::UnitTest::Run() (gtest.cc:3387)     by TestSuite::Run() (test_suite.h:62)     by main (run_all_unittests.cc:8)   Uninitialised value was created by a heap allocation     at operator new(unsigned long) (vg_replace_malloc.c:217)     by ConverterRegistry::CreateConverter(StreamDescPair const&amp;    AudioConverterChain**  unsigned long  AudioClassDescription*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioConverterNew   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUGenericOutputEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUGenericOutputEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by SystemOutputAUEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUHALEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by CallComponentDispatch   (in /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore)     by AudioUnitSetProperty   (in /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit)     by AQMEDevice::AdaptToDevice(bool)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQMEDevice::Init(unsigned long)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQMEDevice::AQMEDevice(unsigned long  AudioStreamBasicDescription   const*  AudioChannelLayout const*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by NewAQIONode(unsigned long  bool  AudioStreamBasicDescription   const*  AudioChannelLayout const*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQIONodeManager::_FindAQIONode(unsigned long  bool  bool)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQIONodeManager::FindAQIONode(unsigned long  bool  bool)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueObject::DoIONodeConnect(AudioQueueStreamSpecifier const&amp;    AudioStreamBasicDescription const*  AudioChannelLayout const*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueObject::_Start(AQTimeStamp const&amp;)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueObject::Start(AQTimeStamp const&amp;)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQServer_Start   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioQueueStart   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by   PCMQueueOutAudioOutputStream::Start(AudioOutputStream::AudioSourceCallback*)   (audio_output_mac.cc:192)     by MacAudioTest_PCMWaveStreamPlay200HzTone44KssMono_Test::TestBody()   (audio_output_mac_unittest.cc:77)     by testing::Test::Run() (gtest.cc:2055)       by testing::internal::TestInfoImpl::Run() (gtest.cc:2286)     by testing::internal::TestInfoImpl::RunTest(testing::TestInfo*)   (gtest-internal-inl.h:655)     by void testing::internal::List&lt;testing::TestInfo*&gt;::ForEach&lt;void (*)  (testing::TestInfo*)&gt;(void (*)(testing::TestInfo*)) const   (gtest-internal-inl.h:397)    Conditional jump or move depends on uninitialised value(s)     at AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by SystemOutputAUEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by SystemOutputAUEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by SystemOutputAUEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AUMultiChannelMixerEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by CallComponentDispatch   (in /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore)     by AudioUnitRender   (in /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit)     by AQMEDevice::IO_PerformOutput(AudioBufferList&amp;  AudioTimeStamp   const&amp;  unsigned long)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AQMEIO_AU::ProvideOutput(void*  unsigned long*  AudioTimeStamp   const*  unsigned long  unsigned long  AudioBufferList*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)     by AudioConverterChain::CallInputProc(unsigned long)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioConverterChain::FillBufferFromInputProc(unsigned long*    CABufferList*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by BufferedAudioConverter::GetInputBytes(unsigned long  unsigned   long&amp;  CABufferList const*&amp;)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by CBRConverter::RenderOutput(CABufferList*  unsigned long  unsigned   long&amp;  AudioStreamPacketDescription*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by BufferedAudioConverter::FillBuffer(unsigned long&amp;    AudioBufferList&amp;  AudioStreamPacketDescription*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioConverterChain::RenderOutput(CABufferList*  unsigned long    unsigned long&amp;  AudioStreamPacketDescription*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by BufferedAudioConverter::FillBuffer(unsigned long&amp;    AudioBufferList&amp;  AudioStreamPacketDescription*)   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by AudioConverterFillComplexBuffer   (in /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox)     by ???   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio)   Uninitialised value was created by a stack allocation     at AUNetSendEntry   (in /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio) </pre>