<title>Issue 21555 -   chromium -    Duplicate the Frame  its DOM and Render* tree for printing - Project Hosting on Google Code</title> <pre> Sverrir started working on that but this is a really hard task.    Facts:  - window.print() is a synchronous javascript call. Often  the call right after is window.close().  - In the single-threaded web browser world  the printing (implicitly) starts an inner message loop which blocks the   javascript context.  - In Chromium  it's more complex because the plugins and the UI are out of process and the renderer cannot wait on the   browser UI thread due to potentials deadlocks. We get into an issue similar to &quot;alert()&quot; function that we require to be   app-modal due to synchronous javascript call expectations.  - Opening a Print... dialog box from the browser sends synchronous messages to the plugins  which may send synchronous   javascript calls to the (hung) renderer.    Expectations:  - During the printing time frame  javascript events should be hung (which is different from the current javascript   context that must also be hung). This is mainly because we don't want javascript to alter the page &quot;live&quot;. This is *not*   true for all browsers.  - The user may want to change the printers settings  which requires re-rendering the printed pages.    Issue:  We want a pseudo-synchronous window.print() function call instead of a real synchronous function call. In fact  we want   the print preview to be in a completely separate tab (see <a title="Missing a Print Preview option"  href="/p/chromium/issues/detail?id=173">bug 173</a>).  The only real way to decouple the renderer-browser link is to save the state of the web page  hence &quot;Duplicate the   Frame  its DOM and Render* tree&quot;. Once this is done  the new RenderView can do whatever it wants asynchronously.    Workaround:  The other browsers get around this by always forcing the print preview to be app-modal.    Implementation should be near that code:  <a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/renderer/print_web_view_helper.h?view=markup">http://src.chromium.org/viewvc/chrome/trunk/src/chrome/renderer/print_web_view_helper.h?view=markup</a> </pre>