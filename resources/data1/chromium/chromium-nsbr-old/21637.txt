<title>Issue 21637 -   chromium -    TCPClientSocketWin::Connect should handle certain synchronous failures of connect() - Project Hosting on Google Code</title> <pre> See <a title="Unable to view sites for which both IPv6 and IPv4 addresses are published when only IPv4 is available  &quot;Page not found -..." class=closed_ref href="/p/chromium/issues/detail?id=12711"> bug 12711 </a> for additional background.    TCPClientSocketLibevent::Connect needs to handle synchronous failures of   an asynchronous connect() call.  Certain failures can occur immediately   instead of connect() returning EINPROGRESS.  <a title="Unable to view sites for which both IPv6 and IPv4 addresses are published when only IPv4 is available  &quot;Page not found -..." class=closed_ref href="/p/chromium/issues/detail?id=12711"> Bug 12711 </a> has more details   on one case in which this happens on Mac OS X.    The MSDN documentation for connect() seems to indicate that an   asynchronous connect() will never return anything other than   WSAEWOULDBLOCK  but it is slightly ambiguous.  For example  it wouldn't   be surprising for an asynchronous connect() attempt to fail with   WSANOTINITIALISED if WSAStartup has not been called.    Although we aren't aware of the current implementation of   TCPClientSocketWin::Connect having any bugs due to this concern  Wan-  Teh and I agree that the safest way to proceed here would be to handle   certain synchronous failures from connect() directly in   TCPClientSocketWin::Connect as was done in <a title="Unable to view sites for which both IPv6 and IPv4 addresses are published when only IPv4 is available  &quot;Page not found -..." class=closed_ref href="/p/chromium/issues/detail?id=12711"> bug 12711 </a> for   TCPClientSocketLibevent. </pre>