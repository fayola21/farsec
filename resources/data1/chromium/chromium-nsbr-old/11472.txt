<title>Issue 11472 -   chromium -    status_bubble_gtk.cc debug mode crash - Project Hosting on Google Code</title> <pre>   1. Browse to <a href="http://codereview.chromium.org/111003">http://codereview.chromium.org/111003</a>  2. Move the cursor over the http://about:crash link      It should pop up the bubble  instead it crashes (DCHECK).    [8158:8158:1119395796044:FATAL:/usr/local/google/chromium1/src/googleurl/sr  c/gurl.cc(155)] Check failed: false. Trying to get the spec of an invalid   URL!    Program received signal SIGTRAP  Trace/breakpoint trap.  [Switching to Thread 0xf71ec720 (LWP 8158)]  DebugUtil::BreakDebugger () at   /usr/local/google/chromium1/src/base/debug_util_posix.cc:114  114     }  (gdb) ba  #0  DebugUtil::BreakDebugger () at   /usr/local/google/chromium1/src/base/debug_util_posix.cc:114  #1  0x08419b0d in ~LogMessage (this=0xffd3e794) at   /usr/local/google/chromium1/src/base/logging.cc:521  #2  0x086deb87 in GURL::spec (this=0xffd3e920) at   /usr/local/google/chromium1/src/googleurl/src/gurl.cc:155  #3  0x082aa5eb in StatusBubbleGtk::SetURL (this=0xb5e87a0  url=@0xffd3e920    languages=@0xffd3e888)      at   /usr/local/google/chromium1/src/chrome/browser/gtk/status_bubble_gtk.cc:41  #4  0x0823722d in Browser::UpdateTargetURL (this=0xf6812c08    source=0xbd20378  url=@0xffd3e920) at   /usr/local/google/chromium1/src/chrome/browser/browser.cc:1894  #5  0x081da353 in TabContents::UpdateTargetURL (this=0xbd20378  page_id=2    url=@0xffd3e920)      at   /usr/local/google/chromium1/src/chrome/browser/tab_contents/tab_contents.cc  :1736  #6  0x08145b10 in RenderViewHost::OnMsgUpdateTargetURL (this=0xf34a6538    page_id=2  url=@0xffd3e920)      at   /usr/local/google/chromium1/src/chrome/browser/renderer_host/render_view_ho  st.cc:933  #7  0x0814ca11 in DispatchToMethod&lt;RenderViewHost  void   (RenderViewHost::*)(int  GURL const&amp;)  int  GURL&gt; (obj=0xf34a6538       method=0x8145adc &lt;RenderViewHost::OnMsgUpdateTargetURL(int  GURL   const&amp;)&gt;  arg=@0xffd3e91c) at   /usr/local/google/chromium1/src/base/tuple.h:400  #8  0x08156e1f in IPC::MessageWithTuple&lt;Tuple2&lt;int  GURL&gt;   &gt;::Dispatch&lt;RenderViewHost  void (RenderViewHost::*)(int  GURL const&amp;)&gt;   (msg=0xbd1bec4  obj=0xf34a6538       func=0x8145adc &lt;RenderViewHost::OnMsgUpdateTargetURL(int  GURL   const&amp;)&gt;) at   /usr/local/google/chromium1/src/chrome/common/ipc_message_utils.h:1082  #9  0x0814ae39 in RenderViewHost::OnMessageReceived (this=0xf34a6538    msg=@0xbd1bec4)      at   /usr/local/google/chromium1/src/chrome/browser/renderer_host/render_view_ho  st.cc:704  #10 0x082d61b6 in BrowserRenderProcessHost::OnMessageReceived   (this=0xf1326388  msg=@0xbd1bec4)      at   /usr/local/google/chromium1/src/chrome/browser/renderer_host/browser_render  _process_host.cc:619  #11 0x0928ce93 in IPC::ChannelProxy::Context::OnDispatchMessage   (this=0xf34a6e28  message=@0xbd1bec4)      at   /usr/local/google/chromium1/src/chrome/common/ipc_channel_proxy.cc:179  #12 0x0928dd3f in DispatchToMethod&lt;IPC::ChannelProxy::Context  void   (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  IPC::Message&gt;   (obj=0xf34a6e28       method=0x928ce02   &lt;IPC::ChannelProxy::Context::OnDispatchMessage(IPC::Message const&amp;)&gt;    arg=@0xbd1bec4) at /usr/local/google/chromium1/src/base/tuple.h:393  #13 0x0928dd7b in RunnableMethod&lt;IPC::ChannelProxy::Context  void   (IPC::ChannelProxy::Context::*)(IPC::Message const&amp;)  Tuple1&lt;IPC::Message&gt;   &gt;::Run (this=0xbd1bea8)      at /usr/local/google/chromium1/src/base/task.h:307  #14 0x0841bec4 in MessageLoop::RunTask (this=0xffd3f970  task=0xbd1bea8) at   /usr/local/google/chromium1/src/base/message_loop.cc:308  #15 0x0841c369 in MessageLoop::DeferOrRunPendingTask (this=0xffd3f970    pending_task=@0xffd3ef04) at   /usr/local/google/chromium1/src/base/message_loop.cc:316  #16 0x0841c715 in MessageLoop::DoWork (this=0xffd3f970) at   /usr/local/google/chromium1/src/base/message_loop.cc:416  #17 0x08424220 in base::MessagePumpForUI::HandleDispatch (this=0xb50cdf8)   at /usr/local/google/chromium1/src/base/message_pump_glib.cc:191  #18 0x084242d4 in WorkSourceDispatch (source=0xb50ce30  unused_func=0    unused_data=0x0) at   /usr/local/google/chromium1/src/base/message_pump_glib.cc:76  #19 0xf78c2bf8 in g_main_context_dispatch () from /usr/lib32/libglib-  2.0.so.0  #20 0xf78c5e5e in ?? () from /usr/lib32/libglib-2.0.so.0  #21 0x0b50c0d8 in ?? ()  #22 0x000000c8 in ?? ()  #23 0x0b7233c0 in ?? ()  #24 0x00000003 in ?? ()  #25 0x00000003 in ?? ()  #26 0xf793b5f8 in ?? () from /usr/lib32/libglib-2.0.so.0  #27 0xf793b620 in ?? () from /usr/lib32/libglib-2.0.so.0  #28 0xffd3f0c4 in ?? ()  #29 0x00000001 in ?? ()  #30 0x00000001 in ?? ()  #31 0x0b50c0d8 in ?? ()  #32 0x0b7233c0 in ?? ()  #33 0xf7443d10 in ?? () from /lib32/libc.so.6  #34 0x09bf39c8 in finite@plt ()  #35 0x09bf39d8 in pthread_mutex_unlock@plt ()  #36 0xf78ea502 in g_thread_self () from /usr/lib32/libglib-2.0.so.0  #37 0xf78c63ac in g_main_context_iteration () from /usr/lib32/libglib-  2.0.so.0  #38 0x0842442b in base::MessagePumpForUI::Run (this=0xb50cdf8    delegate=0xffd3f970) at   /usr/local/google/chromium1/src/base/message_pump_glib.cc:150  #39 0x0841cc41 in MessageLoop::RunInternal (this=0xffd3f970) at   /usr/local/google/chromium1/src/base/message_loop.cc:197  #40 0x0841cc5b in MessageLoop::RunHandler (this=0xffd3f970) at   /usr/local/google/chromium1/src/base/message_loop.cc:180  #41 0x0841ccbf in MessageLoop::Run (this=0xffd3f970) at   /usr/local/google/chromium1/src/base/message_loop.cc:154  #42 0x0804d6a3 in RunUIMessageLoop (browser_process=0xb50d398) at   /usr/local/google/chromium1/src/chrome/browser/browser_main.cc:180  #43 0x0804f1ad in BrowserMain (parameters=@0xffd3fe6c) at   /usr/local/google/chromium1/src/chrome/browser/browser_main.cc:622  #44 0x08048b63 in ChromeMain (argc=1  argv=0xffd3ffd4) at   /usr/local/google/chromium1/src/chrome/app/chrome_dll_main.cc:460  #45 0x0804946a in main (argc=1  argv=0xffd3ffd4) at   /usr/local/google/chromium1/src/chrome/app/chrome_exe_main_gtk.cc:33  (gdb) frame 2  #2  0x086deb87 in GURL::spec (this=0xffd3e920) at   /usr/local/google/chromium1/src/googleurl/src/gurl.cc:155  155       DCHECK(false) &lt;&lt; &quot;Trying to get the spec of an invalid URL!&quot;;  (gdb) p is_valid_  $29 = false  (gdb) frame 4  #4  0x0823722d in Browser::UpdateTargetURL (this=0xf6812c08    source=0xbd20378  url=@0xffd3e920) at   /usr/local/google/chromium1/src/chrome/browser/browser.cc:1894  1894        GetStatusBubble()-&gt;SetURL(url  prefs-  &gt;GetString(prefs::kAcceptLanguages));  (gdb) p url  $30 = (const GURL &amp;) @0xffd3e920: {    spec_ = {      static npos = 4294967295       _M_dataplus = {        &lt;std::allocator&lt;char&gt;&gt; = {          &lt;__gnu_cxx::new_allocator&lt;char&gt;&gt; = {&lt;No data fields&gt;}  &lt;No data   fields&gt;}         members of   std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;   &gt;::_Alloc_hider:        _M_p = 0xf2eea85c &quot;http://about:crash/      }     }     is_valid_ = false     parsed_ = {      scheme = {        begin = 0         len = 4      }       username = {        begin = 0         len = -1      }       password = {        begin = 0         len = -1      }       host = {        begin = 7         len = 5      }       port = {        begin = 13         len = 5      }       path = {        begin = 18         len = 1      }       query = {        begin = 0         len = -1      }       ref = {        begin = 0         len = -1      }    }  } </pre>