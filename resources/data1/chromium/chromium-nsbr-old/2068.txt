<title>Issue 2068 -   chromium -    BrowserMain() needs refactoring - Project Hosting on Google Code</title> <pre> BrowserMain() is hugely long.  Also  lots of important initializations are   chained off each other by being called from various people's constructors    etc.  It would be nice to figure out what is happening at startup such that   this can be broken into a series of discrete phases  e.g.:  * initial bootstrapping  * pref registration  * initialization of services that need prefs  * window creation  * initialization of services the need the window  * main loop  * shutdown  This would make it clear where to add new startup actions  as well as how   to augment the code when normal and unittest modes differ (e.g. for   services that are only created when not in unittest mode). </pre>