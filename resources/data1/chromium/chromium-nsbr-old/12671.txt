<title>Issue 12671 -   chromium -    During WatchdogTest.AlarmTest  an assertion on time intervals failed by 32 milliseconds - Project Hosting on Google Code</title> <pre> At watchdog_unittest.cc  line 85  we have      // It should instantly go off  but certainly in less than 5 minutes.    SPIN_FOR_TIMEDELTA_OR_UNTIL_TRUE(TimeDelta::FromMinutes(5)                                      watchdog.alarm_counter() &gt; 1);    The SPIN_FOR_TIMEDELTA_OR_UNTIL_TRUE macro is defined as    #define SPIN_FOR_TIMEDELTA_OR_UNTIL_TRUE(delta  expression) do {     base::Time start = base::Time::Now();     const base::TimeDelta kTimeout = delta;       while(!(expression)) {         if (kTimeout &lt; base::Time::Now() - start) {         EXPECT_LE((base::Time::Now() - start).InMilliseconds()                    kTimeout.InMilliseconds()) &lt;&lt; &quot;Timed out&quot;;           break;         }         PlatformThread::Sleep(50);       }     }     while(0)    During WatchdogTest.AlarmTest today  the EXPECT_LE assertion failed by  32 milliseconds.  See the test output below.    <a href="http://build.chromium.org/buildbot/waterfall/builders/Modules%20Linux%20(db">http://build.chromium.org/buildbot/waterfall/builders/Modules%20Linux%20(db</a>  g)/builds/8343/steps/base_unittests/logs/stdio    [ RUN      ] WatchdogTest.AlarmTest  [3298:3302:0526/120518:6451243248178:INFO:/b/slave/sub-dbg-  linux/build/src/base/watchdog.cc(126)] Watchdog active: Enabled Watchdog  [3298:3302:0526/120518:6451243261080:INFO:/b/slave/sub-dbg-  linux/build/src/base/watchdog.h(48)] Watchdog alarmed for Enabled  /b/slave/sub-dbg-linux/build/src/base/watchdog_unittest.cc:83: Failure  Expected: ((base::Time::Now() - start).InMilliseconds()) &lt;=   (kTimeout.InMilliseconds())  actual: 300032 vs 300000  Timed out  /b/slave/sub-dbg-linux/build/src/base/watchdog_unittest.cc:85: Failure  Value of: watchdog.alarm_counter()    Actual: 1  Expected: 2  [  FAILED  ] WatchdogTest.AlarmTest (300085 ms) </pre>