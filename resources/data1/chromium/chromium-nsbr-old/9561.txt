<title>Issue 9561 -   chromium -    Mem leak in test_shell_tests - GetResourcesFilePath - Project Hosting on Google Code</title> <pre> Valgrind on Mac thinks that unit_tests leaks memory.  We want to enable auto-analysis on valgrind output  before which the detected leaks need to   be fixed (or suppressed).    I'm marking it to you since you were the last person to have touched this. If this is an error    please feel free to reassign to someone more appropriate (or bounce back to me).    The leaking test is: test_shell_mac.mm:GetResourcesFilePath()    The following is valgrind's output. (Refer waterfall for latest).    ==23659== 176 (92 direct  84 indirect) bytes in 1 blocks are definitely lost in loss record 387 of   680  ==23659==    at 0x4509E23: malloc_zone_malloc (vg_replace_malloc.c:197)  ==23659==    by 0x1D3197D9: ripc_GetClipState (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libRIP.A.dylib)  ==23659==    by 0x1D31A8C5: ripc_GetRenderingState (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libRIP.A.dylib)  ==23659==    by 0x1D31F4BD: ripc_DrawRects (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/Resources/libRIP.A.dylib)  ==23659==    by 0x73A841D: CGContextFillRects (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==23659==    by 0x73FD19D: CGContextFillRect (in   /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGrap  hics.framework/Versions/A/CoreGraphics)  ==23659==    by 0xBCEA6F: WebCore::GraphicsContext::fillRect(WebCore::FloatRect const&amp;    WebCore::Color const&amp;) (ImageCG.cpp:173)  ==23659==    by 0xB9C402: WebCore::FrameView::paintContents(WebCore::GraphicsContext*    WebCore::IntRect const&amp;) (FrameView.cpp:141)  ==23659==    by 0xC53BF3: WTF::RefCounted&lt;WebCore::Scrollbar&gt;::deref() (RefCounted.h:94)  ==23659==    by 0x60C897: WebFrameImpl::Paint(skia::PlatformCanvasMac*  gfx::Rect const&amp;)   (webframe_impl.cc:1622)  ==23659==    by 0x6379E8: WebViewImpl::Paint(skia::PlatformCanvasMac*  gfx::Rect const&amp;)   (webview_impl.cc:1664)  ==23659==    by 0x84BCA: WebWidgetHost::PaintRect(gfx::Rect const&amp;)   (webwidget_host.mm:255)  ==23659==    by 0x85D02: WebWidgetHost::Paint() (webwidget_host.mm:173)  ==23659==    by 0x820B4: -[TestShellWebView drawRect:] (NSGeometry.h:143)  ==23659==    by 0x462529B: -[NSView _drawRect:clip:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x4623D92: -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x4624129: -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x4624129: -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x46226E8: -[NSView   _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:]   (in /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x462202A: -[NSThemeFrame   _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:]   (in /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x461EB4E: -[NSView   _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x455F522: -[NSView displayIfNeeded] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x455F0D0: -[NSWindow displayIfNeeded] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x461ACA6: -[NSWindow   _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x461A6FF: -[NSWindow orderWindow:relativeTo:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0x45E2091: -[NSWindow makeKeyAndOrderFront:] (in   /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)  ==23659==    by 0xA80BC: GetResourcesFilePath() (test_shell_mac.mm:85)  ==23659==    by 0xA3E9E: scoped_ptr&lt;LayoutTestController&gt;::~scoped_ptr() (scoped_ptr.h:72)  ==23659==    by 0x7EB61: TestShellWebKitInit::~TestShellWebKitInit()   (test_shell_webkit_init.h:38)  ==23659==    by 0x7EC24: TestShellTest::SetUp() (locale_facets.tcc:2499)   </pre>