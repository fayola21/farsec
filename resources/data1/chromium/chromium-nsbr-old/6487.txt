<title>Issue 6487 -   chromium -    Fix UI components to behave correctly in the face of &amp;lrm &amp;rlm markers. - Project Hosting on Google Code</title> <pre> In the UI for RTL-locales  URL strings always need to be escaped before  being passed to UI code in order to ensure they're displayed LTR to  preserve correct directionality (e.g.  <a href="http://code.google.com/p/chromium/issues/detail?id=3233">http://code.google.com/p/chromium/issues/detail?id=3233</a>).    The best place to do this would be in gfx::ElideURL() to prevent each  callsite from having to wrap the string with the correct directionality  markers.    Idan explains the problem:  &quot;I tried putting this logic inside gfx::ElideURL in the past  but it turns  out that doing so breaks certain components (such as the Omnibox) which  wrongly base certain logic based on the number of characters in the string.  I realized that it is much easier to incorporate the wrapping logic outside  of ElideURL. It is going to be worthwhile to fix these components so that  they operate well in the presence of these characters.&quot;    This bug is to do this cleanup and move the escaping code into  gfx::ElideURL().  </pre>