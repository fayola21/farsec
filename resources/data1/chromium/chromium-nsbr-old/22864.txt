<title>Issue 22864 -   chromium -    May failure parsing a valid PAC script if it doesn't end with a newline - Project Hosting on Google Code</title> <pre> This is a compatibility regression for Chrome 3.    If a PAC script ends with a comment  AND no trailing newline  then it will fail to parse in   ProxyResolverV8.    For example:    std::string pac_script =      &quot;function FindProxyForURL(url  host) {&quot;      &quot;return &quot;PROXY success:80&quot;; }n&quot;      &quot;// COMMENT&quot;;    The problem is straightfoward:    In proxy_resolver_v8.cc we add some extra utility functions to the script  by simply concatenating   the strings:        std::string text_raw_utf8 = pac_data_utf8 + PROXY_RESOLVER_SCRIPT;    So if there was a trailing comment  the first line of PROXY_RESOLVER_SCRIPT is understood as   part of the comment.   </pre>