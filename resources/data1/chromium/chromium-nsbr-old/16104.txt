<title>Issue 16104 -   chromium -    Memory leak in history::VisitSegmentDatabase::QuerySegmentUsage - Project Hosting on Google Code</title> <pre> Affects ui tests TabRestoreUITest.BasicRestoreFromClosedWindow   TabRestoreUITest.RestoreIntoSameWindow.  Reproduce with e.g.    sh tools/valgrind/chrome_test.sh -t ui --    Valgrind complains:    504 (224 direct  280 indirect) bytes in 2 blocks are definitely lost in loss record 402 of 546     at operator new(unsigned int) (vg_replace_malloc.c:212)     by history::VisitSegmentDatabase::QuerySegmentUsage(base::Time const&amp;  int   std::vector&lt;PageUsageData*  std::allocator&lt;PageUsageData*&gt; &gt;*)  (visitsegment_database.cc:270)     by history::HistoryBackend::QueryTopURLsAndRedirects(...) (history_backend.cc:1174)     by RunnableMethod&lt;history::HistoryBackend  ...     by MessageLoop::RunTask(Task*) (message_loop.cc:313)     by MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (message_loop.cc:321)   </pre>