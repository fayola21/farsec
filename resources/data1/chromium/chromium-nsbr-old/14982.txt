<title>Issue 14982 -   chromium -    Incorrect recycling of SOCKS sockets in HttpNetworkTransaction - Project Hosting on Google Code</title> <pre> From reading the code  it seems we have the following bug:    If you do an HTTP transaction over a keep-alive connection  and are going through a SOCKS proxy   server  then once the HTTP transaction is completed  the socket will be recycled to the socket   pool.    The problem here is that |connection_| (ClientSocketHandle) was initialized for the proxy-server   -- hence its &quot;groupname&quot; is for the proxy server and NOT the target server. Now after wrapping   the transport socket in a SOCKSClientSocket and completing the handshake  the effective endpoint   becomes the target server rather than the proxy server.    If this socket is later re-used when we ask for a socket to the proxy server  we will actually   have a socket connecting us to the target server. (If we subsequently try to do the SOCKS   handshake  it will be a handshake with the target server)    The easiest fix here is to not recycle connections that have been wrapped by SOCKS. (We can   consider doing fancier stuff later  like returning the socket to the pool  but for the group-  name matching the target-server).     </pre>