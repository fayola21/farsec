<title>Issue 17490 -   chromium -    Linux: Firefox import utility does not import passwords correctly - Project Hosting on Google Code</title> <pre> I broke this while fixing the firefox import utility not to crash due to   NSS initialization/shutdown issues.  Here's wtc's suggestion on the matter:    &quot;It turns out that importing saved passwords from Firefox is  also broken when the user doesn't have a &quot;master password&quot;  for Firefox.  So the problem is more serious than I previously  stated.    But I've got good news -- we can tell NSS to load an additional  database using the SECMOD_OpenUserDB function:  <a href="http://mxr.mozilla.org/security/ident?i=SECMOD_OpenUserDB">http://mxr.mozilla.org/security/ident?i=SECMOD_OpenUserDB</a>    The function returns what NSS calls a &quot;slot&quot;.  (This term  comes from the fact that some crypto modules such as  smartcards are inserted into slots.)  One issue is that  PK11SDR_Decrypt  which we use to decrypt Firefox's saved  passwords  is hardcoded to use NSS's &quot;internal key slot&quot;   which represents our sql:$HOME/.pki/nssdb database:  <a href="http://bonsai.mozilla.org/cvsblame.cgi?">http://bonsai.mozilla.org/cvsblame.cgi?</a>  file=mozilla/security/nss/lib/pk11wrap/pk11sdr.c&amp;rev=1.22&amp;mark=329#309    We can work around this issue by copying the PK11SDR_Decrypt  code into our Linux code base and changing it to take the slot  returned by SECMOD_OpenUserDB.&quot; </pre>