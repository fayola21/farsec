<title>Issue 18158 -   chromium -    BookmarkEditorControllerTest.UserEditsStuff from unit_tests fails under Valgrind. - Project Hosting on Google Code</title> <pre> SVN Revision: 21833  OS version               : OS X 10.5.7    To reproduce:  $ valgrind  xcodebuild/Debug/unit_tests  --gtest_filter=BookmarkEditorControllerTest.UserEditsStuff    [==========] Running 1 test from 1 test case.  [----------] Global test environment set-up.  [----------] 1 test from BookmarkEditorControllerTest  [ RUN      ] BookmarkEditorControllerTest.UserEditsStuff  [77781:1291:0731/191114:92116149376810:INFO:/Users/glider/src/chromium/chromium2/src/chrome/browser/bookmarks/bookmark_model.cc(142)]  Loading bookmarks  [77781:1291:0731/191117:92119457563107:FATAL:/Users/glider/src/chromium/chromium2/src/chrome/browser/bookmarks/bookmark_model.cc(162)]  Check failed: false.   [77781:1291:0731/191117:92119457563107:FATAL:/Users/glider/src/chromium/chromium2/src/chrome/browser/bookmarks/bookmark_model.cc(162)]  Check failed: false.     Backtrace:  	0   unit_tests                          0x00d4f607  _Z18PR_ParseTimeStringPKciPx + 46989  	1   unit_tests                          0x00d73764  _Z18PR_ParseTimeStringPKciPx + 194794  	2   unit_tests                          0x00474828  _ZN2v86HandleINS_8FunctionEE4CastINS_5ValueEEES2_NS0_IT_EE + 534506  	3   unit_tests                          0x004e278f  _ZN2v86HandleINS_8FunctionEE4CastINS_5ValueEEES2_NS0_IT_EE + 984913  	4   unit_tests                          0x000987d8 start + 614616  	5   unit_tests                          0x00aab63e  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 651796  	6   unit_tests                          0x00ab03af  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 671621  	7   unit_tests                          0x00ab60b9  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 695439  	8   unit_tests                          0x00ab0deb  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 674241  	9   unit_tests                          0x00ab0294  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 671338  	10  unit_tests                          0x00ab609d  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 695411  	11  unit_tests                          0x00ab0c21  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 673783  	12  unit_tests                          0x00ab00f3  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 670921  	13  unit_tests                          0x00ab01ec  _ZN2v810PersistentINS_6StringEE3NewENS_6HandleIS1_EE + 671170  	14  unit_tests                          0x009e91d2  _ZN2v86HandleINS_5ValueEEC1INS_6ObjectEEENS0_IT_EE + 524916  	15  unit_tests                          0x009e7454  _ZN2v86HandleINS_5ValueEEC1INS_6ObjectEEENS0_IT_EE + 517366  	16  unit_tests                          0x00002736 start + 54      ==77781==   ==77781== Process terminating with default action of signal 5 (SIGTRAP)  ==77781==    at 0xD4F285: DebugUtil::BreakDebugger() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xD73836: logging::LogMessage::~LogMessage() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0x474827: BookmarkModel::Remove(BookmarkNode const*  int)  (in /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0x4E278E: -[BookmarkEditorController ok:] (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0x987D7:  BookmarkEditorControllerTest_UserEditsStuff_Test::TestBody() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAAB63D: testing::Test::Run() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB03AE: testing::internal::TestInfoImpl::Run() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB60B8:  testing::internal::TestInfoImpl::RunTest(testing::TestInfo*) (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB0DEA: void  testing::internal::List&lt;testing::TestInfo*&gt;::ForEach&lt;void  (*)(testing::TestInfo*)&gt;(void (*)(testing::TestInfo*)) const (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB0293: testing::TestCase::Run() (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB609C:  testing::TestCase::RunTestCase(testing::TestCase*) (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==    by 0xAB0C20: void  testing::internal::List&lt;testing::TestCase*&gt;::ForEach&lt;void  (*)(testing::TestCase*)&gt;(void (*)(testing::TestCase*)) const (in  /Users/glider/src/chromium/chromium2/src/xcodebuild/Debug/unit_tests)  ==77781==   ==77781== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1)  ==77781== malloc/free: in use at exit: 746 182 bytes in 13 504 blocks.  ==77781== malloc/free: 26 383 allocs  12 879 frees  2 764 099 bytes allocated.  ==77781== For counts of detected errors  rerun with: -v  ==77781== searching for pointers to 13 504 not-freed blocks.  ==77781== checked 51 363 500 bytes.     </pre>