<title>Issue 22016 -   chromium -    Some Linux laptops can't resolve &quot;localhost&quot; or &quot;127.0.0.1&quot; when there's no network connectivity - Project Hosting on Google Code</title> <pre> Some Linux laptops can't resolve &quot;localhost&quot; or &quot;127.0.0.1&quot;  when they are not connected to any network.  getaddrinfo returns  EAI_AGAIN (-3).    I can't reproduce this error if I unplug the Ethernet cable from  my Ubuntu Hardy desktop.  I can't reproduce this error on other  laptops  either.  So there may be something different in the  configuration of those laptops.  It would be nice to make a  reasonable effort to find out what that difference is.    If I remove the AI_ADDRCONFIG flag from the getaddrinfo call   then getaddrinfo can resolve &quot;localhost&quot; and &quot;127.0.0.1&quot;.  I  consulted Ulrich Drepper  the maintainer of glibc  and he  suggested that we continue to use AI_ADDRCONFIG.    We should be able to solve the problem with &quot;127.0.0.1&quot; by  first calling getaddrinfo with hints.flags = AI_NUMERICHOST.  Mozilla does that:  <a href="http://bonsai.mozilla.org/cvsblame.cgi?">http://bonsai.mozilla.org/cvsblame.cgi?</a>  file=mozilla/netwerk/dns/src/nsHostResolver.cpp&amp;rev=1.23&amp;mark=465-  468 479 485#465    A potential issue is that getaddrinfo with AI_NUMERICHOST  still hits DNS in Mac OS X 10.4 (see  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=404399">https://bugzilla.mozilla.org/show_bug.cgi?id=404399</a>).  So  we may need to add some ifdef for Mac.  Here is the special  case for Mac in NSPR:  <a href="http://bonsai.mozilla.org/cvsblame.cgi?">http://bonsai.mozilla.org/cvsblame.cgi?</a>  file=mozilla/nsprpub/pr/src/misc/prnetdb.c&amp;rev=3.59&amp;mark=2241 2252-  2261#2241    As for &quot;localhost&quot;  I don't have a good solution.  I guess  we can retry getaddrinfo without AI_ADDRCONFIG if getaddrinfo  with AI_ADDRCONFIG returns EAI_AGAIN. </pre>