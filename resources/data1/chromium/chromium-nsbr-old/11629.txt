<title>Issue 11629 -   chromium -    Refactor BrowsingInstances and process logic - Project Hosting on Google Code</title> <pre> Currently  we're somewhat misusing the SiteInstance and BrowsingInstance   classes to handle special cases in the process model.  We should eventually   separate out the process logic to handle these cases properly.    Long version:    BrowsingInstances should correspond to a set of tabs that have script   connections to each other.  SiteInstances should represent a set of same-  site pages within a BrowsingInstance.  Thus  each SiteInstance should have   one BrowsingInstance that it belongs to.    We've decided that we want all new tab (DOM UI) pages to share a process    and the same thing for all extension pages.  Right now  we do this by   having them all share a SiteInstance  even though they should belong to   different BrowsingInstances.  As a result  we need special case logic when   we navigate away from one of these DOM UI pages to make sure that the new   web pages don't end up stuck in the same BrowsingInstance.  (This was <a title="REGRESSION: Opening multiple tabs with same URL all share the same process id" class=closed_ref href="/p/chromium/issues/detail?id=9364"> bug   9364 </a>  which required new code in RenderViewHostManager::GetSiteInstanceForEntry.  It's not 100% right  since   it means we'll create more than one BrowsingInstance for a tab if you visit   a web page  then type in a DOM UI URL  then visit another web page.)    We're doing a similar thing if users specify the --process-per-site command   line flag  effectively causing all BrowsingInstances to have the same map   of site-to-SiteInstance.    To improve this  we should refactor BrowsingInstances and SiteInstances to   separate out the process model logic.  This would let things like new tab   pages belong to separate SiteInstances (as they should  conceptually) but   still share a process (as we want).    (There's no rush on this  but it will clean up some code and eliminate some   strange corner cases.) </pre>