<title>Issue 6014 -   chromium -    Crash with Drag and drop  if DCHECK is enabled - Project Hosting on Google Code</title> <pre> Build: 1.0.154.42 (Official Build 7335)      1. Launch Chrome with --enable-dcheck  2. Have two tabs.  3. Drag and drop a tab to a new window and drop it back to its original window.    Chrome will crash.    The full stack trace can be found @  http://crash/reportdetail?email=&amp;clientid=&amp;reportid=9de311ff4098571e&amp;product=Chrome&amp;version=&amp;signature=&amp;date=    Stack trace  ###########  Thread 0 *CRASHED* (EXCEPTION_BREAKPOINT @0x010078a0)  0x010078a0 	[chrome.dll 	- logging.cc:502] 	logging::LogMessage::~LogMessage()  0x0141ce9f 	[chrome.dll 	- tab_strip.cc:580]   TabStrip::DestroyDraggedSourceTab(Tab *)  0x01429776 	[chrome.dll 	- dragged_tab_controller.cc:104]   DraggedTabController::~DraggedTabController()  0x01429733 	[chrome.dll 	+ 0x00429733] 	DraggedTabController::`vector  deleting destructor'(unsigned int)  0x0141cda9 	[chrome.dll 	- tab_strip.cc:567] 	TabStrip::DestroyDragController()  0x0142a591 	[chrome.dll 	- dragged_tab_controller.cc:799]   DraggedTabController::OnAnimateToBoundsComplete()  0x0142a5a1 	[chrome.dll 	- task.h:573]   CallbackImpl&lt;DraggedTabController void (  DraggedTabController::*)(void) Tuple0&gt;::RunWithParams(Tuple0 const &amp;)  0x014302b9 	[chrome.dll 	- dragged_tab_view.cc:133]   DraggedTabView::AnimationEnded(Animation const *)  0x0150fa0b 	[chrome.dll 	- animation.cc:65] 	Animation::Stop()  0x0150fab5 	[chrome.dll 	- animation.cc:109] 	Animation::Step()  0x01268d3d 	[chrome.dll 	- timer.h:147]   base::BaseTimer&lt;DownloadItem 1&gt;::TimerTask::Run()  0x0100c153 	[chrome.dll 	- message_loop.cc:303] 	MessageLoop::RunTask(Task *)  0x0100c18f 	[chrome.dll 	- message_loop.cc:311]   MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const &amp;)  0x0100c44a 	[chrome.dll 	- message_loop.cc:430]   MessageLoop::DoDelayedWork(Time *)  0x01018c79 	[chrome.dll 	- message_pump_win.cc:336]   base::MessagePumpForUI::DoRunLoop()  0x01018804 	[chrome.dll 	- message_pump_win.cc:95]   base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate  * base::MessagePumpWin::Dispatcher *)  0x0100be88 	[chrome.dll 	- message_loop.cc:187] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100c640 	[chrome.dll 	- message_loop.cc:553]   MessageLoopForUI::Run(base::MessagePumpWin::Dispatcher *)  0x011fee1a 	[chrome.dll 	- browser_main.cc:559] 	BrowserMain(CommandLine  &amp; int sandbox::BrokerServices *)  0x0100344b 	[chrome.dll 	- chrome_dll_main.cc:224] 	ChromeMain  0x00402ac1 	[chrome.exe 	- google_update_client.cc:93]   google_update::GoogleUpdateClient::Launch(HINSTANCE__  * sandbox::SandboxInterfaceInfo * wchar_t * int char const * int *)  0x00402531 	[chrome.exe 	- chrome_exe_main.cc:66] 	wWinMain  Thread 1  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df2b 	[ntdll.dll 	+ 0x0000df2b] 	NtWaitForMultipleObjects  0x7c809573 	[kernel32.dll 	+ 0x00009573] 	CreateFileMappingA  0x7e4195f8 	[user32.dll 	+ 0x000095f8] 	RealMsgWaitForMultipleObjectsEx  0x01018cf9 	[chrome.dll 	- message_pump_win.cc:369]   base::MessagePumpForUI::WaitForWork()  0x01018cb5 	[chrome.dll 	- message_pump_win.cc:356]   base::MessagePumpForUI::DoRunLoop()  0x01018804 	[chrome.dll 	- message_pump_win.cc:95]   base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate  * base::MessagePumpWin::Dispatcher *)  0x0100b7e8 	[chrome.dll 	- message_pump_win.h:123]   base::MessagePumpWin::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 2  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0149e7d7 	[chrome.dll 	- condition_variable_win.cc:62]   ConditionVariable::TimedWait(TimeDelta const &amp;)  0x0149e700 	[chrome.dll 	- condition_variable_win.cc:46]   ConditionVariable::Wait()  0x0124f793 	[chrome.dll 	- dns_master.cc:243]   chrome_browser_net::DnsMaster::GetNextAssignment(std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;  &gt; *)  0x012cb990 	[chrome.dll 	- dns_slave.cc:60]   chrome_browser_net::DnsSlave::Run()  0x012cb8b2 	[chrome.dll 	- dns_slave.cc:44]   chrome_browser_net::DnsSlave::ThreadStart(void *)  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 3  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0149e7d7 	[chrome.dll 	- condition_variable_win.cc:62]   ConditionVariable::TimedWait(TimeDelta const &amp;)  0x0149e700 	[chrome.dll 	- condition_variable_win.cc:46]   ConditionVariable::Wait()  0x0124f793 	[chrome.dll 	- dns_master.cc:243]   chrome_browser_net::DnsMaster::GetNextAssignment(std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;  &gt; *)  0x012cb990 	[chrome.dll 	- dns_slave.cc:60]   chrome_browser_net::DnsSlave::Run()  0x012cb8b2 	[chrome.dll 	- dns_slave.cc:44]   chrome_browser_net::DnsSlave::ThreadStart(void *)  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 4  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0149e7d7 	[chrome.dll 	- condition_variable_win.cc:62]   ConditionVariable::TimedWait(TimeDelta const &amp;)  0x0149e700 	[chrome.dll 	- condition_variable_win.cc:46]   ConditionVariable::Wait()  0x0124f793 	[chrome.dll 	- dns_master.cc:243]   chrome_browser_net::DnsMaster::GetNextAssignment(std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;  &gt; *)  0x012cb990 	[chrome.dll 	- dns_slave.cc:60]   chrome_browser_net::DnsSlave::Run()  0x012cb8b2 	[chrome.dll 	- dns_slave.cc:44]   chrome_browser_net::DnsSlave::ThreadStart(void *)  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 5  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90da2b 	[ntdll.dll 	+ 0x0000da2b] 	ZwRemoveIoCompletion  0x7c80a7d5 	[kernel32.dll 	+ 0x0000a7d5] 	GetQueuedCompletionStatus  0x0040613c 	[chrome.exe 	- broker_services.cc:148]   sandbox::BrokerServicesBase::TargetEventsThread(void *)  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 6  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df2b 	[ntdll.dll 	+ 0x0000df2b] 	NtWaitForMultipleObjects  0x7c809573 	[kernel32.dll 	+ 0x00009573] 	CreateFileMappingA  0x7e4195f8 	[user32.dll 	+ 0x000095f8] 	RealMsgWaitForMultipleObjectsEx  0x01019269 	[chrome.dll 	- message_pump_win.cc:542]   base::MessagePumpForIO::WaitForWork()  0x0101913c 	[chrome.dll 	- message_pump_win.cc:491]   base::MessagePumpForIO::DoRunLoop()  0x01018804 	[chrome.dll 	- message_pump_win.cc:95]   base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate  * base::MessagePumpWin::Dispatcher *)  0x0100b7e8 	[chrome.dll 	- message_pump_win.h:123]   base::MessagePumpWin::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 7  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90d1fb 	[ntdll.dll 	+ 0x0000d1fb] 	ZwDelayExecution  0x7c927f01 	[ntdll.dll 	+ 0x00027f01] 	RtlpTimerThread  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 8  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90da2b 	[ntdll.dll 	+ 0x0000da2b] 	ZwRemoveIoCompletion  0x7c91026c 	[ntdll.dll 	+ 0x0001026c] 	RtlpWorkerThread  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 9  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df2b 	[ntdll.dll 	+ 0x0000df2b] 	NtWaitForMultipleObjects  0x7c929c95 	[ntdll.dll 	+ 0x00029c95] 	RtlpWaitThread  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 10  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0101baef 	[chrome.dll 	- waitable_event_win.cc:39]   base::WaitableEvent::Wait()  0x01019b3f 	[chrome.dll 	- message_pump_default.cc:42]   base::MessagePumpDefault::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 11  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0101baef 	[chrome.dll 	- waitable_event_win.cc:39]   base::WaitableEvent::Wait()  0x01019b3f 	[chrome.dll 	- message_pump_default.cc:42]   base::MessagePumpDefault::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 12  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0101bbe5 	[chrome.dll 	- waitable_event_win.cc:52]   base::WaitableEvent::TimedWait(TimeDelta const &amp;)  0x01019b83 	[chrome.dll 	- message_pump_default.cc:46]   base::MessagePumpDefault::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 13  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0101baef 	[chrome.dll 	- waitable_event_win.cc:39]   base::WaitableEvent::Wait()  0x01019b3f 	[chrome.dll 	- message_pump_default.cc:42]   base::MessagePumpDefault::Run(base::MessagePump::Delegate *)  0x0100be93 	[chrome.dll 	- message_loop.cc:192] 	MessageLoop::RunInternal()  0x0100be02 	[chrome.dll 	- message_loop.cc:175] 	MessageLoop::RunHandler()  0x0100bda5 	[chrome.dll 	- message_loop.cc:149] 	MessageLoop::Run()  0x01499667 	[chrome.dll 	- thread.cc:156] 	base::Thread::ThreadMain()  0x0100daea 	[chrome.dll 	- platform_thread_win.cc:28] 	`anonymous  namespace'::ThreadFunc(void *)  0x015b152f 	[chrome.dll 	- threadex.c:348] 	_callthreadstartex  0x015b15d4 	[chrome.dll 	- threadex.c:326] 	_threadstartex  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart  Thread 14  0x7c90e4f4 	[ntdll.dll 	+ 0x0000e4f4] 	KiFastSystemCallRet  0x7c90df3b 	[ntdll.dll 	+ 0x0000df3b] 	ZwWaitForSingleObject  0x7c8025da 	[kernel32.dll 	+ 0x000025da] 	WaitForSingleObjectEx  0x7c802541 	[kernel32.dll 	+ 0x00002541] 	WaitForSingleObject  0x0149e7d7 	[chrome.dll 	- condition_variable_win.cc:62]   ConditionVariable::TimedWait(TimeDelta const &amp;)  0x0149e700 	[chrome.dll 	- condition_variable_win.cc:46]   ConditionVariable::Wait()  0x0124f793 	[chrome.dll 	- dns_master.cc:243]   chrome_browser_net::DnsMaster::GetNextAssignment(std::basic_string&lt;char std::char_traits&lt;char&gt; std::allocator&lt;char&gt;  &gt; *)  0x012cb990 	[chrome.dll 	- dns_slave.cc:60]   chrome_browser_net::DnsSlave::Run()  0x012cb8b2 	[chrome.dll 	- dns_slave.cc:44]   chrome_browser_net::DnsSlave::ThreadStart(void *)  0x7c80b712 	[kernel32.dll 	+ 0x0000b712] 	BaseThreadStart      </pre>