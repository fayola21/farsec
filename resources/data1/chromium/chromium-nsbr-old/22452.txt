<title>Issue 22452 -   chromium -    Invalid write in sqlite3PutVarint() in test HistoryContentsProviderTest.Body - Project Hosting on Google Code</title> <pre> Happened half the time during a -O1 -fno-inlining big-redzone   valgrind fishing expedition on mac 'caliban'.  Valgrind complained:    Invalid write of size 1    sqlite3PutVarint (third_party/sqlite/src/util.c:613)    fillInCell (third_party/sqlite/src/btree.c:5075)    sqlite3BtreeInsert (third_party/sqlite/src/btree.c:6507)    sqlite3VdbeExec (third_party/sqlite/src/vdbe.c:3724)    sqlite3Step (third_party/sqlite/src/vdbeapi.c:344)    sqlite3_step (third_party/sqlite/src/vdbeapi.c:403)    sqlite3_exec (third_party/sqlite/src/legacy.c:71)    history::URLDatabase::InitKeywordSearchTermsTable()  (chrome/browser/history/url_database.cc:302)    history::ArchivedDatabase::Init(FilePath const&amp;)  (chrome/browser/history/archived_database.cc:57)    history::HistoryBackend::InitImpl()  (chrome/browser/history/history_backend.cc:570)    history::HistoryBackend::Init()  (chrome/browser/history/history_backend.cc:214)    void DispatchToMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()&gt;(history::HistoryBackend*  void  (history::HistoryBackend::*)()  Tuple0 const&amp;) (tuple.h:412)    RunnableMethod&lt;history::HistoryBackend  void  (history::HistoryBackend::*)()  Tuple0&gt;::Run() (task.h:307)    MessageLoop::RunTask(Task*) (base/message_loop.cc:314)    MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&amp;)  (base/message_loop.cc:322)    MessageLoop::DoWork() (base/message_loop.cc:429)    base::MessagePumpDefault::Run(base::MessagePump::Delegate*)  (base/message_pump_default.cc:23)    MessageLoop::RunInternal() (base/message_loop.cc:199)    MessageLoop::RunHandler() (base/message_loop.cc:181)    MessageLoop::Run() (base/message_loop.cc:155)    (anonymous namespace)::ChromeHistoryThread::Run(MessageLoop*)  (chrome/browser/history/history.cc:75)    base::Thread::ThreadMain() (base/thread.cc:153)    ThreadFunc(void*) (base/platform_thread_posix.cc:26)    _pthread_start    thread_start  Address 0xcced068 is 8 bytes inside a block of size 4 104 alloc'd    malloc (/vg_replace_malloc.c:195)    sqlite3MemMalloc (third_party/sqlite/src/mem1.c:43)    mallocWithAlarm (third_party/sqlite/src/malloc.c:251)    sqlite3Malloc (third_party/sqlite/src/malloc.c:279)    pcache1Alloc (third_party/sqlite/src/pcache1.c:172)    sqlite3PageMalloc (third_party/sqlite/src/pcache1.c:243)    allocateTempSpace (third_party/sqlite/src/btree.c:1932)    sqlite3BtreeInsert (third_party/sqlite/src/btree.c:6504)    sqlite3VdbeExec (third_party/sqlite/src/vdbe.c:3724)    sqlite3Step (third_party/sqlite/src/vdbeapi.c:344)    sqlite3_step (third_party/sqlite/src/vdbeapi.c:403)    sqlite3_exec (third_party/sqlite/src/legacy.c:71)    MetaTableHelper::Init(std::basic_string&lt;char  std::char_traits&lt;char&gt;   std::allocator&lt;char&gt; &gt; const&amp;  int  int  sqlite3*)  (chrome/browser/meta_table_helper.cc:55)    history::ArchivedDatabase::Init(FilePath const&amp;)  (chrome/browser/history/archived_database.cc:52)    history::HistoryBackend::InitImpl()  (chrome/browser/history/history_backend.cc:570)    history::HistoryBackend::Init()  (chrome/browser/history/history_backend.cc:214) </pre>