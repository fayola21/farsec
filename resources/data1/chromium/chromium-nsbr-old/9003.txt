<title>Issue 9003 -   chromium -    Memory leak in SSL_ForceHandshake? - Project Hosting on Google Code</title> <pre> To reproduce:    $ valgrind --leak-check=full   --num-callers=30   chrome/Hammer/net_unittests   --gtest_filter=X509CertificateTest.*:SSLClientSocketTest.*:URLRequestTest.*    Here's the log when built and run against a freshly built nss-3.12.2:    2 307 (2 071 direct  236 indirect) bytes in 1 blocks are definitely lost   in loss record 80 of 94     at malloc   valgrind/trunk/coregrind/m_replacemalloc/vg_replace_malloc.c:207     by PR_Malloc   nss-3.12.2/mozilla/nsprpub/Linux2.6_x86_glibc_PTH_DBG.OBJ/pr/src/malloc/prmem.c:467     by PL_ArenaAllocate   nss-3.12.2/mozilla/nsprpub/Linux2.6_x86_glibc_PTH_DBG.OBJ/lib/ds/plarena.c:228     by PORT_ArenaAlloc_Util   nss-3.12.2/mozilla/security/nss/lib/util/secport.c:246     by PORT_ArenaZAlloc_Util   nss-3.12.2/mozilla/security/nss/lib/util/secport.c:268     by seckey_ExtractPublicKey   nss-3.12.2/mozilla/security/nss/lib/cryptohi/seckey.c:1007     by CERT_ExtractPublicKey   nss-3.12.2/mozilla/security/nss/lib/cryptohi/seckey.c:1163     by CERT_VerifySignedData   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:134     by cert_VerifyCertChainOld   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:635     by cert_VerifyCertChain   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:872     by CERT_VerifyCertChain   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:881     by CERT_VerifyCert   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:1477     by CERT_VerifyCertNow   nss-3.12.2/mozilla/security/nss/lib/certhigh/certvfy.c:1528     by SSL_AuthCertificate   nss-3.12.2/mozilla/security/nss/lib/ssl/sslauth.c:254     by ssl3_HandleCertificate   nss-3.12.2/mozilla/security/nss/lib/ssl/ssl3con.c:7258     by ssl3_HandleHandshakeMessage   nss-3.12.2/mozilla/security/nss/lib/ssl/ssl3con.c:7937     by ssl3_HandleHandshake   nss-3.12.2/mozilla/security/nss/lib/ssl/ssl3con.c:8061     by ssl3_HandleRecord   nss-3.12.2/mozilla/security/nss/lib/ssl/ssl3con.c:8324     by ssl3_GatherCompleteHandshake   nss-3.12.2/mozilla/security/nss/lib/ssl/ssl3gthr.c:206     by SSL_ForceHandshake   nss-3.12.2/mozilla/security/nss/lib/ssl/sslsecur.c:397     by net::SSLClientSocketNSS::DoHandshakeRead()   chrome-build/src/net/base/ssl_client_socket_nss.cc:524     by net::SSLClientSocketNSS::DoLoop(int)  ...   </pre>