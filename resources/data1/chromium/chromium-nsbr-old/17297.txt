<title>Issue 17297 -   chromium -    Memory leak in color space setup while unarchiving NSColor in unit_test - Project Hosting on Google Code</title> <pre> This is showing up sporadically on the Mac valgind unit_test bot. I'm not   sure whether there's an OS leak  or we're losing track of a color we've   loaded.    14:22:46 memcheck_analyze.py [ERROR] Leak_DefinitelyLost  4 768 (256 direct  4 512 indirect) bytes in 16 blocks are definitely lost in   loss record 2 766 of 2 859    malloc (algrind-  trunk/coregrind/m_replacemalloc/vg_replace_malloc.c:193)    stdSmartNewPtr   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    stdSmartNewHandle   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    IOCreateAndOpen   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    ScratchInit   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    CMNewAccessFromAnother   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    CMCopyProfile   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/ColorSync.framework/Versions/A/ColorSync)    CMSGetSystemDefaultProfile   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.d  ylib)    deviceSet   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.d  ylib)    cmsDataProviderGetBytes   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.d  ylib)    CMSValidateProfile   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.d  ylib)    CGCMSInterfaceValidateProfile   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics)    CGCMSUtilsValidateProfile   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics)    CGColorSpaceCreateICCBased   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics)    create_generic_color_space   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics)    CGColorSpaceCreateWithIndex   (/System/Library/Frameworks/ApplicationServices.framework/Versions/A/  Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics)    +[NSColorSpace specialColorSpaceWithID:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    -[NSColorSpace initWithCGColorSpace:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    +[NSDynamicSystemColor keyboardFocusIndicatorColor]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    -[NSDynamicSystemColor recacheColor]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    -[NSDynamicSystemColor initWithSelector:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    +[NSColor keyboardFocusIndicatorColor]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    +[NSColor colorWithCatalogName:colorName:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    +[NSCatalogColor newWithCoder:zone:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    -[NSColor initWithCoder:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    _decodeObject_old   (/System/Library/Frameworks/Foundation.framework/Versions/C/Foundati  on)    _decodeValueOfObjCType   (/System/Library/Frameworks/Foundation.framework/Versions/C/Foundati  on)    -[NSUnarchiver decodeValuesOfObjCTypes:]   (/System/Library/Frameworks/Foundation.framework/Versions/C/Foundati  on)    -[NSColorList _decodeWithoutNameWithCoder:newStyle:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)    -[NSColorList _parseArchivedList:]   (/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit)   </pre>