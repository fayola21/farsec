<title>Issue 2079 -   chromium -    Dialog windows crash due to simultaneous 2-way dismissal - Project Hosting on Google Code</title> <pre> Product Version      : 0.2.149.29 (1798)             Safari 3: NA      Firefox 3: OK           IE 7: OK      1. Run script like &lt;script&gt;alert('');&lt;/script&gt;  2. Focus the OK button and press it with a space bar (but do not release it).  3. Press ESC.        Dialog window is dismissed.        First  DialogClientView::AcceptWindow() is fired by VK_ESC accelerator.  The dismissal procedure starts  but the window still waits for WM_CLOSE.  (I've seen a comment somewhere in the code that it is like that to simplify the code  i. e. have only   one path for destroying a dialog both by closing it with a cross and with an accelerator key).  Since OK button has already been pressed (WM_KEYDOWN has been sent)  there goes WM_KEYUP which starts   the closing procedure for the second time. That causes NOTREACHED() in DialogClientView::AcceptWindow() to be fired.    Possible solution is to destroy the window right after we are told to do so  without sending WM_CLOSE   to ourselves...   </pre>