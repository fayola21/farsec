<title>Issue 4010 -   chromium -    HistoryURLProvider needs to adjust inline autocomplete offset in call to net::FormatURL - Project Hosting on Google Code</title> <pre> See &lt;b880810&gt;    If you have some Unicode hosts in your history  and you type in e.g. &quot;xn&quot;  into the address bar  you get inline autocompleted with Unicode  which is  totally wrong.    The bug here is that HistoryAutocomplete sets a match's input_location even  when StringForURLDisplay() has fixed up the fill_into_edit into something  that no longer looks like the original user input.  A hackish fix would be  to detect and prevent this case.  A better fix is perhaps to wait for the  history system to deal with Unicode/punycode issues better internally   which will hopefully avoid this kind of a case at all.   </pre>