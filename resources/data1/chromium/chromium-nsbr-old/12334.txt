<title>Issue 12334 -   chromium -    Linux: Re-enable explicit browser shutdown in UITest::QuitBrowser() - Project Hosting on Google Code</title> <pre> See the commented-out block of code that contains:      ApplyAccelerator(IDC_CLOSE_WINDOW);    Our UI tests all run fine without it  but if we uncomment it  there are  errors during shutdown. It looks like we are double-destroying the main  window? I suspect that there is some sort of race with the shutdown  initiated by      server_-&gt;Disconnect();    (I say race because if you put breakpoints in the right place while  debugging  everything will shut down cleanly.) I'm filing this bug and  disabling that block of code so that we can enable the IDC_CLOSE_WINDOW  command in browser.cc  which is needed for various tests and session  restore functionality.    Note that disabling server_-&gt;Disconnect() works just as well as disabling  the IDC_CLOSE_WINDOW command. Also  I don't know about chromebot  but I  tested this on windows as well and for ui tests windows can also do fine  without either IDC_CLOSE_WINDOW or server_-&gt;Disconnect(). </pre>