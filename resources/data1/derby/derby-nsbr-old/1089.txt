Derby fails inserting a join into a table with a generated column    I've been having a problem inserting the result of a join into a table with a generated column. If I rephrase the join clause into a where clause  the problem goes away. And it only seems to happen if the target table has a generated column. Unfortunately  the join that I want to do in my application is pretty complex so I don't think I can rephrase it. But here's a very simplified example of what I'm talking about:ij version 10.1ij&gt; connect 'jdbc:derby:test;create=true';ij&gt; create table source (source_id int not null primary key);0 rows inserted/updated/deletedij&gt; insert into source values (0);insert into source values (1);insert into source values (2);insert into source values (3);insert into source values (4);insert into source values (5);insert into source values (6);insert into source values (7);insert into source values (8);insert into source values (9);1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; 1 row inserted/updated/deletedij&gt; create table dest (dest_id int not null primary key generated always as identity source_id_1 int not null source_id_2 int not null);0 rows inserted/updated/deletedij&gt; select s1.source_id  s2.source_idfrom source as s1join source as s2on 1 = 1;SOURCE_ID |SOURCE_ID-----------------------0 |00 |10 |20 |30 |40 |50 |60 |70 |80 |91 |01 |11 |21 |31 |41 |51 |61 |71 |81 |92 |02 |12 |22 |32 |42 |52 |62 |72 |82 |93 |03 |13 |23 |33 |43 |53 |63 |73 |83 |94 |04 |14 |24 |34 |44 |54 |64 |74 |84 |95 |05 |15 |25 |35 |45 |55 |65 |75 |85 |96 |06 |16 |26 |36 |46 |56 |66 |76 |86 |97 |07 |17 |27 |37 |47 |57 |67 |77 |87 |98 |08 |18 |28 |38 |48 |58 |68 |78 |88 |99 |09 |19 |29 |39 |49 |59 |69 |79 |89 |9100 rows selectedij&gt; insert into dest (source_id_1  source_id_2)select s1.source_id  s2.source_idfrom source as s1join source as s2on 1 = 1;ERROR XJ001: Java exception: ': java.lang.NullPointerException'.ij&gt;derby.log:----------------------------------------------------------------2006-03-07 20:01:12.152 GMT:Booting Derby version The Apache Software Foundation - Apache Derby - 10.1.2.1 - (330608): instance c013800d-0109-d64c-5067-000000172958on database directory D:/Documents and Settings&#42;**/My Documents/testDatabase Class Loader started - derby.database.classpath=''2006-03-07 20:01:52.671 GMT Thread&#91;main 5 main&#93; (XID = 124)  (SESSIONID = 0)  (DATABASE = test)  (DRDAID = null)  Cleanup action starting2006-03-07 20:01:52.671 GMT Thread&#91;main 5 main&#93; (XID = 124)  (SESSIONID = 0)  (DATABASE = test)  (DRDAID = null)  Failed Statement is: insert into dest (source_id_1  source_id_2)select s1.source_id  s2.source_idfrom source as s1join source as s2on 1 = 1java.lang.NullPointerExceptionat org.apache.derby.impl.sql.compile.ResultColumnList.remapColumnReferencesToExpressions(Unknown Source)at org.apache.derby.impl.sql.compile.JoinNode.flatten(Unknown Source)at org.apache.derby.impl.sql.compile.FromList.flattenFromTables(Unknown Source)at org.apache.derby.impl.sql.compile.SelectNode.preprocess(Unknown Source)at org.apache.derby.impl.sql.compile.SingleChildResultSetNode.preprocess(Unknown Source)at org.apache.derby.impl.sql.compile.DMLStatementNode.optimize(Unknown Source)at org.apache.derby.impl.sql.compile.DMLModStatementNode.optimize(Unknown Source)at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)at org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source)at org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source)at org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source)at org.apache.derby.impl.tools.ij.Main.go(Unknown Source)at org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)at org.apache.derby.impl.tools.ij.Main14.main(Unknown Source)at org.apache.derby.tools.ij.main(Unknown Source)Cleanup action completed2006-03-07 20:43:03.759 GMT:Shutting down instance c013800d-0109-d64c-5067-000000172958----------------------------------------------------------------   