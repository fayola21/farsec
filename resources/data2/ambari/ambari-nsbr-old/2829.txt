Dashboard refactor and Unit tests       