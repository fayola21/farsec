At code generation time  look at collation type to determine what kind of DVD should get generated for character types.    Currently  in Derby 10.2  we generate SQLChar/SQLVarchar/SQLLongvarchar/SQLClob for various SQL character types. All these DVDs have the default collation of UCS_BASIC. Starting 10.3  we should look at the collation type of the DTD before deciding what kind of DVD gets generated for SQL character types. If the collation type of the character type is terriotry based collation  then we should generate CollatorSQLChar/CollatorSQLVarchar/CollatorSQLLongvarchar/CollatorSQLClob rather than SQLChar/SQLVarchar/SQLLongvarchar/SQLClob. The CollatorSQLxxx DVDs will have the territory based collator associated with them and hence the collation order of these DVDs will be different than the DVDs with default collation of UCS_BASIC.   